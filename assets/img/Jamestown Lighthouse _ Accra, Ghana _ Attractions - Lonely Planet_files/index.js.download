!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["@highlight-run/client"]={})}(this,(function(e){"use strict";var t,n,i=Object.defineProperty,o=Object.defineProperties,s=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,c=(e,t,n)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t)=>{for(var n in t||(t={}))l.call(t,n)&&c(e,n,t[n]);if(r)for(var n of r(t))a.call(t,n)&&c(e,n,t[n]);return e},u=(e,t)=>o(e,s(t)),p=(e,t)=>{var n={};for(var i in e)l.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&r)for(var i of r(e))t.indexOf(i)<0&&a.call(e,i)&&(n[i]=e[i]);return n},h=(e,t,n)=>(c(e,"symbol"!=typeof t?t+"":t,n),n),m=(e,t,n)=>new Promise(((i,o)=>{var s=e=>{try{l(n.next(e))}catch(ws){o(ws)}},r=e=>{try{l(n.throw(e))}catch(ws){o(ws)}},l=e=>e.done?i(e.value):Promise.resolve(e.value).then(s,r);l((n=n.apply(e,t)).next())}));function b(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{a(i.next(e))}catch(t){s(t)}}function l(e){try{a(i.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,l)}a((i=i.apply(e,t||[])).next())}))}function Z(e){var t=null==e?void 0:e.host;return Boolean((null==t?void 0:t.shadowRoot)===e)}function g(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function y(e){try{var t=e.rules||e.cssRules;return t?((n=Array.from(t).map(I).join("")).includes(" background-clip: text;")&&!n.includes(" -webkit-background-clip: text;")&&(n=n.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),n):null}catch(i){return null}var n}function I(e){var t=e.cssText;if(function(e){return"styleSheet"in e}(e))try{t=y(e.styleSheet)||t}catch(n){}return t}(n=t||(t={}))[n.Document=0]="Document",n[n.DocumentType=1]="DocumentType",n[n.Element=2]="Element",n[n.Text=3]="Text",n[n.CDATA=4]="CDATA",n[n.Comment=5]="Comment";var f=function(){function e(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return e.prototype.getId=function(e){var t;if(!e)return-1;var n=null===(t=this.getMeta(e))||void 0===t?void 0:t.id;return null!=n?n:-1},e.prototype.getNode=function(e){return this.idNodeMap.get(e)||null},e.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},e.prototype.getMeta=function(e){return this.nodeMetaMap.get(e)||null},e.prototype.removeNodeFromMap=function(e){var t=this,n=this.getId(e);this.idNodeMap.delete(n),e.childNodes&&e.childNodes.forEach((function(e){return t.removeNodeFromMap(e)}))},e.prototype.has=function(e){return this.idNodeMap.has(e)},e.prototype.hasNode=function(e){return this.nodeMetaMap.has(e)},e.prototype.add=function(e,t){var n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)},e.prototype.replace=function(e,t){var n=this.getNode(e);if(n){var i=this.nodeMetaMap.get(n);i&&this.nodeMetaMap.set(t,i)}this.idNodeMap.set(e,t)},e.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},e}();var G="__rrweb_original__";function V(e){var t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?t.toLowerCase():null}function X(e){return e=(null==(e=e.replace(/[^ -~]+/g,""))?void 0:e.split(" ").map((function(e){return Math.random().toString(20).substr(2,e.length)})).join(" "))||""}function S(e){return"img"===e||"video"===e||"audio"===e||"source"===e}var W=[new RegExp("[a-zA-Z0-9.!#$%&'*+=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:.[a-zA-Z0-9-]+)*"),new RegExp("[0-9]{9,16}"),new RegExp("[0-9]{3}-?[0-9]{2}-?[0-9]{4}"),new RegExp("[+]?[(]?[0-9]{3}[)]?[-s.]?[0-9]{3}[-s.]?[0-9]{4,6}"),new RegExp("[0-9]{4}-?[0-9]{4}-?[0-9]{4}-?[0-9]{4}"),new RegExp("[0-9]{1,5}.?[0-9]{0,3}s[a-zA-Z]{2,30}s[a-zA-Z]{2,15}"),new RegExp("(?:[0-9]{1,3}.){3}[0-9]{1,3}")];function R(e){return!!e&&W.some((function(t){return t.test(e)}))}var v=function(e){var t=e.maskInputOptions,n=e.tagName,i=e.type,o=e.overwriteRecord,s=i&&i.toLowerCase();return!("true"===o||!t[n.toLowerCase()]&&(!s||!t[s]))};function C(e){var t=e.maskInputOptions,n=e.tagName,i=e.type,o=e.value,s=e.overwriteRecord,r=e.maskInputFn,l=o||"";return v({maskInputOptions:t,tagName:n,type:i,overwriteRecord:s})&&(l=r?r(l):"*".repeat(l.length)),l}var k,N,L=1,w=new RegExp("[^a-z0-9-_:]");function T(){return L++}var x=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,J=/^(?:[a-z+]+:)?\/\//i,Y=/^www\..*/i,U=/^(data:)([^,]*),(.*)/i;function F(e,t){return(e||"").replace(x,(function(e,n,i,o,s,r){var l,a=i||s||r,c=n||o||"";if(!a)return e;if(J.test(a)||Y.test(a))return"url(".concat(c).concat(a).concat(c,")");if(U.test(a))return"url(".concat(c).concat(a).concat(c,")");if("/"===a[0])return"url(".concat(c).concat((l=t,(l.indexOf("//")>-1?l.split("/").slice(0,3).join("/"):l.split("/")[0]).split("?")[0]+a)).concat(c,")");var d=t.split("/"),u=a.split("/");d.pop();for(var p=0,h=u;p<h.length;p++){var m=h[p];"."!==m&&(".."===m?d.pop():d.push(m))}return"url(".concat(c).concat(d.join("/")).concat(c,")")}))}var K=/^[^ \t\n\r\u000c]+/,H=/^[, \t\n\r\u000c]+/;function E(e,t){if(!t||""===t.trim())return t;var n=e.createElement("a");return n.href=t,n.href}function O(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function z(){var e=document.createElement("a");return e.href="",e.href}function M(e,t,n,i){return i?"src"===n||"href"===n&&("use"!==t||"#"!==i[0])||"xlink:href"===n&&"#"!==i[0]?E(e,i):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;var n=0;function i(e){var i,o=e.exec(t.substring(n));return o?(i=o[0],n+=i.length,i):""}for(var o=[];i(H),!(n>=t.length);){var s=i(K);if(","===s.slice(-1))s=E(e,s.substring(0,s.length-1)),o.push(s);else{var r="";s=E(e,s);for(var l=!1;;){var a=t.charAt(n);if(""===a){o.push((s+r).trim());break}if(l)")"===a&&(l=!1);else{if(","===a){n+=1,o.push((s+r).trim());break}"("===a&&(l=!0)}r+=a,n+=1}}}return o.join(", ")}(e,i):"style"===n?F(i,z()):"object"===t&&"data"===n?E(e,i):i:E(e,i):i}function A(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function B(e,t,n){try{if("string"==typeof t){if(e.classList.contains(t))return!0}else for(var i=e.classList.length;i--;){var o=e.classList[i];if(t.test(o))return!0}if(n)return e.matches(n)}catch(s){}return!1}function P(e,t,n){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return!!n&&P(e.parentNode,t,n);for(var i=e.classList.length;i--;){var o=e.classList[i];if(t.test(o))return!0}return!!n&&P(e.parentNode,t,n)}function D(e,t,n){try{var i=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===i)return!1;if("string"==typeof t){if(i.classList.contains(t))return!0;if(i.closest(".".concat(t)))return!0}else if(P(i,t,!0))return!0;if(n){if(i.matches(n))return!0;if(i.closest(n))return!0}}catch(o){}return!1}function Q(e,n){var i=n.doc,o=n.mirror,s=n.blockClass,r=n.blockSelector,l=n.maskTextClass,a=n.maskTextSelector,c=n.inlineStylesheet,d=n.maskInputOptions,u=void 0===d?{}:d,p=n.maskTextFn,h=n.maskInputFn,m=n.dataURLOptions,b=void 0===m?{}:m,Z=n.inlineImages,g=n.recordCanvas,I=n.keepIframeSrcFn,f=n.newlyAddedElement,W=void 0!==f&&f,v=n.privacySetting,L=function(e,t){if(!t.hasNode(e))return;var n=t.getId(e);return 1===n?void 0:n}(i,o);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:t.Document,childNodes:[],compatMode:e.compatMode}:{type:t.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:t.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:L};case e.ELEMENT_NODE:return function(e,n){for(var i=n.doc,o=n.blockClass,s=n.blockSelector,r=n.inlineStylesheet,l=n.maskInputOptions,a=void 0===l?{}:l,c=n.maskInputFn,d=n.maskTextClass,u=n.dataURLOptions,p=void 0===u?{}:u,h=n.inlineImages,m=n.recordCanvas,b=n.keepIframeSrcFn,Z=n.newlyAddedElement,g=void 0!==Z&&Z,I=n.privacySetting,f=n.rootId,X=B(e,o,s),W=B(e,d,null),R="strict"===I,v=function(e){if(e instanceof HTMLFormElement)return"form";var t=e.tagName.toLowerCase().trim();return w.test(t)?"div":t}(e),L={},T=e.attributes.length,x=0;x<T;x++){var J=e.attributes[x];A(v,J.name)||(L[J.name]=M(i,v,J.name,J.value))}if("link"===v&&r){var Y=Array.from(i.styleSheets).find((function(t){return t.href===e.href})),U=null;Y&&(U=y(Y)),U&&(delete L.rel,delete L.href,L._cssText=F(U,Y.href))}if("style"===v&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){(U=y(e.sheet))&&(L._cssText=F(U,z()))}if("input"===v||"textarea"===v||"select"===v){var K=e.value,H=e.checked;if("radio"!==L.type&&"checkbox"!==L.type&&"submit"!==L.type&&"button"!==L.type&&K){var E=V(e);L.value=C({type:E,tagName:v,value:K,overwriteRecord:e.getAttribute("data-hl-record"),maskInputOptions:a,maskInputFn:c})}else H&&(L.checked=H)}"option"===v&&(e.selected&&!a.select?L.selected=!0:delete L.selected);if("canvas"===v&&m)if("2d"===e.__context)(function(e){var t=e.getContext("2d");if(!t)return!0;for(var n=0;n<e.width;n+=50)for(var i=0;i<e.height;i+=50){var o=t.getImageData,s=G in o?o.__rrweb_original__:o;if(new Uint32Array(s.call(t,n,i,Math.min(50,e.width-n),Math.min(50,e.height-i)).data.buffer).some((function(e){return 0!==e})))return!1}return!0})(e)||(L.rr_dataURL=e.toDataURL(p.type,p.quality));else if(!("__context"in e)){var P=e.toDataURL(p.type,p.quality),D=document.createElement("canvas");D.width=e.width,D.height=e.height,P!==D.toDataURL(p.type,p.quality)&&(L.rr_dataURL=P)}if("img"===v&&h&&!X&&!W&&!R){k||(k=i.createElement("canvas"),N=k.getContext("2d"));var Q=e,j=Q.crossOrigin;Q.crossOrigin="anonymous";var _=function(){Q.removeEventListener("load",_);try{k.width=Q.naturalWidth,k.height=Q.naturalHeight,N.drawImage(Q,0,0),L.rr_dataURL=k.toDataURL(p.type,p.quality)}catch(e){console.warn("Cannot inline img src=".concat(Q.currentSrc,"! Error: ").concat(e))}j?L.crossOrigin=j:Q.removeAttribute("crossorigin")};Q.complete&&0!==Q.naturalWidth?_():Q.addEventListener("load",_)}"audio"!==v&&"video"!==v||(L.rr_mediaState=e.paused?"paused":"played",L.rr_mediaCurrentTime=e.currentTime);g||(e.scrollLeft&&(L.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(L.rr_scrollTop=e.scrollTop));if(X||W||R&&S(v)){var q=e.getBoundingClientRect(),$=q.width,ee=q.height;L={class:L.class,rr_width:"".concat($,"px"),rr_height:"".concat(ee,"px")}}R&&S(v)&&(X=!0);"iframe"!==v||b(L.src)||(e.contentDocument||(L.rr_src=L.src),delete L.src);if(h&&"video"===v){var te=e;if(""===te.src||-1!==te.src.indexOf("blob:")){var ne=e.getBoundingClientRect();$=ne.width,ee=ne.height;L={rr_width:"".concat($,"px"),rr_height:"".concat(ee,"px"),rr_inlined_video:!0},v="canvas"}}return{type:t.Element,tagName:v,attributes:L,childNodes:[],isSVG:O(e)||void 0,needBlock:X,needMask:W,rootId:f}}(e,{doc:i,blockClass:s,blockSelector:r,inlineStylesheet:c,maskInputOptions:u,maskInputFn:h,maskTextClass:l,dataURLOptions:b,inlineImages:Z,recordCanvas:g,keepIframeSrcFn:I,newlyAddedElement:W,privacySetting:v,rootId:L});case e.TEXT_NODE:return function(e,n){var i,o,s=n.maskTextClass,r=n.maskTextSelector,l=n.maskTextFn,a=n.privacySetting,c=n.rootId,d=e.parentNode&&e.parentNode.tagName,u=e.textContent,p="STYLE"===d||void 0,h="SCRIPT"===d||void 0,m=!1;if(p&&u){try{e.nextSibling||e.previousSibling||(null===(i=e.parentNode.sheet)||void 0===i?void 0:i.cssRules)&&(u=(b=e.parentNode.sheet).cssRules?Array.from(b.cssRules).map((function(e){return e.cssText||""})).join(""):"")}catch(I){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(I),e)}u=F(u,z()),m=!0}var b;h?(u="SCRIPT_PLACEHOLDER",m=!0):"NOSCRIPT"===d&&(u="",m=!0);!p&&!h&&u&&D(e,s,r)&&(u=l?l(u):u.replace(/[\S]/g,"*"));var Z="strict"===a,g=null===(o=e.parentElement)||void 0===o?void 0:o.getAttribute("data-hl-record"),y="default"===a&&R(u);if((Z||y)&&!g&&!m&&d){!new Set(["HEAD","TITLE","STYLE","SCRIPT","HTML","BODY","NOSCRIPT"]).has(d)&&u&&(u=X(u))}return{type:t.Text,textContent:u||"",isStyle:p,rootId:c}}(e,{maskTextClass:l,maskTextSelector:a,maskTextFn:p,privacySetting:v,rootId:L});case e.CDATA_SECTION_NODE:return{type:t.CDATA,textContent:"",rootId:L};case e.COMMENT_NODE:return{type:t.Comment,textContent:e.textContent||"",rootId:L};default:return!1}}function j(e){return null==e?"":e.toLowerCase()}function _(e,n){var i,o=n.doc,s=n.mirror,r=n.blockClass,l=n.blockSelector,a=n.maskTextClass,c=n.maskTextSelector,d=n.skipChild,u=void 0!==d&&d,p=n.inlineStylesheet,h=void 0===p||p,m=n.maskInputOptions,b=void 0===m?{}:m,y=n.maskTextFn,I=n.maskInputFn,f=n.slimDOMOptions,G=n.dataURLOptions,V=void 0===G?{}:G,X=n.inlineImages,W=void 0!==X&&X,R=n.recordCanvas,v=void 0!==R&&R,C=n.onSerialize,k=n.onIframeLoad,N=n.iframeLoadTimeout,L=void 0===N?5e3:N,w=n.onStylesheetLoad,x=n.stylesheetLoadTimeout,J=void 0===x?5e3:x,Y=n.keepIframeSrcFn,U=void 0===Y?function(){return!1}:Y,F=n.newlyAddedElement,K=void 0!==F&&F,H=n.privacySetting,E=n.preserveWhiteSpace,O=void 0===E||E,z=Q(e,{doc:o,mirror:s,blockClass:r,blockSelector:l,maskTextClass:a,maskTextSelector:c,inlineStylesheet:h,maskInputOptions:b,maskTextFn:y,maskInputFn:I,dataURLOptions:V,inlineImages:W,recordCanvas:v,keepIframeSrcFn:U,newlyAddedElement:K,privacySetting:H});if(!z)return console.warn(e,"not serialized"),null;i=s.hasNode(e)?s.getId(e):!function(e,n){if(n.comment&&e.type===t.Comment)return!0;if(e.type===t.Element){if(n.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")))return!0;if(n.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(j(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===j(e.attributes.name)||"icon"===j(e.attributes.rel)||"apple-touch-icon"===j(e.attributes.rel)||"shortcut icon"===j(e.attributes.rel))))return!0;if("meta"===e.tagName){if(n.headMetaDescKeywords&&j(e.attributes.name).match(/^description|keywords$/))return!0;if(n.headMetaSocial&&(j(e.attributes.property).match(/^(og|twitter|fb):/)||j(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===j(e.attributes.name)))return!0;if(n.headMetaRobots&&("robots"===j(e.attributes.name)||"googlebot"===j(e.attributes.name)||"bingbot"===j(e.attributes.name)))return!0;if(n.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(n.headMetaAuthorship&&("author"===j(e.attributes.name)||"generator"===j(e.attributes.name)||"framework"===j(e.attributes.name)||"publisher"===j(e.attributes.name)||"progid"===j(e.attributes.name)||j(e.attributes.property).match(/^article:/)||j(e.attributes.property).match(/^product:/)))return!0;if(n.headMetaVerification&&("google-site-verification"===j(e.attributes.name)||"yandex-verification"===j(e.attributes.name)||"csrf-token"===j(e.attributes.name)||"p:domain_verify"===j(e.attributes.name)||"verify-v1"===j(e.attributes.name)||"verification"===j(e.attributes.name)||"shopify-checkout-api-token"===j(e.attributes.name)))return!0}}return!1}(z,f)&&(O||z.type!==t.Text||z.isStyle||z.textContent.replace(/^\s+|\s+$/gm,"").length)?T():-2;var M=Object.assign(z,{id:i});if(s.add(e,M),-2===i)return null;C&&C(e);var A=!u,B=H,P="strict"===H;if(M.type===t.Element){if(A=A&&!M.needBlock,P||(P=!!M.needBlock||!!M.needMask),B=P?"strict":B,P&&S(M.tagName)){var D=e.cloneNode();D.src="",s.add(D,M)}delete M.needBlock,delete M.needMask;var q=e.shadowRoot;q&&g(q)&&(M.isShadowHost=!0)}if((M.type===t.Document||M.type===t.Element)&&A){f.headWhitespace&&M.type===t.Element&&"head"===M.tagName&&(O=!1);for(var $={doc:o,mirror:s,blockClass:r,blockSelector:l,maskTextClass:a,maskTextSelector:c,skipChild:u,inlineStylesheet:h,maskInputOptions:b,maskTextFn:y,maskInputFn:I,slimDOMOptions:f,dataURLOptions:V,inlineImages:W,recordCanvas:v,preserveWhiteSpace:O,onSerialize:C,onIframeLoad:k,iframeLoadTimeout:L,onStylesheetLoad:w,stylesheetLoadTimeout:J,keepIframeSrcFn:U,privacySetting:B},ee=0,te=Array.from(e.childNodes);ee<te.length;ee++){(oe=_(te[ee],$))&&M.childNodes.push(oe)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(var ne=0,ie=Array.from(e.shadowRoot.childNodes);ne<ie.length;ne++){var oe;(oe=_(ie[ne],$))&&(g(e.shadowRoot)&&(oe.isShadow=!0),M.childNodes.push(oe))}}return e.parentNode&&Z(e.parentNode)&&g(e.parentNode)&&(M.isShadow=!0),M.type===t.Element&&"iframe"===M.tagName&&function(e,t,n){var i=e.contentWindow;if(i){var o,s=!1;try{o=i.document.readyState}catch(a){return}if("complete"===o){var r="about:blank";if(i.location.href!==r||e.src===r||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}else{var l=setTimeout((function(){s||(t(),s=!0)}),n);e.addEventListener("load",(function(){clearTimeout(l),s=!0,t()}))}}}(e,(function(){var t=e.contentDocument;if(t&&k){var n=_(t,{doc:t,mirror:s,blockClass:r,blockSelector:l,maskTextClass:a,maskTextSelector:c,skipChild:!1,inlineStylesheet:h,maskInputOptions:b,maskTextFn:y,maskInputFn:I,slimDOMOptions:f,dataURLOptions:V,inlineImages:W,recordCanvas:v,preserveWhiteSpace:O,onSerialize:C,onIframeLoad:k,iframeLoadTimeout:L,onStylesheetLoad:w,stylesheetLoadTimeout:J,keepIframeSrcFn:U,privacySetting:H});n&&k(e,n)}}),L),M.type===t.Element&&"link"===M.tagName&&"stylesheet"===M.attributes.rel&&function(e,t,n){var i,o=!1;try{i=e.sheet}catch(r){return}if(!i){var s=setTimeout((function(){o||(t(),o=!0)}),n);e.addEventListener("load",(function(){clearTimeout(s),o=!0,t()}))}}(e,(function(){if(w){var t=_(e,{doc:o,mirror:s,blockClass:r,blockSelector:l,maskTextClass:a,maskTextSelector:c,skipChild:!1,inlineStylesheet:h,maskInputOptions:b,maskTextFn:y,maskInputFn:I,slimDOMOptions:f,dataURLOptions:V,inlineImages:W,recordCanvas:v,preserveWhiteSpace:O,onSerialize:C,onIframeLoad:k,iframeLoadTimeout:L,onStylesheetLoad:w,stylesheetLoadTimeout:J,keepIframeSrcFn:U,privacySetting:H});t&&w(e,t)}}),J),M}function q(e,t,n=document){const i={capture:!0};return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t,i)}const $="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let ee={map:{},getId:()=>(console.error($),-1),getNode:()=>(console.error($),null),removeNodeFromMap(){console.error($)},has:()=>(console.error($),!1),reset(){console.error($)}};function te(e,t,n={}){let i=null,o=0;return function(...s){const r=Date.now();o||!1!==n.leading||(o=r);const l=t-(r-o),a=this;l<=0||l>t?(i&&(clearTimeout(i),i=null),o=r,e.apply(a,s)):i||!1===n.trailing||(i=setTimeout((()=>{o=!1===n.leading?0:Date.now(),i=null,e.apply(a,s)}),l))}}function ne(e,t,n,i,o=window){const s=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,i?n:{set(e){setTimeout((()=>{n.set.call(this,e)}),0),s&&s.set&&s.set.call(this,e)}}),()=>ne(e,t,s||{},!0)}function ie(e,t,n){try{if(!(t in e))return()=>{};const i=e[t],o=n(i);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:i}})),e[t]=o,()=>{e[t]=i}}catch(i){return()=>{}}}function oe(e){var t,n,i,o,s,r;const l=e.document;return{left:l.scrollingElement?l.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:(null==l?void 0:l.documentElement.scrollLeft)||(null===(n=null===(t=null==l?void 0:l.body)||void 0===t?void 0:t.parentElement)||void 0===n?void 0:n.scrollLeft)||(null===(i=null==l?void 0:l.body)||void 0===i?void 0:i.scrollLeft)||0,top:l.scrollingElement?l.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:(null==l?void 0:l.documentElement.scrollTop)||(null===(s=null===(o=null==l?void 0:l.body)||void 0===o?void 0:o.parentElement)||void 0===s?void 0:s.scrollTop)||(null===(r=null==l?void 0:l.body)||void 0===r?void 0:r.scrollTop)||0}}function se(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function re(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(ee=new Proxy(ee,{get:(e,t,n)=>("map"===t&&console.error($),Reflect.get(e,t,n))}));function le(e,t,n,i){if(!e)return!1;const o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(!o)return!1;try{if("string"==typeof t){if(o.classList.contains(t))return!0;if(i&&null!==o.closest("."+t))return!0}else if(P(o,t,i))return!0}catch(s){}if(n){if(o.matches(n))return!0;if(i&&null!==o.closest(n))return!0}return!1}function ae(e,t){return-2===t.getId(e)}function ce(e,t){if(Z(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||ce(e.parentNode,t))}function de(e){return Boolean(e.changedTouches)}function ue(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function pe(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function he(e){return Boolean(null==e?void 0:e.shadowRoot)}class me{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){var t;return null!==(t=this.styleIDMap.get(e))&&void 0!==t?t:-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function be(e){var t,n;let i=null;return(null===(n=null===(t=e.getRootNode)||void 0===t?void 0:t.call(e))||void 0===n?void 0:n.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(i=e.getRootNode().host),i}function Ze(e){const t=e.ownerDocument;if(!t)return!1;const n=function(e){let t,n=e;for(;t=be(n);)n=t;return n}(e);return t.contains(n)}function ge(e){const t=e.ownerDocument;return!!t&&(t.contains(e)||Ze(e))}var ye=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(ye||{}),Ie=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e))(Ie||{}),fe=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(fe||{}),Ge=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(Ge||{});function Ve(e){return"__ln"in e}class Xe{constructor(){this.length=0,this.head=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=(null==t?void 0:t.next)||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&Ve(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&Ve(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next&&(t.next.previous=t.previous)):(this.head=t.next,this.head&&(this.head.previous=null)),e.__ln&&delete e.__ln,this.length--)}}const Se=(e,t)=>`${e}@${t}`;class We{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Xe,n=e=>{let t=e,n=-2;for(;-2===n;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},i=i=>{if(!i.parentNode||!ge(i))return;const o=Z(i.parentNode)?this.mirror.getId(be(i)):this.mirror.getId(i.parentNode),s=n(i);if(-1===o||-1===s)return t.addNode(i);const r=_(i,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,privacySetting:this.privacySetting,onSerialize:e=>{ue(e,this.mirror)&&this.iframeManager.addIframe(e),pe(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),he(i)&&this.shadowDomManager.addShadowRoot(i.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});r&&e.push({parentId:o,nextId:s,node:r})};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const r of this.movedSet)ve(this.removes,r,this.mirror)&&!this.movedSet.has(r.parentNode)||i(r);for(const r of this.addedSet)ke(this.droppedSet,r)||ve(this.removes,r,this.mirror)?ke(this.movedSet,r)?i(r):this.droppedSet.add(r):i(r);let o=null;for(;t.length;){let e=null;if(o){const t=this.mirror.getId(o.value.parentNode),i=n(o.value);-1!==t&&-1!==i&&(e=o)}if(!e)for(let i=t.length-1;i>=0;i--){const o=t.get(i);if(o){const t=this.mirror.getId(o.value.parentNode);if(-1===n(o.value))continue;if(-1!==t){e=o;break}{const t=o.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const n=t.parentNode.host;if(-1!==this.mirror.getId(n)){e=o;break}}}}}if(!e){for(;t.head;)t.removeNode(t.head.value);break}o=e.previous,t.removeNode(e.value),i(e.value)}const s={texts:this.texts.map((e=>{var t,n;let i=e.value;const o="strict"===this.privacySetting,s="default"===this.privacySetting&&R(i),r=null===(n=null===(t=e.node)||void 0===t?void 0:t.parentElement)||void 0===n?void 0:n.getAttribute("data-hl-record");return(o||s)&&r&&i&&(i=X(i)),{id:this.mirror.getId(e.node),value:i}})).filter((e=>this.mirror.has(e.id))),attributes:this.attributes.map((e=>({id:this.mirror.getId(e.node),attributes:e.attributes}))).filter((e=>this.mirror.has(e.id))),removes:this.removes,adds:e};(s.texts.length||s.attributes.length||s.removes.length||s.adds.length)&&(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(s))},this.processMutation=e=>{if(!ae(e.target,this.mirror))switch(e.type){case"characterData":{const t=e.target.textContent;le(e.target,this.blockClass,this.blockSelector,!1)||t===e.oldValue||this.texts.push({value:D(e.target,this.maskTextClass,this.maskTextSelector)&&t?this.maskTextFn?this.maskTextFn(t):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const t=e.target;let n=e.attributeName,i=e.target.getAttribute(n);if("value"===n){const e=V(t);i=C({maskInputOptions:this.maskInputOptions,tagName:t.tagName,type:e,value:i,overwriteRecord:t.getAttribute("data-hl-record"),maskInputFn:this.maskInputFn})}if(le(e.target,this.blockClass,this.blockSelector,!1)||i===e.oldValue)return;let o=this.attributes.find((t=>t.node===e.target));if("IFRAME"===t.tagName&&"src"===n&&!this.keepIframeSrcFn(i)){if(t.contentDocument)return;n="rr_src"}if(o||(o={node:e.target,attributes:{}},this.attributes.push(o)),"type"===n&&"INPUT"===t.tagName&&"password"===(e.oldValue||"").toLowerCase()&&t.setAttribute("data-rr-is-password","true"),"style"===n){const n=this.doc.createElement("span");e.oldValue&&n.setAttribute("style",e.oldValue),void 0!==o.attributes.style&&null!==o.attributes.style||(o.attributes.style={});const i=o.attributes.style;for(const e of Array.from(t.style)){const o=t.style.getPropertyValue(e),s=t.style.getPropertyPriority(e);o===n.style.getPropertyValue(e)&&s===n.style.getPropertyPriority(e)||(i[e]=""===s?o:[o,s])}for(const e of Array.from(n.style))""===t.style.getPropertyValue(e)&&(i[e]=!1)}else if(!A(t.tagName,n)){if("INPUT"===e.target.tagName){const t=e.target;if("password"===t.type){o.attributes.value="*".repeat(t.value.length);break}}o.attributes[n]=M(this.doc,t.tagName,n,i)}break}case"childList":if(le(e.target,this.blockClass,this.blockSelector,!0))return;e.addedNodes.forEach((t=>this.genAdds(t,e.target))),e.removedNodes.forEach((t=>{const n=this.mirror.getId(t),i=Z(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);le(e.target,this.blockClass,this.blockSelector,!1)||ae(t,this.mirror)||!function(e,t){return-1!==t.getId(e)}(t,this.mirror)||(this.addedSet.has(t)?(Re(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||ce(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[Se(n,i)]?Re(this.movedSet,t):this.removes.push({parentId:i,id:n,isShadow:!(!Z(e.target)||!g(e.target))||void 0})),this.mapRemoves.push(t))}))}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)){if(this.mirror.hasNode(e)){if(ae(e,this.mirror))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[Se(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);le(e,this.blockClass,this.blockSelector,!1)||(e.childNodes.forEach((e=>this.genAdds(e))),he(e)&&e.shadowRoot.childNodes.forEach((t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)})))}}}init(e){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","privacySetting","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((t=>{this[t]=e[t]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Re(e,t){e.delete(t),t.childNodes.forEach((t=>Re(e,t)))}function ve(e,t,n){return 0!==e.length&&Ce(e,t,n)}function Ce(e,t,n){const{parentNode:i}=t;if(!i)return!1;const o=n.getId(i);return!!e.some((e=>e.id===o))||Ce(e,i,n)}function ke(e,t){return 0!==e.size&&Ne(e,t)}function Ne(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||Ne(e,n))}let Le;const we=e=>{if(!Le)return e;return(...t)=>{try{return e(...t)}catch(n){if(Le&&!0===Le(n))return;throw n}}},Te=[];function xe(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0];return e.target}catch(t){return e.target}}function Je(e,t){var n,i;const o=new We;Te.push(o),o.init(e);let s=window.MutationObserver||window.__rrMutationObserver;const r=null===(i=null===(n=null===window||void 0===window?void 0:window.Zone)||void 0===n?void 0:n.__symbol__)||void 0===i?void 0:i.call(n,"MutationObserver");r&&window[r]&&(s=window[r]);const l=new s(we(o.processMutations.bind(o)));return l.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),l}function Ye({mouseInteractionCb:e,doc:t,mirror:n,blockClass:i,blockSelector:o,sampling:s}){if(!1===s.mouseInteraction)return()=>{};const r=!0===s.mouseInteraction||void 0===s.mouseInteraction?{}:s.mouseInteraction,l=[],a=t=>s=>{const r=xe(s);if(le(r,i,o,!0)||(e=>{try{if(e instanceof HTMLElement)return"CANVAS"===e.tagName}catch(t){return!1}return!1})(r))return;const l=de(s)?s.changedTouches[0]:s;if(!l)return;const a=n.getId(r),{clientX:c,clientY:d}=l;we(e)({type:fe[t],id:a,x:c,y:d})};return Object.keys(fe).filter((e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==r[e])).forEach((e=>{const n=e.toLowerCase(),i=a(e);l.push(q(n,i,t))})),we((()=>{l.forEach((e=>e()))}))}function Ue({scrollCb:e,doc:t,mirror:n,blockClass:i,blockSelector:o,sampling:s}){return q("scroll",we(te(we((s=>{const r=xe(s);if(!r||le(r,i,o,!0))return;const l=n.getId(r);if(r===t&&t.defaultView){const n=oe(t.defaultView);e({id:l,x:n.left,y:n.top})}else e({id:l,x:r.scrollLeft,y:r.scrollTop})})),s.scroll||100)),t)}function Fe(e,t){const n=Object.assign({},e);return t||delete n.userTriggered,n}const Ke=["INPUT","TEXTAREA","SELECT"],He=new WeakMap;function Ee(e){return function(e,t){if(Ae("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||Ae("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||Ae("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||Ae("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function Oe(e,t,n){let i,o;return e?(e.ownerNode?i=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:i}):{}}function ze({mirror:e,stylesheetManager:t},n){var i,o,s;let r=null;r="#document"===n.nodeName?e.getId(n):e.getId(n.host);const l="#document"===n.nodeName?null===(i=n.defaultView)||void 0===i?void 0:i.Document:null===(s=null===(o=n.ownerDocument)||void 0===o?void 0:o.defaultView)||void 0===s?void 0:s.ShadowRoot,a=Object.getOwnPropertyDescriptor(null==l?void 0:l.prototype,"adoptedStyleSheets");return null!==r&&-1!==r&&l&&a?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:a.configurable,enumerable:a.enumerable,get(){var e;return null===(e=a.get)||void 0===e?void 0:e.call(this)},set(e){var n;const i=null===(n=a.set)||void 0===n?void 0:n.call(this,e);if(null!==r&&-1!==r)try{t.adoptStyleSheets(e,r)}catch(o){}return i}}),we((()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:a.configurable,enumerable:a.enumerable,get:a.get,set:a.set})}))):()=>{}}function Me(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};!function(e,t){const{mutationCb:n,mousemoveCb:i,mouseInteractionCb:o,scrollCb:s,viewportResizeCb:r,inputCb:l,mediaInteractionCb:a,styleSheetRuleCb:c,styleDeclarationCb:d,canvasMutationCb:u,fontCb:p,selectionCb:h}=e;e.mutationCb=(...e)=>{t.mutation&&t.mutation(...e),n(...e)},e.mousemoveCb=(...e)=>{t.mousemove&&t.mousemove(...e),i(...e)},e.mouseInteractionCb=(...e)=>{t.mouseInteraction&&t.mouseInteraction(...e),o(...e)},e.scrollCb=(...e)=>{t.scroll&&t.scroll(...e),s(...e)},e.viewportResizeCb=(...e)=>{t.viewportResize&&t.viewportResize(...e),r(...e)},e.inputCb=(...e)=>{t.input&&t.input(...e),l(...e)},e.mediaInteractionCb=(...e)=>{t.mediaInteaction&&t.mediaInteaction(...e),a(...e)},e.styleSheetRuleCb=(...e)=>{t.styleSheetRule&&t.styleSheetRule(...e),c(...e)},e.styleDeclarationCb=(...e)=>{t.styleDeclaration&&t.styleDeclaration(...e),d(...e)},e.canvasMutationCb=(...e)=>{t.canvasMutation&&t.canvasMutation(...e),u(...e)},e.fontCb=(...e)=>{t.font&&t.font(...e),p(...e)},e.selectionCb=(...e)=>{t.selection&&t.selection(...e),h(...e)}}(e,t);const i=Je(e,e.doc),o=function({mousemoveCb:e,sampling:t,doc:n,mirror:i}){if(!1===t.mousemove)return()=>{};const o="number"==typeof t.mousemove?t.mousemove:50,s="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let r,l=[];const a=te(we((t=>{const n=Date.now()-r;e(l.map((e=>(e.timeOffset-=n,e))),t),l=[],r=null})),s),c=we(te(we((e=>{const t=xe(e),{clientX:n,clientY:o}=de(e)?e.changedTouches[0]:e;r||(r=Date.now()),l.push({x:n,y:o,id:i.getId(t),timeOffset:Date.now()-r}),a("undefined"!=typeof DragEvent&&e instanceof DragEvent?Ie.Drag:e instanceof MouseEvent?Ie.MouseMove:Ie.TouchMove)})),o,{trailing:!1})),d=[q("mousemove",c,n),q("touchmove",c,n),q("drag",c,n)];return we((()=>{d.forEach((e=>e()))}))}(e),s=Ye(e),r=Ue(e),l=function({viewportResizeCb:e}){let t=-1,n=-1;return q("resize",we(te(we((()=>{const i=se(),o=re();t===i&&n===o||(e({width:Number(o),height:Number(i)}),t=i,n=o)})),200)),window)}(e),a=function({inputCb:e,doc:t,mirror:n,blockClass:i,blockSelector:o,ignoreClass:s,maskInputOptions:r,maskInputFn:l,sampling:a,userTriggeredOnInput:c}){function d(e){let n=xe(e);const a=e.isTrusted,d=n&&n.tagName;if(n&&"OPTION"===d&&(n=n.parentElement),!n||!d||Ke.indexOf(d)<0||le(n,i,o,!0))return;if(n.classList.contains(s))return;let p=n.value,h=!1;const m=V(n)||"",b=n.getAttribute("data-hl-record");"radio"===m||"checkbox"===m?h=n.checked:v({maskInputOptions:r,type:m,tagName:d,overwriteRecord:b})&&(p=C({maskInputOptions:r,tagName:d,type:m,value:p,overwriteRecord:b,maskInputFn:l})),u(n,we(Fe)({text:p,isChecked:h,userTriggered:a},c));const Z=n.name;"radio"===m&&Z&&h&&t.querySelectorAll(`input[type="radio"][name="${Z}"]`).forEach((e=>{e!==n&&u(e,we(Fe)({text:e.value,isChecked:!h,userTriggered:!1},c))}))}function u(t,i){const o=He.get(t);if(!o||o.text!==i.text||o.isChecked!==i.isChecked){He.set(t,i);const o=n.getId(t);we(e)(Object.assign(Object.assign({},i),{id:o}))}}const p=("last"===a.input?["change"]:["input","change"]).map((e=>q(e,we(d),t))),h=t.defaultView;if(!h)return()=>{p.forEach((e=>e()))};const m=h.Object.getOwnPropertyDescriptor(h.HTMLInputElement.prototype,"value"),b=[[h.HTMLInputElement.prototype,"value"],[h.HTMLInputElement.prototype,"checked"],[h.HTMLSelectElement.prototype,"value"],[h.HTMLTextAreaElement.prototype,"value"],[h.HTMLSelectElement.prototype,"selectedIndex"],[h.HTMLOptionElement.prototype,"selected"]];return m&&m.set&&p.push(...b.map((e=>ne(e[0],e[1],{set(){we(d)({target:this,isTrusted:!1})}},!1,h)))),we((()=>{p.forEach((e=>e()))}))}(e),c=function({mediaInteractionCb:e,blockClass:t,blockSelector:n,mirror:i,sampling:o}){const s=we((s=>te(we((o=>{const r=xe(o);if(!r||le(r,t,n,!0))return;const{currentTime:l,volume:a,muted:c,playbackRate:d}=r;e({type:s,id:i.getId(r),currentTime:l,volume:a,muted:c,playbackRate:d})})),o.media||500))),r=[q("play",s(0)),q("pause",s(1)),q("seeked",s(2)),q("volumechange",s(3)),q("ratechange",s(4))];return we((()=>{r.forEach((e=>e()))}))}(e),d=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:i}){if(!i.CSSStyleSheet||!i.CSSStyleSheet.prototype)return()=>{};const o=i.CSSStyleSheet.prototype.insertRule;i.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:we(((i,o,s)=>{const[r,l]=s,{id:a,styleId:c}=Oe(o,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,adds:[{rule:r,index:l}]}),i.apply(o,s)}))});const s=i.CSSStyleSheet.prototype.deleteRule;let r,l;i.CSSStyleSheet.prototype.deleteRule=new Proxy(s,{apply:we(((i,o,s)=>{const[r]=s,{id:l,styleId:a}=Oe(o,t,n.styleMirror);return(l&&-1!==l||a&&-1!==a)&&e({id:l,styleId:a,removes:[{index:r}]}),i.apply(o,s)}))}),i.CSSStyleSheet.prototype.replace&&(r=i.CSSStyleSheet.prototype.replace,i.CSSStyleSheet.prototype.replace=new Proxy(r,{apply:we(((i,o,s)=>{const[r]=s,{id:l,styleId:a}=Oe(o,t,n.styleMirror);return(l&&-1!==l||a&&-1!==a)&&e({id:l,styleId:a,replace:r}),i.apply(o,s)}))})),i.CSSStyleSheet.prototype.replaceSync&&(l=i.CSSStyleSheet.prototype.replaceSync,i.CSSStyleSheet.prototype.replaceSync=new Proxy(l,{apply:we(((i,o,s)=>{const[r]=s,{id:l,styleId:a}=Oe(o,t,n.styleMirror);return(l&&-1!==l||a&&-1!==a)&&e({id:l,styleId:a,replaceSync:r}),i.apply(o,s)}))}));const a={};Be("CSSGroupingRule")?a.CSSGroupingRule=i.CSSGroupingRule:(Be("CSSMediaRule")&&(a.CSSMediaRule=i.CSSMediaRule),Be("CSSConditionRule")&&(a.CSSConditionRule=i.CSSConditionRule),Be("CSSSupportsRule")&&(a.CSSSupportsRule=i.CSSSupportsRule));const c={};return Object.entries(a).forEach((([i,o])=>{c[i]={insertRule:o.prototype.insertRule,deleteRule:o.prototype.deleteRule},o.prototype.insertRule=new Proxy(c[i].insertRule,{apply:we(((i,o,s)=>{const[r,l]=s,{id:a,styleId:c}=Oe(o.parentStyleSheet,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,adds:[{rule:r,index:[...Ee(o),l||0]}]}),i.apply(o,s)}))}),o.prototype.deleteRule=new Proxy(c[i].deleteRule,{apply:we(((i,o,s)=>{const[r]=s,{id:l,styleId:a}=Oe(o.parentStyleSheet,t,n.styleMirror);return(l&&-1!==l||a&&-1!==a)&&e({id:l,styleId:a,removes:[{index:[...Ee(o),r]}]}),i.apply(o,s)}))})})),we((()=>{i.CSSStyleSheet.prototype.insertRule=o,i.CSSStyleSheet.prototype.deleteRule=s,r&&(i.CSSStyleSheet.prototype.replace=r),l&&(i.CSSStyleSheet.prototype.replaceSync=l),Object.entries(a).forEach((([e,t])=>{t.prototype.insertRule=c[e].insertRule,t.prototype.deleteRule=c[e].deleteRule}))}))}(e,{win:n}),u=ze(e,e.doc),p=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:i},{win:o}){const s=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(s,{apply:we(((o,r,l)=>{var a;const[c,d,u]=l;if(n.has(c))return s.apply(r,[c,d,u]);const{id:p,styleId:h}=Oe(null===(a=r.parentRule)||void 0===a?void 0:a.parentStyleSheet,t,i.styleMirror);return(p&&-1!==p||h&&-1!==h)&&e({id:p,styleId:h,set:{property:c,value:d,priority:u},index:Ee(r.parentRule)}),o.apply(r,l)}))});const r=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(r,{apply:we(((o,s,l)=>{var a;const[c]=l;if(n.has(c))return r.apply(s,[c]);const{id:d,styleId:u}=Oe(null===(a=s.parentRule)||void 0===a?void 0:a.parentStyleSheet,t,i.styleMirror);return(d&&-1!==d||u&&-1!==u)&&e({id:d,styleId:u,remove:{property:c},index:Ee(s.parentRule)}),o.apply(s,l)}))}),we((()=>{o.CSSStyleDeclaration.prototype.setProperty=s,o.CSSStyleDeclaration.prototype.removeProperty=r}))}(e,{win:n}),h=e.collectFonts?function({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const i=[],o=new WeakMap,s=n.FontFace;n.FontFace=function(e,t,n){const i=new s(e,t,n);return o.set(i,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),i};const r=ie(t.fonts,"add",(function(t){return function(n){return setTimeout(we((()=>{const t=o.get(n);t&&(e(t),o.delete(n))})),0),t.apply(this,[n])}}));return i.push((()=>{n.FontFace=s})),i.push(r),we((()=>{i.forEach((e=>e()))}))}(e):()=>{},m=function(e){const{doc:t,mirror:n,blockClass:i,blockSelector:o,selectionCb:s}=e;let r=!0;const l=we((()=>{const e=t.getSelection();if(!e||r&&(null==e?void 0:e.isCollapsed))return;r=e.isCollapsed||!1;const l=[],a=e.rangeCount||0;for(let t=0;t<a;t++){const s=e.getRangeAt(t),{startContainer:r,startOffset:a,endContainer:c,endOffset:d}=s;le(r,i,o,!0)||le(c,i,o,!0)||l.push({start:n.getId(r),startOffset:a,end:n.getId(c),endOffset:d})}s({ranges:l})}));return l(),q("selectionchange",l)}(e),b=[];for(const Z of e.plugins)b.push(Z.observer(Z.callback,n,Z.options));return we((()=>{Te.forEach((e=>e.reset())),i.disconnect(),o(),s(),r(),l(),a(),c(),d(),u(),p(),h(),m(),b.forEach((e=>e()))}))}function Ae(e){return void 0!==window[e]}function Be(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class Pe{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,n,i){const o=n||this.getIdToRemoteIdMap(e),s=i||this.getRemoteIdToIdMap(e);let r=o.get(t);return r||(r=this.generateIdFn(),o.set(t,r),s.set(r,t)),r}getIds(e,t){const n=this.getIdToRemoteIdMap(e),i=this.getRemoteIdToIdMap(e);return t.map((t=>this.getId(e,t,n,i)))}getRemoteId(e,t,n){const i=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;const o=i.get(t);return o||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map((t=>this.getRemoteId(e,t,n)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}class De{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Pe(T),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Pe(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){var n;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),null===(n=this.loadListener)||void 0===n||n.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;const n=e.source;if(!n)return;const i=this.crossOriginIframeMap.get(n);if(!i)return;const o=this.transformCrossOriginEvent(i,t.data.event);o&&this.wrappedEmit(o,t.data.isCheckout)}transformCrossOriginEvent(e,t){var n;switch(t.type){case ye.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:ye.IncrementalSnapshot,data:{source:Ie.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case ye.Meta:case ye.Load:case ye.DomContentLoaded:return!1;case ye.Plugin:return t;case ye.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case ye.IncrementalSnapshot:switch(t.data.source){case Ie.Mutation:return t.data.adds.forEach((t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(t.node,n)})),t.data.removes.forEach((t=>{this.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((t=>{this.replaceIds(t,e,["id"])})),t.data.texts.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case Ie.Drag:case Ie.TouchMove:case Ie.MouseMove:return t.data.positions.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case Ie.ViewportResize:return!1;case Ie.MediaInteraction:case Ie.MouseInteraction:case Ie.Scroll:case Ie.CanvasMutation:case Ie.Input:return this.replaceIds(t.data,e,["id"]),t;case Ie.StyleSheetRule:case Ie.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case Ie.Font:return t;case Ie.Selection:return t.data.ranges.forEach((t=>{this.replaceIds(t,e,["start","end"])})),t;case Ie.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),null===(n=t.data.styles)||void 0===n||n.forEach((t=>{this.replaceStyleIds(t,e,["styleId"])})),t}}}replace(e,t,n,i){for(const o of i)(Array.isArray(t[o])||"number"==typeof t[o])&&(Array.isArray(t[o])?t[o]=e.getIds(n,t[o]):t[o]=e.getId(n,t[o]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((e=>{this.replaceIdOnNode(e,t)}))}patchRootIdOnNode(e,n){e.type===t.Document||e.rootId||(e.rootId=n),"childNodes"in e&&e.childNodes.forEach((e=>{this.patchRootIdOnNode(e,n)}))}}class Qe{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!g(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e);const n=Je(Object.assign(Object.assign({},this.bypassOptions),{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(Ue(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))),setTimeout((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(ze({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))}),0)}observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(ie(e.prototype,"attachShadow",(function(e){return function(i){const o=e.call(this,i);return this.shadowRoot&&ge(this)&&n.addShadowRoot(this.shadowRoot,t),o}})))}reset(){this.restoreHandlers.forEach((e=>{try{e()}catch(t){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}for(var je="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_e="undefined"==typeof Uint8Array?[]:new Uint8Array(256),qe=0;qe<je.length;qe++)_e[je.charCodeAt(qe)]=qe;const $e=new Map;const et=(e,t,n)=>{if(!e||!it(e,t)&&"object"!=typeof e)return;const i=function(e,t){let n=$e.get(e);return n||(n=new Map,$e.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name);let o=i.indexOf(e);return-1===o&&(o=i.length,i.push(e)),o};function tt(e,t,n){if(e instanceof Array)return e.map((e=>tt(e,t,n)));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray){return{rr_type:e.constructor.name,args:[Object.values(e)]}}if(e instanceof ArrayBuffer){return{rr_type:e.constructor.name,base64:function(e){var t,n=new Uint8Array(e),i=n.length,o="";for(t=0;t<i;t+=3)o+=je[n[t]>>2],o+=je[(3&n[t])<<4|n[t+1]>>4],o+=je[(15&n[t+1])<<2|n[t+2]>>6],o+=je[63&n[t+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o}(e)}}if(e instanceof DataView){return{rr_type:e.constructor.name,args:[tt(e.buffer,t,n),e.byteOffset,e.byteLength]}}if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:n}=e;return{rr_type:t,src:n}}if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}if(e instanceof ImageData){return{rr_type:e.constructor.name,args:[tt(e.data,t,n),e.width,e.height]}}if(it(e,t)||"object"==typeof e){return{rr_type:e.constructor.name,index:et(e,t,n)}}return e}const nt=(e,t,n)=>[...e].map((e=>tt(e,t,n))),it=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((e=>"function"==typeof t[e]));return Boolean(n.find((n=>e instanceof t[n])))};function ot(e,t,n){const i=[];try{const o=ie(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(i,...o){const s=e.apply(this,[i,...o]);return s&&(le(this,t,n,!0)||this.__context||(this.__context=i)),s}}));i.push(o)}catch(o){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach((e=>e()))}}function st(e,t,n,i,o,s,r){const l=[],a=Object.getOwnPropertyNames(e);for(const d of a)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(d))try{if("function"!=typeof e[d])continue;const s=ie(e,d,(function(e){return function(...s){const l=e.apply(this,s);if(et(l,r,this),!le(this.canvas,i,o,!0)){const e=nt([...s],r,this),i={type:t,property:d,args:e};n(this.canvas,i)}return l}}));l.push(s)}catch(c){const i=ne(e,d,{set(e){n(this.canvas,{type:t,property:d,args:[e],setter:!0})}});l.push(i)}return l}function rt(e,t,n){var i=void 0===t?null:t,o=function(e,t){var n=atob(e);if(t){for(var i=new Uint8Array(n.length),o=0,s=n.length;o<s;++o)i[o]=n.charCodeAt(o);return String.fromCharCode.apply(null,new Uint16Array(i.buffer))}return n}(e,void 0!==n&&n),s=o.indexOf("\n",10)+1,r=o.substring(s)+(i?"//# sourceMappingURL="+i:""),l=new Blob([r],{type:"application/javascript"});return URL.createObjectURL(l)}var lt,at,ct,dt,ut=(lt="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCiAgICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4NCg0KICAgIFBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueQ0KICAgIHB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC4NCg0KICAgIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIDQogICAgUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZDQogICAgQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULA0KICAgIElORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTQ0KICAgIExPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SDQogICAgT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUg0KICAgIFBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuDQogICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi8NCg0KICAgIGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHsNCiAgICAgICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9DQogICAgICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgew0KICAgICAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfQ0KICAgICAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbInRocm93Il0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfQ0KICAgICAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH0NCiAgICAgICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTsNCiAgICAgICAgfSk7DQogICAgfQoKICAgIC8qCiAgICAgKiBiYXNlNjQtYXJyYXlidWZmZXIgMS4wLjEgPGh0dHBzOi8vZ2l0aHViLmNvbS9uaWtsYXN2aC9iYXNlNjQtYXJyYXlidWZmZXI+CiAgICAgKiBDb3B5cmlnaHQgKGMpIDIwMjEgTmlrbGFzIHZvbiBIZXJ0emVuIDxodHRwczovL2hlcnR6ZW4uY29tPgogICAgICogUmVsZWFzZWQgdW5kZXIgTUlUIExpY2Vuc2UKICAgICAqLwogICAgdmFyIGNoYXJzID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nOwogICAgLy8gVXNlIGEgbG9va3VwIHRhYmxlIHRvIGZpbmQgdGhlIGluZGV4LgogICAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAndW5kZWZpbmVkJyA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogICAgfQogICAgdmFyIGVuY29kZSA9IGZ1bmN0aW9uIChhcnJheWJ1ZmZlcikgewogICAgICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaSwgbGVuID0gYnl0ZXMubGVuZ3RoLCBiYXNlNjQgPSAnJzsKICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpICs9IDMpIHsKICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2ldID4+IDJdOwogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbKChieXRlc1tpXSAmIDMpIDw8IDQpIHwgKGJ5dGVzW2kgKyAxXSA+PiA0KV07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2kgKyAxXSAmIDE1KSA8PCAyKSB8IChieXRlc1tpICsgMl0gPj4gNildOwogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaSArIDJdICYgNjNdOwogICAgICAgIH0KICAgICAgICBpZiAobGVuICUgMyA9PT0gMikgewogICAgICAgICAgICBiYXNlNjQgPSBiYXNlNjQuc3Vic3RyaW5nKDAsIGJhc2U2NC5sZW5ndGggLSAxKSArICc9JzsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAobGVuICUgMyA9PT0gMSkgewogICAgICAgICAgICBiYXNlNjQgPSBiYXNlNjQuc3Vic3RyaW5nKDAsIGJhc2U2NC5sZW5ndGggLSAyKSArICc9PSc7CiAgICAgICAgfQogICAgICAgIHJldHVybiBiYXNlNjQ7CiAgICB9OwoKICAgIGNvbnN0IGxhc3RCbG9iTWFwID0gbmV3IE1hcCgpOw0KICAgIGNvbnN0IHRyYW5zcGFyZW50QmxvYk1hcCA9IG5ldyBNYXAoKTsNCiAgICBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsNCiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICAgICAgICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7DQogICAgICAgICAgICBpZiAoJ09mZnNjcmVlbkNhbnZhcycgaW4gZ2xvYmFsVGhpcykgew0KICAgICAgICAgICAgICAgIGlmICh0cmFuc3BhcmVudEJsb2JNYXAuaGFzKGlkKSkNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zcGFyZW50QmxvYk1hcC5nZXQoaWQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IG9mZnNjcmVlbiA9IG5ldyBPZmZzY3JlZW5DYW52YXMod2lkdGgsIGhlaWdodCk7DQogICAgICAgICAgICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoJzJkJyk7DQogICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IHlpZWxkIG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBjb25zdCBhcnJheUJ1ZmZlciA9IHlpZWxkIGJsb2IuYXJyYXlCdWZmZXIoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOw0KICAgICAgICAgICAgICAgIHRyYW5zcGFyZW50QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7DQogICAgICAgICAgICAgICAgcmV0dXJuIGJhc2U2NDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHJldHVybiAnJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfQ0KICAgIGNvbnN0IHdvcmtlciA9IHNlbGY7DQogICAgbGV0IGxvZ0RlYnVnID0gZmFsc2U7DQogICAgY29uc3QgZGVidWcgPSAoLi4uYXJncykgPT4gew0KICAgICAgICBpZiAobG9nRGVidWcpIHsNCiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoLi4uYXJncyk7DQogICAgICAgIH0NCiAgICB9Ow0KICAgIHdvcmtlci5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZSkgew0KICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgICAgICAgICAgbG9nRGVidWcgPSAhIWUuZGF0YS5sb2dEZWJ1ZzsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBpZCwgYml0bWFwLCB3aWR0aCwgaGVpZ2h0LCBkeCwgZHksIGR3LCBkaCwgZGF0YVVSTE9wdGlvbnMgfSA9IGUuZGF0YTsNCiAgICAgICAgICAgICAgICBjb25zdCB0cmFuc3BhcmVudEJhc2U2NCA9IGdldFRyYW5zcGFyZW50QmxvYkZvcih3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucyk7DQogICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgnMmQnKTsNCiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGJpdG1hcCwgMCwgMCwgd2lkdGgsIGhlaWdodCk7DQogICAgICAgICAgICAgICAgYml0bWFwLmNsb3NlKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IHlpZWxkIG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBjb25zdCB0eXBlID0gYmxvYi50eXBlOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0geWllbGQgYmxvYi5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7DQogICAgICAgICAgICAgICAgaWYgKCFsYXN0QmxvYk1hcC5oYXMoaWQpICYmICh5aWVsZCB0cmFuc3BhcmVudEJhc2U2NCkgPT09IGJhc2U2NCkgew0KICAgICAgICAgICAgICAgICAgICBkZWJ1ZygnW2hpZ2hsaWdodC13b3JrZXJdIGNhbnZhcyBiaXRtYXAgaXMgdHJhbnNwYXJlbnQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZCwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U2NCwNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkLCBzdGF0dXM6ICd0cmFuc3BhcmVudCcgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChsYXN0QmxvYk1hcC5nZXQoaWQpID09PSBiYXNlNjQpIHsNCiAgICAgICAgICAgICAgICAgICAgZGVidWcoJ1toaWdobGlnaHQtd29ya2VyXSBjYW52YXMgYml0bWFwIGlzIHVuY2hhbmdlZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlkLA0KICAgICAgICAgICAgICAgICAgICAgICAgYmFzZTY0LA0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkLCBzdGF0dXM6ICd1bmNoYW5nZWQnIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBkZWJ1ZygnW2hpZ2hsaWdodC13b3JrZXJdIGNhbnZhcyBiaXRtYXAgcHJvY2Vzc2VkJywgew0KICAgICAgICAgICAgICAgICAgICBpZCwNCiAgICAgICAgICAgICAgICAgICAgYmFzZTY0LA0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7DQogICAgICAgICAgICAgICAgICAgIGlkLA0KICAgICAgICAgICAgICAgICAgICB0eXBlLA0KICAgICAgICAgICAgICAgICAgICBiYXNlNjQsDQogICAgICAgICAgICAgICAgICAgIHdpZHRoLA0KICAgICAgICAgICAgICAgICAgICBoZWlnaHQsDQogICAgICAgICAgICAgICAgICAgIGR4LA0KICAgICAgICAgICAgICAgICAgICBkeSwNCiAgICAgICAgICAgICAgICAgICAgZHcsDQogICAgICAgICAgICAgICAgICAgIGRoLA0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIGRlYnVnKCdbaGlnaGxpZ2h0LXdvcmtlcl0gbm8gb2Zmc2NyZWVuY2FudmFzIHN1cHBvcnQnLCB7DQogICAgICAgICAgICAgICAgICAgIGlkOiBlLmRhdGEuaWQsDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkOiBlLmRhdGEuaWQsIHN0YXR1czogJ3Vuc3VwcG9ydGVkJyB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsKCn0pKCk7Cgo=",at=null,ct=!1,function(e){return dt=dt||rt(lt,at,ct),new Worker(dt,e)});class pt{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.snapshotInProgressMap=new Map,this.lastSnapshotTime=new Map,this.frozen=!1,this.locked=!1,this.processMutation=(e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)},this.snapshot=e=>b(this,void 0,void 0,(function*(){var t;const n=this.mirror.getId(e);if(this.snapshotInProgressMap.get(n))return void this.debug(e,"snapshotting already in progress for",n);const i=1e3/("number"==typeof this.options.samplingManual?this.options.samplingManual:1),o=this.lastSnapshotTime.get(n);if(!(o&&(new Date).getTime()-o<i)){this.debug(e,"starting snapshotting"),this.lastSnapshotTime.set(n,(new Date).getTime()),this.snapshotInProgressMap.set(n,!0);try{if(void 0===this.options.samplingManual&&!1!==this.options.clearWebGLBuffer&&["webgl","webgl2"].includes(e.__context)){const n=e.getContext(e.__context);!1===(null===(t=null==n?void 0:n.getContextAttributes())||void 0===t?void 0:t.preserveDrawingBuffer)&&(null==n||n.clear(null==n?void 0:n.COLOR_BUFFER_BIT),this.debug(e,"cleared webgl canvas to load it into memory",{attributes:null==n?void 0:n.getContextAttributes()}))}if(0===e.width||0===e.height)return void this.debug(e,"not yet ready",{width:e.width,height:e.height});let i=this.options.resizeFactor||1;if(this.options.maxSnapshotDimension){const t=Math.max(e.width,e.height);i=Math.min(i,this.options.maxSnapshotDimension/t)}const o=e.width*i,s=e.height*i,r=yield createImageBitmap(e,{resizeWidth:o,resizeHeight:s});this.debug(e,"created image bitmap",{width:r.width,height:r.height}),this.worker.postMessage({id:n,bitmap:r,width:o,height:s,dx:0,dy:0,dw:e.width,dh:e.height,dataURLOptions:this.options.dataURLOptions,logDebug:!!this.logger},[r]),this.debug(e,"sent message")}catch(s){this.debug(e,"failed to snapshot",s)}finally{this.snapshotInProgressMap.set(n,!1)}}}));const{sampling:t,win:n,blockClass:i,blockSelector:o,recordCanvas:s,recordVideos:r,initialSnapshotDelay:l,dataURLOptions:a}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,this.logger=e.logger,this.worker=new ut,this.worker.onmessage=e=>{const{id:t}=e.data;if(this.snapshotInProgressMap.set(t,!1),!("base64"in e.data))return void this.debug(null,"canvas worker received empty message",{data:e.data,status:e.data.status});const{base64:n,type:i,dx:o,dy:s,dw:r,dh:l}=e.data;this.mutationCb({id:t,type:Ge["2D"],commands:[{property:"clearRect",args:[o,s,r,l]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:n}],type:i}]},o,s,r,l]}]})},this.options=e,s&&"all"===t?(this.debug(null,"initializing canvas mutation observer",{sampling:t}),this.initCanvasMutationObserver(n,i,o)):s&&"number"==typeof t&&(this.debug(null,"initializing canvas fps observer",{sampling:t}),this.initCanvasFPSObserver(r,t,n,i,o,{initialSnapshotDelay:l,dataURLOptions:a},e.resizeFactor,e.maxSnapshotDimension))}debug(e,...t){if(!this.logger)return;const n=this.mirror.getId(e);let i="[highlight-canvas-manager]";e&&(i=`[highlight-canvas] [id:${n}]`,"canvas"===e.tagName.toLowerCase()&&(i+=` [ctx:${e.__context}]`)),this.logger.debug(i,e,...t)}initCanvasFPSObserver(e,t,n,i,o,s,r,l){const a=ot(n,i,o),c=1e3/t;let d,u=0;const p=new Map,h=e=>{const t=[];return n.document.querySelectorAll("canvas").forEach((n=>{if(!le(n,i,o,!0)){this.debug(n,"discovered canvas"),t.push(n);const i=this.mirror.getId(n);p.has(i)||p.set(i,e)}})),t},m=t=>{const s=[];return e&&n.document.querySelectorAll("video").forEach((e=>{if((""===e.src||-1!==e.src.indexOf("blob:"))&&!le(e,i,o,!0)){s.push(e);const n=this.mirror.getId(e);p.has(n)||p.set(n,t)}})),s},Z=e=>b(this,void 0,void 0,(function*(){if(u&&e-u<c)return void(d=requestAnimationFrame(Z));u=e;const t=t=>{const n=this.mirror.getId(t),i=p.get(n),o=!s.initialSnapshotDelay||e-i>s.initialSnapshotDelay;return this.debug(t,{delay:s.initialSnapshotDelay,delta:e-i,hadLoadingTime:o}),o},n=[];n.push(...h(e).filter(t).map(this.snapshot)),n.push(...m(e).filter(t).map((e=>b(this,void 0,void 0,(function*(){this.debug(e,"starting video snapshotting");const t=this.mirror.getId(e);if(this.snapshotInProgressMap.get(t))this.debug(e,"video snapshotting already in progress for",t);else{this.snapshotInProgressMap.set(t,!0);try{const{width:n,height:i}=e.getBoundingClientRect(),{actualWidth:o,actualHeight:a}={actualWidth:e.videoWidth,actualHeight:e.videoHeight},c=Math.max(o,a);let d=r||1;l&&(d=Math.min(d,l/c));const u=o*d,p=a*d,h=yield createImageBitmap(e,{resizeWidth:u,resizeHeight:p});let m=Math.max(n,i)/c;const b=o*m,Z=a*m,g=(n-b)/2,y=(i-Z)/2;this.debug(e,"created image bitmap",{actualWidth:o,actualHeight:a,boxWidth:n,boxHeight:i,outputWidth:b,outputHeight:Z,resizeWidth:u,resizeHeight:p,scale:d,outputScale:m,offsetX:g,offsetY:y}),this.worker.postMessage({id:t,bitmap:h,width:u,height:p,dx:g,dy:y,dw:b,dh:Z,dataURLOptions:s.dataURLOptions,logDebug:!!this.logger},[h]),this.debug(e,"send message")}catch(n){this.debug(e,"failed to snapshot",n)}finally{this.snapshotInProgressMap.set(t,!1)}}}))))),yield Promise.all(n).catch(console.error),d=requestAnimationFrame(Z)}));d=requestAnimationFrame(Z),this.resetObservers=()=>{a(),d&&cancelAnimationFrame(d)}}initCanvasMutationObserver(e,t,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const i=ot(e,t,n),o=function(e,t,n,i){const o=[],s=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const l of s)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[l])continue;const s=ie(t.CanvasRenderingContext2D.prototype,l,(function(o){return function(...s){return le(this.canvas,n,i,!0)||setTimeout((()=>{const n=nt([...s],t,this);e(this.canvas,{type:Ge["2D"],property:l,args:n})}),0),o.apply(this,s)}}));o.push(s)}catch(r){const n=ne(t.CanvasRenderingContext2D.prototype,l,{set(t){e(this.canvas,{type:Ge["2D"],property:l,args:[t],setter:!0})}});o.push(n)}return()=>{o.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n),s=function(e,t,n,i,o){const s=[];return s.push(...st(t.WebGLRenderingContext.prototype,Ge.WebGL,e,n,i,0,t)),void 0!==t.WebGL2RenderingContext&&s.push(...st(t.WebGL2RenderingContext.prototype,Ge.WebGL2,e,n,i,0,t)),()=>{s.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,this.mirror);this.resetObservers=()=>{i(),o(),s()}}startPendingCanvasMutationFlusher(){requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,requestAnimationFrame(e)};requestAnimationFrame(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((e,t)=>{const n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)})),requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||-1===t)return;const i=n.map((e=>function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(e,["type"]))),{type:o}=n[0];this.mutationCb({id:t,type:o,commands:i}),this.pendingCanvasMutations.delete(e)}}class ht{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new me,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},i=[];for(const o of e){let e;if(this.styleMirror.has(o))e=this.styleMirror.getId(o);else{e=this.styleMirror.add(o);const t=Array.from(o.rules||CSSRule);i.push({styleId:e,rules:t.map(((e,t)=>({rule:I(e),index:t})))})}n.styleIds.push(e)}i.length>0&&(n.styles=i),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class mt{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){requestAnimationFrame((()=>{this.clear(),this.loop&&this.periodicallyClear()}))}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some((e=>e!==t))}add(e,t){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}function bt(e){return Object.assign(Object.assign({},e),{timestamp:Date.now()})}let Zt,gt,yt,It=!1;const ft=new f;function Gt(e={}){var t,n,i,o,s,r,l,a;const{emit:c,checkoutEveryNms:d,checkoutEveryNth:u,blockClass:p="highlight-block",blockSelector:h=null,ignoreClass:m="highlight-ignore",maskTextClass:b="highlight-mask",maskTextSelector:Z=null,inlineStylesheet:g=!0,maskAllInputs:y,maskInputOptions:I,slimDOMOptions:G,maskInputFn:V,maskTextFn:S=X,hooks:W,packFn:R,sampling:v={},mousemoveWait:C,recordCanvas:k=!1,recordCrossOriginIframes:N=!1,recordAfter:L=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:w=!1,collectFonts:T=!1,inlineImages:x=!1,plugins:J,keepIframeSrcFn:Y=(()=>!1),privacySetting:U="default",ignoreCSSAttributes:F=new Set([]),errorHandler:K,logger:H}=e,E=Object.assign(Object.assign({},e.dataURLOptions),null===(n=null===(t=e.sampling)||void 0===t?void 0:t.canvas)||void 0===n?void 0:n.dataURLOptions);Le=K;const O=!N||window.parent===window;let z=!1;if(!O)try{window.parent.document&&(z=!1)}catch(le){z=!0}if(O&&!c)throw new Error("emit function is required");void 0!==C&&void 0===v.mousemove&&(v.mousemove=C),ft.reset();const M=!0===y?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==I?I:{password:!0},A=!0===G||"all"===G?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===G,headMetaDescKeywords:"all"===G}:G||{};let B;!function(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}();let P=0;const D=e=>{for(const t of J||[])t.eventProcessor&&(e=t.eventProcessor(e));return R&&!z&&(e=R(e)),e};Zt=(e,t)=>{var n;if(!(null===(n=Te[0])||void 0===n?void 0:n.isFrozen())||e.type===ye.FullSnapshot||e.type===ye.IncrementalSnapshot&&e.data.source===Ie.Mutation||Te.forEach((e=>e.unfreeze())),O)null==c||c(D(e),t);else if(z){const n={type:"rrweb",event:D(e),origin:window.location.origin,isCheckout:t};window.parent.postMessage(n,"*")}if(e.type===ye.FullSnapshot)B=e,P=0;else if(e.type===ye.IncrementalSnapshot){if(e.data.source===Ie.Mutation&&e.data.isAttachIframe)return;P++;const t=u&&P>=u,n=d&&e.timestamp-B.timestamp>d;(t||n)&&gt(!0)}};const Q=e=>{Zt(bt({type:ye.IncrementalSnapshot,data:Object.assign({source:Ie.Mutation},e)}))},j=e=>Zt(bt({type:ye.IncrementalSnapshot,data:Object.assign({source:Ie.Scroll},e)})),$=e=>Zt(bt({type:ye.IncrementalSnapshot,data:Object.assign({source:Ie.CanvasMutation},e)})),ee=new ht({mutationCb:Q,adoptedStyleSheetCb:e=>Zt(bt({type:ye.IncrementalSnapshot,data:Object.assign({source:Ie.AdoptedStyleSheet},e)}))}),te=new De({mirror:ft,mutationCb:Q,stylesheetManager:ee,recordCrossOriginIframes:N,wrappedEmit:Zt});for(const f of J||[])f.getMirror&&f.getMirror({nodeMirror:ft,crossOriginIframeMirror:te.crossOriginIframeMirror,crossOriginIframeStyleMirror:te.crossOriginIframeStyleMirror});const ne=new mt;yt=new pt({recordCanvas:k,recordVideos:x,mutationCb:$,win:window,blockClass:p,blockSelector:h,mirror:ft,sampling:null===(i=null==v?void 0:v.canvas)||void 0===i?void 0:i.fps,samplingManual:null===(o=null==v?void 0:v.canvas)||void 0===o?void 0:o.fpsManual,clearWebGLBuffer:null===(s=null==v?void 0:v.canvas)||void 0===s?void 0:s.clearWebGLBuffer,initialSnapshotDelay:null===(r=null==v?void 0:v.canvas)||void 0===r?void 0:r.initialSnapshotDelay,dataURLOptions:E,resizeFactor:null===(l=null==v?void 0:v.canvas)||void 0===l?void 0:l.resizeFactor,maxSnapshotDimension:null===(a=null==v?void 0:v.canvas)||void 0===a?void 0:a.maxSnapshotDimension,logger:H});const ie=new Qe({mutationCb:Q,scrollCb:j,bypassOptions:{blockClass:p,blockSelector:h,maskTextClass:b,maskTextSelector:Z,inlineStylesheet:g,maskInputOptions:M,dataURLOptions:E,maskTextFn:S,maskInputFn:V,recordCanvas:k,inlineImages:x,privacySetting:U,sampling:v,slimDOMOptions:A,iframeManager:te,stylesheetManager:ee,canvasManager:yt,keepIframeSrcFn:Y,processedNodeManager:ne},mirror:ft});gt=(e=!1)=>{Zt(bt({type:ye.Meta,data:{href:window.location.href,width:re(),height:se()}}),e),ee.reset(),ie.init(),Te.forEach((e=>e.lock()));const t=function(e,t){var n=t||{},i=n.mirror,o=void 0===i?new f:i,s=n.blockClass,r=void 0===s?"highlight-block":s,l=n.blockSelector,a=void 0===l?null:l,c=n.maskTextClass,d=void 0===c?"highlight-mask":c,u=n.maskTextSelector,p=void 0===u?null:u,h=n.inlineStylesheet,m=void 0===h||h,b=n.inlineImages,Z=void 0!==b&&b,g=n.recordCanvas,y=void 0!==g&&g,I=n.maskAllInputs,G=void 0!==I&&I,V=n.maskTextFn,X=n.maskInputFn,S=n.slimDOM,W=void 0!==S&&S,R=n.dataURLOptions,v=n.preserveWhiteSpace,C=n.onSerialize,k=n.onIframeLoad,N=n.iframeLoadTimeout,L=n.onStylesheetLoad,w=n.stylesheetLoadTimeout,T=n.keepIframeSrcFn,x=void 0===T?function(){return!1}:T,J=n.privacySetting;return _(e,{doc:e,mirror:o,blockClass:r,blockSelector:a,maskTextClass:d,maskTextSelector:p,skipChild:!1,inlineStylesheet:m,maskInputOptions:!0===G?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===G?{password:!0}:G,maskTextFn:V,maskInputFn:X,slimDOMOptions:W||"all"===W?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===W,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:W||{},dataURLOptions:R,inlineImages:Z,recordCanvas:y,preserveWhiteSpace:v,onSerialize:C,onIframeLoad:k,iframeLoadTimeout:N,onStylesheetLoad:L,stylesheetLoadTimeout:w,keepIframeSrcFn:x,newlyAddedElement:!1,privacySetting:void 0===J?"default":J})}(document,{mirror:ft,blockClass:p,blockSelector:h,maskTextClass:b,maskTextSelector:Z,inlineStylesheet:g,maskAllInputs:M,maskTextFn:S,slimDOM:A,dataURLOptions:E,recordCanvas:k,inlineImages:x,privacySetting:U,onSerialize:e=>{ue(e,ft)&&te.addIframe(e),pe(e,ft)&&ee.trackLinkElement(e),he(e)&&ie.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{te.attachIframe(e,t),ie.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{ee.attachLinkElement(e,t)},keepIframeSrcFn:Y});if(!t)return console.warn("Failed to snapshot the document");Zt(bt({type:ye.FullSnapshot,data:{node:t,initialOffset:oe(window)}}),e),Te.forEach((e=>e.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&ee.adoptStyleSheets(document.adoptedStyleSheets,ft.getId(document))};try{const e=[],t=e=>{var t;return we(Me)({mutationCb:Q,mousemoveCb:(e,t)=>Zt(bt({type:ye.IncrementalSnapshot,data:{source:t,positions:e}})),mouseInteractionCb:e=>Zt(bt({type:ye.IncrementalSnapshot,data:Object.assign({source:Ie.MouseInteraction},e)})),scrollCb:j,viewportResizeCb:e=>Zt(bt({type:ye.IncrementalSnapshot,data:Object.assign({source:Ie.ViewportResize},e)})),inputCb:e=>Zt(bt({type:ye.IncrementalSnapshot,data:Object.assign({source:Ie.Input},e)})),mediaInteractionCb:e=>Zt(bt({type:ye.IncrementalSnapshot,data:Object.assign({source:Ie.MediaInteraction},e)})),styleSheetRuleCb:e=>Zt(bt({type:ye.IncrementalSnapshot,data:Object.assign({source:Ie.StyleSheetRule},e)})),styleDeclarationCb:e=>Zt(bt({type:ye.IncrementalSnapshot,data:Object.assign({source:Ie.StyleDeclaration},e)})),canvasMutationCb:$,fontCb:e=>Zt(bt({type:ye.IncrementalSnapshot,data:Object.assign({source:Ie.Font},e)})),selectionCb:e=>{Zt(bt({type:ye.IncrementalSnapshot,data:Object.assign({source:Ie.Selection},e)}))},blockClass:p,ignoreClass:m,maskTextClass:b,maskTextSelector:Z,maskInputOptions:M,inlineStylesheet:g,sampling:v,recordCanvas:k,inlineImages:x,userTriggeredOnInput:w,collectFonts:T,doc:e,maskInputFn:V,maskTextFn:S,keepIframeSrcFn:Y,blockSelector:h,slimDOMOptions:A,dataURLOptions:E,mirror:ft,iframeManager:te,stylesheetManager:ee,shadowDomManager:ie,processedNodeManager:ne,canvasManager:yt,ignoreCSSAttributes:F,privacySetting:U,plugins:(null===(t=null==J?void 0:J.filter((e=>e.observer)))||void 0===t?void 0:t.map((e=>({observer:e.observer,options:e.options,callback:t=>Zt(bt({type:ye.Plugin,data:{plugin:e.name,payload:t}}))}))))||[]},W)};te.addLoadListener((n=>{try{e.push(t(n.contentDocument))}catch(i){console.warn(i)}}));const n=()=>{gt(),e.push(t(document)),It=!0};return"interactive"===document.readyState||"complete"===document.readyState?n():(e.push(q("DOMContentLoaded",(()=>{Zt(bt({type:ye.DomContentLoaded,data:{}})),"DOMContentLoaded"===L&&n()}))),e.push(q("load",(()=>{Zt(bt({type:ye.Load,data:{}})),"load"===L&&n()}),window))),()=>{e.forEach((e=>e())),ne.destroy(),It=!1,Le=void 0}}catch(ae){console.warn(ae)}}Gt.addCustomEvent=(e,t)=>{It&&Zt(bt({type:ye.Custom,data:{tag:e,payload:t}}))},Gt.freezePage=()=>{Te.forEach((e=>e.freeze()))},Gt.takeFullSnapshot=e=>{if(!It)throw new Error("please take full snapshot after start recording");gt(e)},Gt.snapshotCanvas=e=>b(void 0,void 0,void 0,(function*(){if(!yt)throw new Error("canvas manager is not initialized");yield yt.snapshot(e)})),Gt.mirror=ft;const{addCustomEvent:Vt}=Gt,Xt={key:"_sid"},St=e=>{const t=e?Object.assign({},Xt,e):Xt;let n=0;return{name:"rrweb/sequential-id@1",eventProcessor:e=>(Object.assign(e,{[t.key]:++n}),e),options:t}};function Wt(e){if(!e||!e.outerHTML)return"";let t="";for(;e.parentElement;){let n=e.localName;if(!n)break;n=n.toLowerCase();let i=e.parentElement,o=[];if(i.children&&i.children.length>0)for(let e=0;e<i.children.length;e++){let t=i.children[e];t.localName&&t.localName.toLowerCase&&t.localName.toLowerCase()===n&&o.push(t)}o.length>1&&(n+=":eq("+o.indexOf(e)+")"),t=n+(t?">"+t:""),e=i}return t}function Rt(e){return"[object Object]"===Object.prototype.toString.call(e)}function vt(e,t){if(0===t)return!0;const n=Object.keys(e);for(const i of n)if(Rt(e[i])&&vt(e[i],t-1))return!0;return!1}function Ct(e,t){const n={numOfKeysLimit:50,depthOfLimit:4};Object.assign(n,t);const i=[],o=[];return JSON.stringify(e,(function(e,t){if(i.length>0){const n=i.indexOf(this);~n?i.splice(n+1):i.push(this),~n?o.splice(n,1/0,e):o.push(e),~i.indexOf(t)&&(t=i[0]===t?"[Circular ~]":"[Circular ~."+o.slice(0,i.indexOf(t)).join(".")+"]")}else i.push(t);if(null==t)return t;if(function(e){if(Rt(e)&&Object.keys(e).length>n.numOfKeysLimit)return!0;if("function"==typeof e)return!0;if(e instanceof Event&&!1===e.isTrusted){return 1===Object.keys(e).length}if(Rt(e)&&vt(e,n.depthOfLimit))return!0;return!1}(t))return function(e){let t=e.toString();n.stringLengthLimit&&t.length>n.stringLengthLimit&&(t=`${t.slice(0,n.stringLengthLimit)}...`);return t}(t);if(t instanceof Event){const e={};for(const n in t){const i=t[n];Array.isArray(i)?e[n]=Wt(i.length?i[0]:null):e[n]=i}return e}return t instanceof Node?t instanceof HTMLElement?t?t.outerHTML:"":t.nodeName:t instanceof Error?t.name+": "+t.message:t}))}var kt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Nt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Lt(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var i=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,i.get?i:{enumerable:!0,get:function(){return e[t]}})})),n}var wt,Tt,xt,Jt,Yt,Ut={exports:{}},Ft={exports:{}};function Kt(){return wt||(wt=1,Ft.exports=function(){function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e){return e.charAt(0).toUpperCase()+e.substring(1)}function n(e){return function(){return this[e]}}var i=["isConstructor","isEval","isNative","isToplevel"],o=["columnNumber","lineNumber"],s=["fileName","functionName","source"],r=["args"],l=["evalOrigin"],a=i.concat(o,s,r,l);function c(e){if(e)for(var n=0;n<a.length;n++)void 0!==e[a[n]]&&this["set"+t(a[n])](e[a[n]])}c.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof c)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new c(e)}},toString:function(){var e=this.getFileName()||"",t=this.getLineNumber()||"",n=this.getColumnNumber()||"",i=this.getFunctionName()||"";return this.getIsEval()?e?"[eval] ("+e+":"+t+":"+n+")":"[eval]:"+t+":"+n:i?i+" ("+e+":"+t+":"+n+")":e+":"+t+":"+n}},c.fromString=function(e){var t=e.indexOf("("),n=e.lastIndexOf(")"),i=e.substring(0,t),o=e.substring(t+1,n).split(","),s=e.substring(n+1);if(0===s.indexOf("@"))var r=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(s,""),l=r[1],a=r[2],d=r[3];return new c({functionName:i,args:o||void 0,fileName:l,lineNumber:a||void 0,columnNumber:d||void 0})};for(var d=0;d<i.length;d++)c.prototype["get"+t(i[d])]=n(i[d]),c.prototype["set"+t(i[d])]=function(e){return function(t){this[e]=Boolean(t)}}(i[d]);for(var u=0;u<o.length;u++)c.prototype["get"+t(o[u])]=n(o[u]),c.prototype["set"+t(o[u])]=function(t){return function(n){if(!e(n))throw new TypeError(t+" must be a Number");this[t]=Number(n)}}(o[u]);for(var p=0;p<s.length;p++)c.prototype["get"+t(s[p])]=n(s[p]),c.prototype["set"+t(s[p])]=function(e){return function(t){this[e]=String(t)}}(s[p]);return c}()),Ft.exports}Ut.exports=(Tt=Kt(),xt=/(^|@)\S+:\d+/,Jt=/^\s*at .*(\S+:\d+|\(native\))/m,Yt=/^(eval@)?(\[native code])?$/,{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(Jt))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(e){return e.stack.split("\n").filter((function(e){return!!e.match(Jt)}),this).map((function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var t=e.replace(/^\s+/,"").replace(/\(eval code/g,"("),n=t.match(/ (\((.+):(\d+):(\d+)\)$)/),i=(t=n?t.replace(n[0],""):t).split(/\s+/).slice(1),o=this.extractLocation(n?n[1]:i.pop()),s=i.join(" ")||void 0,r=["eval","<anonymous>"].indexOf(o[0])>-1?void 0:o[0];return new Tt({functionName:s,fileName:r,lineNumber:o[1],columnNumber:o[2],source:e})}),this)},parseFFOrSafari:function(e){return e.stack.split("\n").filter((function(e){return!e.match(Yt)}),this).map((function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return new Tt({functionName:e});var t=/((.*".+"[^@]*)?[^@]*)(?:@)/,n=e.match(t),i=n&&n[1]?n[1]:void 0,o=this.extractLocation(e.replace(t,""));return new Tt({functionName:i,fileName:o[0],lineNumber:o[1],columnNumber:o[2],source:e})}),this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)/i,n=e.message.split("\n"),i=[],o=2,s=n.length;o<s;o+=2){var r=t.exec(n[o]);r&&i.push(new Tt({fileName:r[2],lineNumber:r[1],source:n[o]}))}return i},parseOpera10:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=e.stacktrace.split("\n"),i=[],o=0,s=n.length;o<s;o+=2){var r=t.exec(n[o]);r&&i.push(new Tt({functionName:r[3]||void 0,fileName:r[2],lineNumber:r[1],source:n[o]}))}return i},parseOpera11:function(e){return e.stack.split("\n").filter((function(e){return!!e.match(xt)&&!e.match(/^Error created at/)}),this).map((function(e){var t,n=e.split("@"),i=this.extractLocation(n.pop()),o=n.shift()||"",s=o.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;o.match(/\(([^)]*)\)/)&&(t=o.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var r=void 0===t||"[arguments not available]"===t?void 0:t.split(",");return new Tt({functionName:s,args:r,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:e})}),this)}});var Ht=Ut.exports;const Et=Nt(Ht);function Ot(e,t){const n=t.logger;if(!n)return()=>{};let i;i="string"==typeof n?window[n]:n;const o=[];if(t.level.includes("error")&&window){const n=n=>{const{message:i,error:o}=n;let s=[];o&&(s=Et.parse(o));const r=[Ct(i,t.stringifyOptions)];e({type:"Error",trace:s,time:Date.now(),value:r})};window.addEventListener("error",n),o.push((()=>{window&&window.removeEventListener("error",n)}))}for(const r of t.level)o.push(s(i,r));return()=>{o.forEach((e=>e()))};function s(n,i){return n[i]?function(e,t,n){try{if(!(t in e))return()=>{};const i=e[t],o=n(i);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:i}})),e[t]=o,()=>{e[t]=i}}catch(i){return()=>{}}}(n,i,(n=>(...o)=>{n.apply(this,o);try{const n=Et.parse(new Error),s=o.map((e=>Ct(e,t.stringifyOptions)));e({type:i,trace:n.slice(1),value:s,time:Date.now()})}catch(s){n("highlight logger error:",s,...o)}})):()=>{}}}var zt={exports:{}};!function(e,t){function n(e,t){var n=[],i=[];return null==t&&(t=function(e,t){return n[0]===t?"[Circular ~]":"[Circular ~."+i.slice(0,n.indexOf(t)).join(".")+"]"}),function(o,s){if(n.length>0){var r=n.indexOf(this);~r?n.splice(r+1):n.push(this),~r?i.splice(r,1/0,o):i.push(o),~n.indexOf(s)&&(s=t.call(this,o,s))}else n.push(s);return null==e?s:e.call(this,o,s)}}(e.exports=function(e,t,i,o){return JSON.stringify(e,n(t,o),i)}).getSerialize=n}(zt);const Mt=Nt(zt.exports);function At(e,t,n,i){var o,s,r,l;const a=Et.parse(i);t instanceof Error&&(t=t.message);const c=Pt(a);e({event:Mt(t),type:"window.onerror",url:window.location.href,source:null!=n?n:"",lineNumber:(null==(o=c[0])?void 0:o.lineNumber)?null==(s=c[0])?void 0:s.lineNumber:0,columnNumber:(null==(r=c[0])?void 0:r.columnNumber)?null==(l=c[0])?void 0:l.columnNumber:0,stackTrace:c,timestamp:(new Date).toISOString()})}const Bt=e=>{if("undefined"==typeof window)return()=>{};const t=window.onerror=(t,n,i,o,s)=>{At(e,t,n,null!=s?s:Error())},n=window.onunhandledrejection=t=>{var n;if(t.reason){const i=t.promise;i.getStack?At(e,t.reason,t.type,null!=(n=i.getStack())?n:Error()):At(e,t.reason,t.type,Error())}},i=window.Promise.constructor;return window.Promise.constructor=function(e){this.promiseCreationError=new Error,i(e)},window.Promise.prototype.getStack=function(){return this.promiseCreationError},()=>{window.Promise.constructor=i,window.onunhandledrejection=n,window.onerror=t}},Pt=e=>{var t;if(0===e.length)return e;const n=e[0];return"console.error"===n.functionName&&(null==(t=n.fileName)?void 0:t.includes("highlight.run"))||"new HighlightPromise"===n.functionName?e.slice(1):e},Dt=["assert","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"];var Qt=(e=>(e.DeviceMemory="DeviceMemory",e.ViewportHeight="ViewportHeight",e.ViewportWidth="ViewportWidth",e.ViewportArea="ViewportArea",e))(Qt||{}),jt=(e=>(e.Device="Device",e.WebVital="WebVital",e.Frontend="Frontend",e.Backend="Backend",e))(jt||{});const _t=['["\\"Script error.\\""]','"Script error."','["\\"Load failed.\\""]','"Load failed."','["\\"Network request failed.\\""]','"Network request failed."','["\\"Document is not focused.\\""]','"Document is not focused."','["\\"Failed to fetch\\""]','"Failed to fetch"','[{"isTrusted":true}]','{"isTrusted":true}','["{}"]','"{}"','[""]','""','["\\"\\""]','""'],qt=["websocket error",'\\"ResizeObserver loop'],$t=(e,t,n)=>{const i=en(t,e.headers,n);return u(d({},e),{headers:i})},en=(e,t,n)=>{var i,o;const s=d({},t);return n?(null==(i=Object.keys(s))||i.forEach((e=>{[...n].includes(null==e?void 0:e.toLowerCase())||(s[e]="[REDACTED]")})),s):(null==(o=Object.keys(s))||o.forEach((t=>{[...tn,...e].includes(null==t?void 0:t.toLowerCase())&&(s[t]="[REDACTED]")})),s)},tn=["authorization","cookie","proxy-authorization","token"],nn=["https://www.googleapis.com/identitytoolkit","https://securetoken.googleapis.com"],on="X-Highlight-Request",sn=e=>{let t=e;return e.startsWith("https://")||e.startsWith("http://")||(t=`${window.location.origin}${t}`),t.replace(/\/+$/,"")},rn=(e,t,n,i)=>{e.sort(((e,t)=>e.responseEnd-t.responseEnd));const o=e.reduce(((e,t)=>{const i=sn(t.name);return t.initiatorType===n?e[n][i]=[...e[n][i]||[],t]:e.others[i]=[...e.others[i]||[],t],e}),{xmlhttprequest:{},others:{},fetch:{}});let s={};s=t.reduce(((e,t)=>{const n=sn(t.request.url);return e[n]=[...e[n]||[],t],e}),s);for(let l in o[n]){const e=o[n][l],t=s[l];if(!t)continue;const i=Math.max(e.length-t.length,0);for(let n=i;n<e.length;n++)e[n]&&(e[n].requestResponsePair=t[n-i])}let r=[];for(let l in o)for(let e in o[l])r=r.concat(o[l][e]);return r.sort(((e,t)=>e.fetchStart-t.fetchStart)).reduce(((e,t)=>{let n=t.requestResponsePair;return n&&(n=((e,{headersToRedact:t,headersToRecord:n,requestResponseSanitizer:i})=>{let o=e;if(i){try{o=i(o)}catch(c){}if(!o)return null}const s=o,{request:r,response:l}=s,a=p(s,["request","response"]);return d({request:$t(r,t,n),response:$t(l,t,n)},a)})(t.requestResponsePair,i),!n)||(t.toJSON=function(){return{initiatorType:this.initiatorType,startTime:this.startTime,responseEnd:this.responseEnd,startTimeAbs:window.performance.timeOrigin+this.startTime,responseEndAbs:window.performance.timeOrigin+this.responseEnd,name:this.name,transferSize:this.transferSize,encodedBodySize:this.encodedBodySize,requestResponsePairs:n}},e.push(t)),e}),[])},ln=(e,t,n)=>{return o=t,!((i=e).toLocaleLowerCase().includes("https://pub.highlight.run")||i.toLocaleLowerCase().includes("highlight.run")||i.toLocaleLowerCase().includes(o))||an(e,n);var i,o},an=(e,t)=>{var n;let i=[];!0===t?(i=["localhost",/^\//],(null==(n=null==window?void 0:window.location)?void 0:n.host)&&i.push(window.location.host)):t instanceof Array&&(i=t);let o=!1;return i.forEach((t=>{e.match(t)&&(o=!0)})),o};const cn=()=>function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=n.length,o=0;o<e;o++)t+=n.charAt(Math.floor(Math.random()*i));return t}(10),dn=(e,t)=>e+"/"+t,un=(e,t,n,i,o,s,r)=>{const l=XMLHttpRequest.prototype,a=l.open,c=l.send,d=l.setRequestHeader;return l.open=function(e,t){return this._method=e,this._url=t,this._requestHeaders={},this._shouldRecordHeaderAndBody=!i.some((e=>t.toLowerCase().includes(e))),a.apply(this,arguments)},l.setRequestHeader=function(e,t){return this._requestHeaders[e]=t,d.apply(this,arguments)},l.send=function(i){if(!ln(this._url,t,n))return c.apply(this,arguments);const l=cn();an(this._url,n)&&this.setRequestHeader(on,dn(o,l));const a=this._shouldRecordHeaderAndBody,d={id:l,url:this._url,verb:this._method,headers:a?this._requestHeaders:{},body:void 0};if(a&&i){const e=pn(i,d.url);e&&(d.body=mn(e,s,r,d.headers))}return this.addEventListener("load",(function(){return m(this,null,(function*(){const t={status:this.status,headers:{},body:void 0};if(a){const e=this.getAllResponseHeaders().trim().split(/[\r\n]+/),o={};if(e.forEach((function(e){const t=e.split(": "),n=t.shift();o[n]=t.join(": ")})),t.headers=o,i){const e=pn(i,d.url);e&&(d.body=mn(e,s,r,t.headers))}if(""===this.responseType||"text"===this.responseType)t.body=mn(this.responseText,s,r,t.headers),t.size=8*this.responseText.length;else if("blob"===this.responseType){if(this.response instanceof Blob)try{const e=yield this.response.text();t.body=mn(e,s,r,t.headers),t.size=this.response.size}catch(n){}}else try{t.body=mn(this.response,s,r,t.headers)}catch(n){}}e({request:d,response:t,urlBlocked:!a})}))})),this.addEventListener("error",(function(){return m(this,null,(function*(){const t={status:this.status,headers:void 0,body:void 0};e({request:d,response:t,urlBlocked:!1})}))})),c.apply(this,arguments)},()=>{l.open=a,l.send=c,l.setRequestHeader=d}},pn=(e,t)=>{if("string"==typeof e){if(!(null==t?void 0:t.includes("localhost"))&&!(null==t?void 0:t.includes("highlight.run"))||!e.includes("pushPayload"))return e}else if("object"==typeof e||"number"==typeof e||"boolean"==typeof e)return e.toString();return null},hn={"application/json":67108864,"text/plain":67108864},mn=(e,t,n,i)=>{var o,s,r;let l=65536;if(i){let e="";e="function"==typeof i.get?null!=(o=i.get("content-type"))?o:"":null!=(s=i["content-type"])?s:"";try{e=e.split(";")[0]}catch(a){}l=null!=(r=hn[e])?r:65536}if(e){if(t)try{const n=JSON.parse(e);Object.keys(n).forEach((e=>{t.includes(e.toLocaleLowerCase())&&(n[e]="[REDACTED]")})),e=JSON.stringify(n)}catch(a){}if(n)try{const t=JSON.parse(e);Object.keys(t).forEach((e=>{n.includes(e.toLocaleLowerCase())||(t[e]="[REDACTED]")})),e=JSON.stringify(t)}catch(a){}}try{e=e.slice(0,l)}catch(a){}return e},bn=(e,t,n,i,o,s,r)=>{const l=window._fetchProxy;return window._fetchProxy=function(a,c){const{method:d,url:u}=Zn(a,c);if(!ln(u,t,n))return l.call(this,a,c);const p=cn();if(an(u,n)){c=c||{};let e=new Headers(c.headers);a instanceof Request&&[...a.headers].forEach((([t,n])=>e.set(t,n))),e.set(on,dn(o,p)),c.headers=Object.fromEntries(e.entries())}const h={id:p,headers:{},body:void 0,url:u,verb:d},m=!i.some((e=>u.toLowerCase().includes(e)));m&&(h.headers=Object.fromEntries(new Headers(null==c?void 0:c.headers).entries()),h.body=mn(null==c?void 0:c.body,s,r,null==c?void 0:c.headers));let b=l.call(this,a,c);return gn(b,h,e,m,s,r),b},()=>{window._fetchProxy=l}},Zn=(e,t)=>{const n=t&&t.method||"object"==typeof e&&"method"in e&&e.method||"GET";let i;return i="object"==typeof e?"url"in e&&e.url?e.url:e.toString():e,{method:n,url:i}},gn=(e,t,n,i,o,s)=>{e.then((e=>m(this,null,(function*(){let r={body:void 0,headers:void 0,status:0,size:0},l=!1;if("stack"in e||e instanceof Error)r=u(d({},r),{body:e.message,status:0,size:void 0}),l=!0;else if("status"in e){if(r=u(d({},r),{status:e.status}),i){let t;try{const n=e.clone().body;if(n){let i,r=n.getReader(),l=new TextDecoder,a="";for(;!(i=yield r.read()).done;){let e=i.value;a+=l.decode(e)}t=a,t=mn(t,o,s,e.headers)}else t=""}catch(a){t=`Unable to clone response: ${a}`}r.body=t,r.headers=Object.fromEntries(e.headers.entries()),r.size=8*t.length}l=!0}if(l){n({request:t,response:r,urlBlocked:!i})}})))).catch((()=>{}))},yn=({xhrCallback:e,fetchCallback:t,webSocketRequestCallback:n,webSocketEventCallback:i,disableWebSocketRecording:o,bodyKeysToRedact:s,backendUrl:r,tracingOrigins:l,urlBlocklist:a,sessionSecureID:c,bodyKeysToRecord:d})=>{const u=un(e,r,l,a,c,s,d),h=bn(t,r,l,a,c,s,d),m=o?()=>{}:((e,t,n)=>{const i=window._highlightWebSocketRequestCallback;window._highlightWebSocketRequestCallback=e;const o=window._highlightWebSocketEventCallback;return window._highlightWebSocketEventCallback=e=>{const i=e,{message:o,size:s}=i,r=p(i,["message","size"]),l=n.some((t=>e.name.toLowerCase().includes(t)));t(l?r:e)},()=>{window._highlightWebSocketRequestCallback=i,window._highlightWebSocketEventCallback=o}})(n,i,a);return()=>{u(),h(),m()}};class In{constructor(e){var t;h(this,"disableConsoleRecording"),h(this,"reportConsoleErrors"),h(this,"consoleMethodsToRecord"),h(this,"listeners"),h(this,"errors"),h(this,"messages"),h(this,"options"),h(this,"hasNetworkRecording",!0),h(this,"_backendUrl"),h(this,"disableNetworkRecording"),h(this,"enableRecordingNetworkContents"),h(this,"xhrNetworkContents"),h(this,"fetchNetworkContents"),h(this,"disableRecordingWebSocketContents"),h(this,"webSocketNetworkContents"),h(this,"webSocketEventContents"),h(this,"tracingOrigins"),h(this,"networkHeadersToRedact"),h(this,"networkBodyKeysToRedact"),h(this,"networkBodyKeysToRecord"),h(this,"networkHeaderKeysToRecord"),h(this,"urlBlocklist"),h(this,"requestResponseSanitizer"),this.options=e,this.disableConsoleRecording=!!e.disableConsoleRecording,this.reportConsoleErrors=null!=(t=e.reportConsoleErrors)&&t,this.consoleMethodsToRecord=e.consoleMethodsToRecord||[...Dt],this.listeners=[],this.errors=[],this.messages=[]}isListening(){return this.listeners.length>0}startListening(){if(this.isListening())return;const e=this;this.disableConsoleRecording||this.listeners.push(Ot((t=>{var n,i,o;if(this.reportConsoleErrors&&("Error"===t.type||"error"===t.type)&&t.value&&t.trace){const s=Mt(t.value);if(_t.includes(s)||qt.some((e=>s.includes(e))))return;e.errors.push({event:s,type:"console.error",url:window.location.href,source:(null==(n=t.trace[0])?void 0:n.fileName)?t.trace[0].fileName:"",lineNumber:(null==(i=t.trace[0])?void 0:i.lineNumber)?t.trace[0].lineNumber:0,columnNumber:(null==(o=t.trace[0])?void 0:o.columnNumber)?t.trace[0].columnNumber:0,stackTrace:t.trace,timestamp:(new Date).toISOString()})}e.messages.push(t)}),{level:this.consoleMethodsToRecord,logger:"console",stringifyOptions:{depthOfLimit:10,numOfKeysLimit:100,stringLengthLimit:1e3}})),this.listeners.push(Bt((t=>{_t.includes(t.event)||qt.some((e=>t.event.includes(e)))||e.errors.push(t)}))),In.setupNetworkListener(this,this.options)}stopListening(){this.listeners.forEach((e=>e())),this.listeners=[]}static setupNetworkListener(e,t){var n,i,o,s,r,l,a,c,d,u,p,h;e._backendUrl=(null==t?void 0:t.backendUrl)||"https://pub.highlight.run",e.xhrNetworkContents=[],e.fetchNetworkContents=[],e.webSocketNetworkContents=[],e.webSocketEventContents=[],e.networkHeadersToRedact=[],e.urlBlocklist=[],e.tracingOrigins=t.tracingOrigins||[],void 0!==(null==t?void 0:t.disableNetworkRecording)?(e.disableNetworkRecording=null==t?void 0:t.disableNetworkRecording,e.enableRecordingNetworkContents=!1,e.disableRecordingWebSocketContents=!0,e.networkHeadersToRedact=[],e.networkBodyKeysToRedact=[],e.urlBlocklist=[],e.networkBodyKeysToRecord=[],e.networkBodyKeysToRecord=[]):"boolean"==typeof(null==t?void 0:t.networkRecording)?(e.disableNetworkRecording=!t.networkRecording,e.enableRecordingNetworkContents=!1,e.disableRecordingWebSocketContents=!0,e.networkHeadersToRedact=[],e.networkBodyKeysToRedact=[],e.urlBlocklist=[]):(void 0!==(null==(n=t.networkRecording)?void 0:n.enabled)?e.disableNetworkRecording=!t.networkRecording.enabled:e.disableNetworkRecording=!1,e.enableRecordingNetworkContents=(null==(i=t.networkRecording)?void 0:i.recordHeadersAndBody)||!1,e.disableRecordingWebSocketContents=(null==(o=t.networkRecording)?void 0:o.disableWebSocketEventRecordings)||!1,e.networkHeadersToRedact=(null==(r=null==(s=t.networkRecording)?void 0:s.networkHeadersToRedact)?void 0:r.map((e=>e.toLowerCase())))||[],e.networkBodyKeysToRedact=(null==(a=null==(l=t.networkRecording)?void 0:l.networkBodyKeysToRedact)?void 0:a.map((e=>e.toLowerCase())))||[],e.urlBlocklist=(null==(d=null==(c=t.networkRecording)?void 0:c.urlBlocklist)?void 0:d.map((e=>e.toLowerCase())))||[],e.urlBlocklist=[...e.urlBlocklist,...nn],e.requestResponseSanitizer=null==(u=t.networkRecording)?void 0:u.requestResponseSanitizer,e.networkHeaderKeysToRecord=null==(p=t.networkRecording)?void 0:p.headerKeysToRecord,e.networkHeaderKeysToRecord&&(e.networkHeadersToRedact=[],e.networkHeaderKeysToRecord=e.networkHeaderKeysToRecord.map((e=>e.toLocaleLowerCase()))),e.networkBodyKeysToRecord=null==(h=t.networkRecording)?void 0:h.bodyKeysToRecord,e.networkBodyKeysToRecord&&(e.networkBodyKeysToRedact=[],e.networkBodyKeysToRecord=e.networkBodyKeysToRecord.map((e=>e.toLocaleLowerCase())))),!e.disableNetworkRecording&&e.enableRecordingNetworkContents&&e.listeners.push(yn({xhrCallback:t=>{e.xhrNetworkContents.push(t)},fetchCallback:t=>{e.fetchNetworkContents.push(t)},webSocketRequestCallback:t=>{e.webSocketNetworkContents&&e.webSocketNetworkContents.push(t)},webSocketEventCallback:t=>{e.webSocketEventContents.push(t)},disableWebSocketRecording:e.disableRecordingWebSocketContents,bodyKeysToRedact:e.networkBodyKeysToRedact,backendUrl:e._backendUrl,tracingOrigins:e.tracingOrigins,urlBlocklist:e.urlBlocklist,sessionSecureID:t.sessionSecureID,bodyKeysToRecord:e.networkBodyKeysToRecord}))}static getRecordedNetworkResources(e,t){var n;let i=[],o=[];if(!e.disableNetworkRecording){const o=(null==(n=null==window?void 0:window.performance)?void 0:n.timeOrigin)||0;i=performance.getEntriesByType("resource");const s=2*(t-o);if(i=i.filter((t=>ln(t.name,e._backendUrl,e.tracingOrigins))).map((e=>u(d({},e.toJSON()),{offsetStartTime:e.startTime-s,offsetResponseEnd:e.responseEnd-s,offsetFetchStart:e.fetchStart-s}))),e.enableRecordingNetworkContents){const t={headersToRedact:e.networkHeadersToRedact,headersToRecord:e.networkHeaderKeysToRecord,requestResponseSanitizer:e.requestResponseSanitizer};i=rn(i,e.xhrNetworkContents,"xmlhttprequest",t),i=rn(i,e.fetchNetworkContents,"fetch",t)}}return e.disableRecordingWebSocketContents||(o=e.webSocketNetworkContents||[]),[...i,...o]}static getRecordedWebSocketEvents(e){let t=[];return e.disableNetworkRecording||e.disableRecordingWebSocketContents||(t=e.webSocketEventContents),t}static clearRecordedNetworkResources(e){e.disableNetworkRecording||(e.xhrNetworkContents=[],e.fetchNetworkContents=[],e.webSocketNetworkContents=[],e.webSocketEventContents=[],performance.clearResourceTimings())}}const fn=e=>{e(window.location.href);const t=history.pushState;history.pushState=(e=>function(){var t=e.apply(this,arguments);return window.dispatchEvent(new Event("pushstate")),window.dispatchEvent(new Event("locationchange")),t})(history.pushState);const n=history.replaceState;history.replaceState=(e=>function(){var t=e.apply(this,arguments);return window.dispatchEvent(new Event("replacestate")),window.dispatchEvent(new Event("locationchange")),t})(history.replaceState);const i=()=>{window.dispatchEvent(new Event("locationchange"))};window.addEventListener("popstate",i);const o=function(){e(window.location.href)};return window.addEventListener("locationchange",o),()=>{window.removeEventListener("popstate",i),window.removeEventListener("locationchange",o),history.pushState=t,history.replaceState=n}};var Gn={},Vn={exports:{}};!function(e,t){var n,i="undefined"!=typeof self?self:kt,o=function(){function e(){this.fetch=!1,this.DOMException=i.DOMException}return e.prototype=i,new e}();n=o,function(e){var t="URLSearchParams"in n,i="Symbol"in n&&"iterator"in Symbol,o="FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(e){return!1}}(),s="FormData"in n,r="ArrayBuffer"in n;if(r)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=ArrayBuffer.isView||function(e){return e&&l.indexOf(Object.prototype.toString.call(e))>-1};function c(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function d(e){return"string"!=typeof e&&(e=String(e)),e}function u(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function h(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function m(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function b(e){var t=new FileReader,n=m(t);return t.readAsArrayBuffer(e),n}function Z(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(e){var n;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:o&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:t&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():r&&o&&(n=e)&&DataView.prototype.isPrototypeOf(n)?(this._bodyArrayBuffer=Z(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r&&(ArrayBuffer.prototype.isPrototypeOf(e)||a(e))?this._bodyArrayBuffer=Z(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(b)}),this.text=function(){var e,t,n,i=h(this);if(i)return i;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=m(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=c(e),t=d(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},p.prototype.delete=function(e){delete this.map[c(e)]},p.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},p.prototype.set=function(e,t){this.map[c(e)]=d(t)},p.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),u(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),u(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),u(e)},i&&(p.prototype[Symbol.iterator]=p.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function I(e,t){var n,i,o=(t=t||{}).body;if(e instanceof I){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(n=t.method||this.method||"GET",i=n.toUpperCase(),y.indexOf(i)>-1?i:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function f(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(o))}})),t}function G(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}I.prototype.clone=function(){return new I(this,{body:this._bodyInit})},g.call(I.prototype),g.call(G.prototype),G.prototype.clone=function(){return new G(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},G.error=function(){var e=new G(null,{status:0,statusText:""});return e.type="error",e};var V=[301,302,303,307,308];G.redirect=function(e,t){if(-1===V.indexOf(t))throw new RangeError("Invalid status code");return new G(null,{status:t,headers:{location:e}})},e.DOMException=n.DOMException;try{new e.DOMException}catch(S){e.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function X(t,n){return new Promise((function(i,s){var r=new I(t,n);if(r.signal&&r.signal.aborted)return s(new e.DOMException("Aborted","AbortError"));var l=new XMLHttpRequest;function a(){l.abort()}l.onload=function(){var e,t,n={status:l.status,statusText:l.statusText,headers:(e=l.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),i=n.shift().trim();if(i){var o=n.join(":").trim();t.append(i,o)}})),t)};n.url="responseURL"in l?l.responseURL:n.headers.get("X-Request-URL");var o="response"in l?l.response:l.responseText;i(new G(o,n))},l.onerror=function(){s(new TypeError("Network request failed"))},l.ontimeout=function(){s(new TypeError("Network request failed"))},l.onabort=function(){s(new e.DOMException("Aborted","AbortError"))},l.open(r.method,r.url,!0),"include"===r.credentials?l.withCredentials=!0:"omit"===r.credentials&&(l.withCredentials=!1),"responseType"in l&&o&&(l.responseType="blob"),r.headers.forEach((function(e,t){l.setRequestHeader(t,e)})),r.signal&&(r.signal.addEventListener("abort",a),l.onreadystatechange=function(){4===l.readyState&&r.signal.removeEventListener("abort",a)}),l.send(void 0===r._bodyInit?null:r._bodyInit)}))}X.polyfill=!0,n.fetch||(n.fetch=X,n.Headers=p,n.Request=I,n.Response=G),e.Headers=p,e.Request=I,e.Response=G,e.fetch=X,Object.defineProperty(e,"__esModule",{value:!0})}({}),o.fetch.ponyfill=!0,delete o.fetch.polyfill;var s=o;(t=s.fetch).default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,e.exports=t}(Vn,Vn.exports);var Xn=Vn.exports;function Sn(e,t){if(!Boolean(e))throw new Error(null!=t?t:"Unexpected invariant triggered.")}const Wn=/\r\n|[\n\r]/g;function Rn(e,t){let n=0,i=1;for(const o of e.body.matchAll(Wn)){if("number"==typeof o.index||Sn(!1),o.index>=t)break;n=o.index+o[0].length,i+=1}return{line:i,column:t+1-n}}function vn(e,t){const n=e.locationOffset.column-1,i="".padStart(n)+e.body,o=t.line-1,s=e.locationOffset.line-1,r=t.line+s,l=1===t.line?n:0,a=t.column+l,c=`${e.name}:${r}:${a}\n`,d=i.split(/\r\n|[\n\r]/g),u=d[o];if(u.length>120){const e=Math.floor(a/80),t=a%80,n=[];for(let i=0;i<u.length;i+=80)n.push(u.slice(i,i+80));return c+Cn([[`${r} |`,n[0]],...n.slice(1,e+1).map((e=>["|",e])),["|","^".padStart(t)],["|",n[e+1]]])}return c+Cn([[r-1+" |",d[o-1]],[`${r} |`,u],["|","^".padStart(a)],[`${r+1} |`,d[o+1]]])}function Cn(e){const t=e.filter((([e,t])=>void 0!==t)),n=Math.max(...t.map((([e])=>e.length)));return t.map((([e,t])=>e.padStart(n)+(t?" "+t:""))).join("\n")}class kn extends Error{constructor(e,...t){var n,i,o;const{nodes:s,source:r,positions:l,path:a,originalError:c,extensions:d}=function(e){const t=e[0];return null==t||"kind"in t||"length"in t?{nodes:t,source:e[1],positions:e[2],path:e[3],originalError:e[4],extensions:e[5]}:t}(t);super(e),this.name="GraphQLError",this.path=null!=a?a:void 0,this.originalError=null!=c?c:void 0,this.nodes=Nn(Array.isArray(s)?s:s?[s]:void 0);const u=Nn(null===(n=this.nodes)||void 0===n?void 0:n.map((e=>e.loc)).filter((e=>null!=e)));this.source=null!=r?r:null==u||null===(i=u[0])||void 0===i?void 0:i.source,this.positions=null!=l?l:null==u?void 0:u.map((e=>e.start)),this.locations=l&&r?l.map((e=>Rn(r,e))):null==u?void 0:u.map((e=>Rn(e.source,e.start)));const p="object"==typeof(h=null==c?void 0:c.extensions)&&null!==h?null==c?void 0:c.extensions:void 0;var h;this.extensions=null!==(o=null!=d?d:p)&&void 0!==o?o:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),null!=c&&c.stack?Object.defineProperty(this,"stack",{value:c.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,kn):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let e=this.message;if(this.nodes)for(const n of this.nodes)n.loc&&(e+="\n\n"+vn((t=n.loc).source,Rn(t.source,t.start)));else if(this.source&&this.locations)for(const n of this.locations)e+="\n\n"+vn(this.source,n);var t;return e}toJSON(){const e={message:this.message};return null!=this.locations&&(e.locations=this.locations),null!=this.path&&(e.path=this.path),null!=this.extensions&&Object.keys(this.extensions).length>0&&(e.extensions=this.extensions),e}}function Nn(e){return void 0===e||0===e.length?void 0:e}function Ln(e,t,n){return new kn(`Syntax Error: ${n}`,{source:e,positions:[t]})}class wn{constructor(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class Tn{constructor(e,t,n,i,o,s){this.kind=e,this.start=t,this.end=n,this.line=i,this.column=o,this.value=s,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const xn={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},Jn=new Set(Object.keys(xn));function Yn(e){const t=null==e?void 0:e.kind;return"string"==typeof t&&Jn.has(t)}let Un;var Fn;let Kn;var Hn;let En;var On;function zn(e){return 9===e||32===e}function Mn(e){return e>=48&&e<=57}function An(e){return e>=97&&e<=122||e>=65&&e<=90}function Bn(e){return An(e)||95===e}function Pn(e){return An(e)||Mn(e)||95===e}function Dn(e){var t;let n=Number.MAX_SAFE_INTEGER,i=null,o=-1;for(let r=0;r<e.length;++r){var s;const t=e[r],l=Qn(t);l!==t.length&&(i=null!==(s=i)&&void 0!==s?s:r,o=r,0!==r&&l<n&&(n=l))}return e.map(((e,t)=>0===t?e:e.slice(n))).slice(null!==(t=i)&&void 0!==t?t:0,o+1)}function Qn(e){let t=0;for(;t<e.length&&zn(e.charCodeAt(t));)++t;return t}let jn;var _n;(Fn=Un||(Un={})).QUERY="query",Fn.MUTATION="mutation",Fn.SUBSCRIPTION="subscription",(Hn=Kn||(Kn={})).QUERY="QUERY",Hn.MUTATION="MUTATION",Hn.SUBSCRIPTION="SUBSCRIPTION",Hn.FIELD="FIELD",Hn.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",Hn.FRAGMENT_SPREAD="FRAGMENT_SPREAD",Hn.INLINE_FRAGMENT="INLINE_FRAGMENT",Hn.VARIABLE_DEFINITION="VARIABLE_DEFINITION",Hn.SCHEMA="SCHEMA",Hn.SCALAR="SCALAR",Hn.OBJECT="OBJECT",Hn.FIELD_DEFINITION="FIELD_DEFINITION",Hn.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",Hn.INTERFACE="INTERFACE",Hn.UNION="UNION",Hn.ENUM="ENUM",Hn.ENUM_VALUE="ENUM_VALUE",Hn.INPUT_OBJECT="INPUT_OBJECT",Hn.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION",(On=En||(En={})).NAME="Name",On.DOCUMENT="Document",On.OPERATION_DEFINITION="OperationDefinition",On.VARIABLE_DEFINITION="VariableDefinition",On.SELECTION_SET="SelectionSet",On.FIELD="Field",On.ARGUMENT="Argument",On.FRAGMENT_SPREAD="FragmentSpread",On.INLINE_FRAGMENT="InlineFragment",On.FRAGMENT_DEFINITION="FragmentDefinition",On.VARIABLE="Variable",On.INT="IntValue",On.FLOAT="FloatValue",On.STRING="StringValue",On.BOOLEAN="BooleanValue",On.NULL="NullValue",On.ENUM="EnumValue",On.LIST="ListValue",On.OBJECT="ObjectValue",On.OBJECT_FIELD="ObjectField",On.DIRECTIVE="Directive",On.NAMED_TYPE="NamedType",On.LIST_TYPE="ListType",On.NON_NULL_TYPE="NonNullType",On.SCHEMA_DEFINITION="SchemaDefinition",On.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",On.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",On.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",On.FIELD_DEFINITION="FieldDefinition",On.INPUT_VALUE_DEFINITION="InputValueDefinition",On.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",On.UNION_TYPE_DEFINITION="UnionTypeDefinition",On.ENUM_TYPE_DEFINITION="EnumTypeDefinition",On.ENUM_VALUE_DEFINITION="EnumValueDefinition",On.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",On.DIRECTIVE_DEFINITION="DirectiveDefinition",On.SCHEMA_EXTENSION="SchemaExtension",On.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",On.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",On.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",On.UNION_TYPE_EXTENSION="UnionTypeExtension",On.ENUM_TYPE_EXTENSION="EnumTypeExtension",On.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension",(_n=jn||(jn={})).SOF="<SOF>",_n.EOF="<EOF>",_n.BANG="!",_n.DOLLAR="$",_n.AMP="&",_n.PAREN_L="(",_n.PAREN_R=")",_n.SPREAD="...",_n.COLON=":",_n.EQUALS="=",_n.AT="@",_n.BRACKET_L="[",_n.BRACKET_R="]",_n.BRACE_L="{",_n.PIPE="|",_n.BRACE_R="}",_n.NAME="Name",_n.INT="Int",_n.FLOAT="Float",_n.STRING="String",_n.BLOCK_STRING="BlockString",_n.COMMENT="Comment";class qn{constructor(e){const t=new Tn(jn.SOF,0,0,0,0);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){this.lastToken=this.token;return this.token=this.lookahead()}lookahead(){let e=this.token;if(e.kind!==jn.EOF)do{if(e.next)e=e.next;else{const t=si(this,e.end);e.next=t,t.prev=e,e=t}}while(e.kind===jn.COMMENT);return e}}function $n(e){return e>=0&&e<=55295||e>=57344&&e<=1114111}function ei(e,t){return ti(e.charCodeAt(t))&&ni(e.charCodeAt(t+1))}function ti(e){return e>=55296&&e<=56319}function ni(e){return e>=56320&&e<=57343}function ii(e,t){const n=e.source.body.codePointAt(t);if(void 0===n)return jn.EOF;if(n>=32&&n<=126){const e=String.fromCodePoint(n);return'"'===e?"'\"'":`"${e}"`}return"U+"+n.toString(16).toUpperCase().padStart(4,"0")}function oi(e,t,n,i,o){const s=e.line,r=1+n-e.lineStart;return new Tn(t,n,i,s,r,o)}function si(e,t){const n=e.source.body,i=n.length;let o=t;for(;o<i;){const t=n.charCodeAt(o);switch(t){case 65279:case 9:case 32:case 44:++o;continue;case 10:++o,++e.line,e.lineStart=o;continue;case 13:10===n.charCodeAt(o+1)?o+=2:++o,++e.line,e.lineStart=o;continue;case 35:return ri(e,o);case 33:return oi(e,jn.BANG,o,o+1);case 36:return oi(e,jn.DOLLAR,o,o+1);case 38:return oi(e,jn.AMP,o,o+1);case 40:return oi(e,jn.PAREN_L,o,o+1);case 41:return oi(e,jn.PAREN_R,o,o+1);case 46:if(46===n.charCodeAt(o+1)&&46===n.charCodeAt(o+2))return oi(e,jn.SPREAD,o,o+3);break;case 58:return oi(e,jn.COLON,o,o+1);case 61:return oi(e,jn.EQUALS,o,o+1);case 64:return oi(e,jn.AT,o,o+1);case 91:return oi(e,jn.BRACKET_L,o,o+1);case 93:return oi(e,jn.BRACKET_R,o,o+1);case 123:return oi(e,jn.BRACE_L,o,o+1);case 124:return oi(e,jn.PIPE,o,o+1);case 125:return oi(e,jn.BRACE_R,o,o+1);case 34:return 34===n.charCodeAt(o+1)&&34===n.charCodeAt(o+2)?bi(e,o):ci(e,o)}if(Mn(t)||45===t)return li(e,o,t);if(Bn(t))return Zi(e,o);throw Ln(e.source,o,39===t?"Unexpected single quote character ('), did you mean to use a double quote (\")?":$n(t)||ei(n,o)?`Unexpected character: ${ii(e,o)}.`:`Invalid character: ${ii(e,o)}.`)}return oi(e,jn.EOF,i,i)}function ri(e,t){const n=e.source.body,i=n.length;let o=t+1;for(;o<i;){const e=n.charCodeAt(o);if(10===e||13===e)break;if($n(e))++o;else{if(!ei(n,o))break;o+=2}}return oi(e,jn.COMMENT,t,o,n.slice(t+1,o))}function li(e,t,n){const i=e.source.body;let o=t,s=n,r=!1;if(45===s&&(s=i.charCodeAt(++o)),48===s){if(s=i.charCodeAt(++o),Mn(s))throw Ln(e.source,o,`Invalid number, unexpected digit after 0: ${ii(e,o)}.`)}else o=ai(e,o,s),s=i.charCodeAt(o);if(46===s&&(r=!0,s=i.charCodeAt(++o),o=ai(e,o,s),s=i.charCodeAt(o)),69!==s&&101!==s||(r=!0,s=i.charCodeAt(++o),43!==s&&45!==s||(s=i.charCodeAt(++o)),o=ai(e,o,s),s=i.charCodeAt(o)),46===s||Bn(s))throw Ln(e.source,o,`Invalid number, expected digit but got: ${ii(e,o)}.`);return oi(e,r?jn.FLOAT:jn.INT,t,o,i.slice(t,o))}function ai(e,t,n){if(!Mn(n))throw Ln(e.source,t,`Invalid number, expected digit but got: ${ii(e,t)}.`);const i=e.source.body;let o=t+1;for(;Mn(i.charCodeAt(o));)++o;return o}function ci(e,t){const n=e.source.body,i=n.length;let o=t+1,s=o,r="";for(;o<i;){const i=n.charCodeAt(o);if(34===i)return r+=n.slice(s,o),oi(e,jn.STRING,t,o+1,r);if(92!==i){if(10===i||13===i)break;if($n(i))++o;else{if(!ei(n,o))throw Ln(e.source,o,`Invalid character within String: ${ii(e,o)}.`);o+=2}}else{r+=n.slice(s,o);const t=117===n.charCodeAt(o+1)?123===n.charCodeAt(o+2)?di(e,o):ui(e,o):mi(e,o);r+=t.value,o+=t.size,s=o}}throw Ln(e.source,o,"Unterminated string.")}function di(e,t){const n=e.source.body;let i=0,o=3;for(;o<12;){const e=n.charCodeAt(t+o++);if(125===e){if(o<5||!$n(i))break;return{value:String.fromCodePoint(i),size:o}}if(i=i<<4|hi(e),i<0)break}throw Ln(e.source,t,`Invalid Unicode escape sequence: "${n.slice(t,t+o)}".`)}function ui(e,t){const n=e.source.body,i=pi(n,t+2);if($n(i))return{value:String.fromCodePoint(i),size:6};if(ti(i)&&92===n.charCodeAt(t+6)&&117===n.charCodeAt(t+7)){const e=pi(n,t+8);if(ni(e))return{value:String.fromCodePoint(i,e),size:12}}throw Ln(e.source,t,`Invalid Unicode escape sequence: "${n.slice(t,t+6)}".`)}function pi(e,t){return hi(e.charCodeAt(t))<<12|hi(e.charCodeAt(t+1))<<8|hi(e.charCodeAt(t+2))<<4|hi(e.charCodeAt(t+3))}function hi(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function mi(e,t){const n=e.source.body;switch(n.charCodeAt(t+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:"\n",size:2};case 114:return{value:"\r",size:2};case 116:return{value:"\t",size:2}}throw Ln(e.source,t,`Invalid character escape sequence: "${n.slice(t,t+2)}".`)}function bi(e,t){const n=e.source.body,i=n.length;let o=e.lineStart,s=t+3,r=s,l="";const a=[];for(;s<i;){const i=n.charCodeAt(s);if(34===i&&34===n.charCodeAt(s+1)&&34===n.charCodeAt(s+2)){l+=n.slice(r,s),a.push(l);const i=oi(e,jn.BLOCK_STRING,t,s+3,Dn(a).join("\n"));return e.line+=a.length-1,e.lineStart=o,i}if(92!==i||34!==n.charCodeAt(s+1)||34!==n.charCodeAt(s+2)||34!==n.charCodeAt(s+3))if(10!==i&&13!==i)if($n(i))++s;else{if(!ei(n,s))throw Ln(e.source,s,`Invalid character within String: ${ii(e,s)}.`);s+=2}else l+=n.slice(r,s),a.push(l),13===i&&10===n.charCodeAt(s+1)?s+=2:++s,l="",r=s,o=s;else l+=n.slice(r,s),r=s+1,s+=4}throw Ln(e.source,s,"Unterminated string.")}function Zi(e,t){const n=e.source.body,i=n.length;let o=t+1;for(;o<i;){if(!Pn(n.charCodeAt(o)))break;++o}return oi(e,jn.NAME,t,o,n.slice(t,o))}function gi(e,t){if(!Boolean(e))throw new Error(t)}function yi(e){return Ii(e,[])}function Ii(e,t){switch(typeof e){case"string":return JSON.stringify(e);case"function":return e.name?`[function ${e.name}]`:"[function]";case"object":return function(e,t){if(null===e)return"null";if(t.includes(e))return"[Circular]";const n=[...t,e];if(function(e){return"function"==typeof e.toJSON}(e)){const t=e.toJSON();if(t!==e)return"string"==typeof t?t:Ii(t,n)}else if(Array.isArray(e))return function(e,t){if(0===e.length)return"[]";if(t.length>2)return"[Array]";const n=Math.min(10,e.length),i=e.length-n,o=[];for(let s=0;s<n;++s)o.push(Ii(e[s],t));1===i?o.push("... 1 more item"):i>1&&o.push(`... ${i} more items`);return"["+o.join(", ")+"]"}(e,n);return function(e,t){const n=Object.entries(e);if(0===n.length)return"{}";if(t.length>2)return"["+function(e){const t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){const t=e.constructor.name;if("string"==typeof t&&""!==t)return t}return t}(e)+"]";const i=n.map((([e,n])=>e+": "+Ii(n,t)));return"{ "+i.join(", ")+" }"}(e,n)}(e,t);default:return String(e)}}class fi{constructor(e,t="GraphQL request",n={line:1,column:1}){"string"==typeof e||gi(!1,`Body must be a string. Received: ${yi(e)}.`),this.body=e,this.name=t,this.locationOffset=n,this.locationOffset.line>0||gi(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||gi(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function Gi(e,t){return new Vi(e,t).parseDocument()}class Vi{constructor(e,t){const n=function(e){return e instanceof fi}(e)?e:new fi(e);this._lexer=new qn(n),this._options=t}parseName(){const e=this.expectToken(jn.NAME);return this.node(e,{kind:En.NAME,value:e.value})}parseDocument(){return this.node(this._lexer.token,{kind:En.DOCUMENT,definitions:this.many(jn.SOF,this.parseDefinition,jn.EOF)})}parseDefinition(){if(this.peek(jn.BRACE_L))return this.parseOperationDefinition();const e=this.peekDescription(),t=e?this._lexer.lookahead():this._lexer.token;if(t.kind===jn.NAME){switch(t.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(e)throw Ln(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(t.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(t)}parseOperationDefinition(){const e=this._lexer.token;if(this.peek(jn.BRACE_L))return this.node(e,{kind:En.OPERATION_DEFINITION,operation:Un.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const t=this.parseOperationType();let n;return this.peek(jn.NAME)&&(n=this.parseName()),this.node(e,{kind:En.OPERATION_DEFINITION,operation:t,name:n,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const e=this.expectToken(jn.NAME);switch(e.value){case"query":return Un.QUERY;case"mutation":return Un.MUTATION;case"subscription":return Un.SUBSCRIPTION}throw this.unexpected(e)}parseVariableDefinitions(){return this.optionalMany(jn.PAREN_L,this.parseVariableDefinition,jn.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:En.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(jn.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(jn.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const e=this._lexer.token;return this.expectToken(jn.DOLLAR),this.node(e,{kind:En.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:En.SELECTION_SET,selections:this.many(jn.BRACE_L,this.parseSelection,jn.BRACE_R)})}parseSelection(){return this.peek(jn.SPREAD)?this.parseFragment():this.parseField()}parseField(){const e=this._lexer.token,t=this.parseName();let n,i;return this.expectOptionalToken(jn.COLON)?(n=t,i=this.parseName()):i=t,this.node(e,{kind:En.FIELD,alias:n,name:i,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(jn.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(e){const t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(jn.PAREN_L,t,jn.PAREN_R)}parseArgument(e=!1){const t=this._lexer.token,n=this.parseName();return this.expectToken(jn.COLON),this.node(t,{kind:En.ARGUMENT,name:n,value:this.parseValueLiteral(e)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const e=this._lexer.token;this.expectToken(jn.SPREAD);const t=this.expectOptionalKeyword("on");return!t&&this.peek(jn.NAME)?this.node(e,{kind:En.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(e,{kind:En.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){var e;const t=this._lexer.token;return this.expectKeyword("fragment"),!0===(null===(e=this._options)||void 0===e?void 0:e.allowLegacyFragmentVariables)?this.node(t,{kind:En.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(t,{kind:En.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()}parseValueLiteral(e){const t=this._lexer.token;switch(t.kind){case jn.BRACKET_L:return this.parseList(e);case jn.BRACE_L:return this.parseObject(e);case jn.INT:return this._lexer.advance(),this.node(t,{kind:En.INT,value:t.value});case jn.FLOAT:return this._lexer.advance(),this.node(t,{kind:En.FLOAT,value:t.value});case jn.STRING:case jn.BLOCK_STRING:return this.parseStringLiteral();case jn.NAME:switch(this._lexer.advance(),t.value){case"true":return this.node(t,{kind:En.BOOLEAN,value:!0});case"false":return this.node(t,{kind:En.BOOLEAN,value:!1});case"null":return this.node(t,{kind:En.NULL});default:return this.node(t,{kind:En.ENUM,value:t.value})}case jn.DOLLAR:if(e){if(this.expectToken(jn.DOLLAR),this._lexer.token.kind===jn.NAME){const e=this._lexer.token.value;throw Ln(this._lexer.source,t.start,`Unexpected variable "$${e}" in constant value.`)}throw this.unexpected(t)}return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const e=this._lexer.token;return this._lexer.advance(),this.node(e,{kind:En.STRING,value:e.value,block:e.kind===jn.BLOCK_STRING})}parseList(e){return this.node(this._lexer.token,{kind:En.LIST,values:this.any(jn.BRACKET_L,(()=>this.parseValueLiteral(e)),jn.BRACKET_R)})}parseObject(e){return this.node(this._lexer.token,{kind:En.OBJECT,fields:this.any(jn.BRACE_L,(()=>this.parseObjectField(e)),jn.BRACE_R)})}parseObjectField(e){const t=this._lexer.token,n=this.parseName();return this.expectToken(jn.COLON),this.node(t,{kind:En.OBJECT_FIELD,name:n,value:this.parseValueLiteral(e)})}parseDirectives(e){const t=[];for(;this.peek(jn.AT);)t.push(this.parseDirective(e));return t}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(e){const t=this._lexer.token;return this.expectToken(jn.AT),this.node(t,{kind:En.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e)})}parseTypeReference(){const e=this._lexer.token;let t;if(this.expectOptionalToken(jn.BRACKET_L)){const n=this.parseTypeReference();this.expectToken(jn.BRACKET_R),t=this.node(e,{kind:En.LIST_TYPE,type:n})}else t=this.parseNamedType();return this.expectOptionalToken(jn.BANG)?this.node(e,{kind:En.NON_NULL_TYPE,type:t}):t}parseNamedType(){return this.node(this._lexer.token,{kind:En.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(jn.STRING)||this.peek(jn.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");const n=this.parseConstDirectives(),i=this.many(jn.BRACE_L,this.parseOperationTypeDefinition,jn.BRACE_R);return this.node(e,{kind:En.SCHEMA_DEFINITION,description:t,directives:n,operationTypes:i})}parseOperationTypeDefinition(){const e=this._lexer.token,t=this.parseOperationType();this.expectToken(jn.COLON);const n=this.parseNamedType();return this.node(e,{kind:En.OPERATION_TYPE_DEFINITION,operation:t,type:n})}parseScalarTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");const n=this.parseName(),i=this.parseConstDirectives();return this.node(e,{kind:En.SCALAR_TYPE_DEFINITION,description:t,name:n,directives:i})}parseObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");const n=this.parseName(),i=this.parseImplementsInterfaces(),o=this.parseConstDirectives(),s=this.parseFieldsDefinition();return this.node(e,{kind:En.OBJECT_TYPE_DEFINITION,description:t,name:n,interfaces:i,directives:o,fields:s})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(jn.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(jn.BRACE_L,this.parseFieldDefinition,jn.BRACE_R)}parseFieldDefinition(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),i=this.parseArgumentDefs();this.expectToken(jn.COLON);const o=this.parseTypeReference(),s=this.parseConstDirectives();return this.node(e,{kind:En.FIELD_DEFINITION,description:t,name:n,arguments:i,type:o,directives:s})}parseArgumentDefs(){return this.optionalMany(jn.PAREN_L,this.parseInputValueDef,jn.PAREN_R)}parseInputValueDef(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseName();this.expectToken(jn.COLON);const i=this.parseTypeReference();let o;this.expectOptionalToken(jn.EQUALS)&&(o=this.parseConstValueLiteral());const s=this.parseConstDirectives();return this.node(e,{kind:En.INPUT_VALUE_DEFINITION,description:t,name:n,type:i,defaultValue:o,directives:s})}parseInterfaceTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");const n=this.parseName(),i=this.parseImplementsInterfaces(),o=this.parseConstDirectives(),s=this.parseFieldsDefinition();return this.node(e,{kind:En.INTERFACE_TYPE_DEFINITION,description:t,name:n,interfaces:i,directives:o,fields:s})}parseUnionTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");const n=this.parseName(),i=this.parseConstDirectives(),o=this.parseUnionMemberTypes();return this.node(e,{kind:En.UNION_TYPE_DEFINITION,description:t,name:n,directives:i,types:o})}parseUnionMemberTypes(){return this.expectOptionalToken(jn.EQUALS)?this.delimitedMany(jn.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");const n=this.parseName(),i=this.parseConstDirectives(),o=this.parseEnumValuesDefinition();return this.node(e,{kind:En.ENUM_TYPE_DEFINITION,description:t,name:n,directives:i,values:o})}parseEnumValuesDefinition(){return this.optionalMany(jn.BRACE_L,this.parseEnumValueDefinition,jn.BRACE_R)}parseEnumValueDefinition(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseEnumValueName(),i=this.parseConstDirectives();return this.node(e,{kind:En.ENUM_VALUE_DEFINITION,description:t,name:n,directives:i})}parseEnumValueName(){if("true"===this._lexer.token.value||"false"===this._lexer.token.value||"null"===this._lexer.token.value)throw Ln(this._lexer.source,this._lexer.token.start,`${Xi(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");const n=this.parseName(),i=this.parseConstDirectives(),o=this.parseInputFieldsDefinition();return this.node(e,{kind:En.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:n,directives:i,fields:o})}parseInputFieldsDefinition(){return this.optionalMany(jn.BRACE_L,this.parseInputValueDef,jn.BRACE_R)}parseTypeSystemExtension(){const e=this._lexer.lookahead();if(e.kind===jn.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)}parseSchemaExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const t=this.parseConstDirectives(),n=this.optionalMany(jn.BRACE_L,this.parseOperationTypeDefinition,jn.BRACE_R);if(0===t.length&&0===n.length)throw this.unexpected();return this.node(e,{kind:En.SCHEMA_EXTENSION,directives:t,operationTypes:n})}parseScalarTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const t=this.parseName(),n=this.parseConstDirectives();if(0===n.length)throw this.unexpected();return this.node(e,{kind:En.SCALAR_TYPE_EXTENSION,name:t,directives:n})}parseObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const t=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),o=this.parseFieldsDefinition();if(0===n.length&&0===i.length&&0===o.length)throw this.unexpected();return this.node(e,{kind:En.OBJECT_TYPE_EXTENSION,name:t,interfaces:n,directives:i,fields:o})}parseInterfaceTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const t=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),o=this.parseFieldsDefinition();if(0===n.length&&0===i.length&&0===o.length)throw this.unexpected();return this.node(e,{kind:En.INTERFACE_TYPE_EXTENSION,name:t,interfaces:n,directives:i,fields:o})}parseUnionTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const t=this.parseName(),n=this.parseConstDirectives(),i=this.parseUnionMemberTypes();if(0===n.length&&0===i.length)throw this.unexpected();return this.node(e,{kind:En.UNION_TYPE_EXTENSION,name:t,directives:n,types:i})}parseEnumTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const t=this.parseName(),n=this.parseConstDirectives(),i=this.parseEnumValuesDefinition();if(0===n.length&&0===i.length)throw this.unexpected();return this.node(e,{kind:En.ENUM_TYPE_EXTENSION,name:t,directives:n,values:i})}parseInputObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const t=this.parseName(),n=this.parseConstDirectives(),i=this.parseInputFieldsDefinition();if(0===n.length&&0===i.length)throw this.unexpected();return this.node(e,{kind:En.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:n,fields:i})}parseDirectiveDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(jn.AT);const n=this.parseName(),i=this.parseArgumentDefs(),o=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const s=this.parseDirectiveLocations();return this.node(e,{kind:En.DIRECTIVE_DEFINITION,description:t,name:n,arguments:i,repeatable:o,locations:s})}parseDirectiveLocations(){return this.delimitedMany(jn.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const e=this._lexer.token,t=this.parseName();if(Object.prototype.hasOwnProperty.call(Kn,t.value))return t;throw this.unexpected(e)}node(e,t){var n;return!0!==(null===(n=this._options)||void 0===n?void 0:n.noLocation)&&(t.loc=new wn(e,this._lexer.lastToken,this._lexer.source)),t}peek(e){return this._lexer.token.kind===e}expectToken(e){const t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t;throw Ln(this._lexer.source,t.start,`Expected ${Si(e)}, found ${Xi(t)}.`)}expectOptionalToken(e){return this._lexer.token.kind===e&&(this._lexer.advance(),!0)}expectKeyword(e){const t=this._lexer.token;if(t.kind!==jn.NAME||t.value!==e)throw Ln(this._lexer.source,t.start,`Expected "${e}", found ${Xi(t)}.`);this._lexer.advance()}expectOptionalKeyword(e){const t=this._lexer.token;return t.kind===jn.NAME&&t.value===e&&(this._lexer.advance(),!0)}unexpected(e){const t=null!=e?e:this._lexer.token;return Ln(this._lexer.source,t.start,`Unexpected ${Xi(t)}.`)}any(e,t,n){this.expectToken(e);const i=[];for(;!this.expectOptionalToken(n);)i.push(t.call(this));return i}optionalMany(e,t,n){if(this.expectOptionalToken(e)){const e=[];do{e.push(t.call(this))}while(!this.expectOptionalToken(n));return e}return[]}many(e,t,n){this.expectToken(e);const i=[];do{i.push(t.call(this))}while(!this.expectOptionalToken(n));return i}delimitedMany(e,t){this.expectOptionalToken(e);const n=[];do{n.push(t.call(this))}while(this.expectOptionalToken(e));return n}}function Xi(e){const t=e.value;return Si(e.kind)+(null!=t?` "${t}"`:"")}function Si(e){return function(e){return e===jn.BANG||e===jn.DOLLAR||e===jn.AMP||e===jn.PAREN_L||e===jn.PAREN_R||e===jn.SPREAD||e===jn.COLON||e===jn.EQUALS||e===jn.AT||e===jn.BRACKET_L||e===jn.BRACKET_R||e===jn.BRACE_L||e===jn.PIPE||e===jn.BRACE_R}(e)?`"${e}"`:e}const Wi=Lt(Object.freeze(Object.defineProperty({__proto__:null,Parser:Vi,parse:Gi,parseConstValue:function(e,t){const n=new Vi(e,t);n.expectToken(jn.SOF);const i=n.parseConstValueLiteral();return n.expectToken(jn.EOF),i},parseType:function(e,t){const n=new Vi(e,t);n.expectToken(jn.SOF);const i=n.parseTypeReference();return n.expectToken(jn.EOF),i},parseValue:function(e,t){const n=new Vi(e,t);n.expectToken(jn.SOF);const i=n.parseValueLiteral(!1);return n.expectToken(jn.EOF),i}},Symbol.toStringTag,{value:"Module"})));const Ri=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function vi(e){return Ci[e.charCodeAt(0)]}const Ci=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],ki=Object.freeze({});function Ni(e,t){const n=e[t];return"object"==typeof n?n:"function"==typeof n?{enter:n,leave:void 0}:{enter:e.enter,leave:e.leave}}function Li(e){return function(e,t,n=xn){const i=new Map;for(const g of Object.values(En))i.set(g,Ni(t,g));let o,s,r,l=Array.isArray(e),a=[e],c=-1,d=[],u=e;const p=[],h=[];do{c++;const e=c===a.length,g=e&&0!==d.length;if(e){if(s=0===h.length?void 0:p[p.length-1],u=r,r=h.pop(),g)if(l){u=u.slice();let e=0;for(const[t,n]of d){const i=t-e;null===n?(u.splice(i,1),e++):u[i]=n}}else{u=Object.defineProperties({},Object.getOwnPropertyDescriptors(u));for(const[e,t]of d)u[e]=t}c=o.index,a=o.keys,d=o.edits,l=o.inArray,o=o.prev}else if(r){if(s=l?c:a[c],u=r[s],null==u)continue;p.push(s)}let y;if(!Array.isArray(u)){var m,b;Yn(u)||gi(!1,`Invalid AST Node: ${yi(u)}.`);const n=e?null===(m=i.get(u.kind))||void 0===m?void 0:m.leave:null===(b=i.get(u.kind))||void 0===b?void 0:b.enter;if(y=null==n?void 0:n.call(t,u,s,r,p,h),y===ki)break;if(!1===y){if(!e){p.pop();continue}}else if(void 0!==y&&(d.push([s,y]),!e)){if(!Yn(y)){p.pop();continue}u=y}}var Z;void 0===y&&g&&d.push([s,u]),e?p.pop():(o={inArray:l,index:c,keys:a,edits:d,prev:o},l=Array.isArray(u),a=l?u:null!==(Z=n[u.kind])&&void 0!==Z?Z:[],c=-1,d=[],r&&h.push(r),r=u)}while(void 0!==o);return 0!==d.length?d[d.length-1][1]:e}(e,wi)}const wi={Name:{leave:e=>e.value},Variable:{leave:e=>"$"+e.name},Document:{leave:e=>Ti(e.definitions,"\n\n")},OperationDefinition:{leave(e){const t=Ji("(",Ti(e.variableDefinitions,", "),")"),n=Ti([e.operation,Ti([e.name,t]),Ti(e.directives," ")]," ");return("query"===n?"":n+" ")+e.selectionSet}},VariableDefinition:{leave:({variable:e,type:t,defaultValue:n,directives:i})=>e+": "+t+Ji(" = ",n)+Ji(" ",Ti(i," "))},SelectionSet:{leave:({selections:e})=>xi(e)},Field:{leave({alias:e,name:t,arguments:n,directives:i,selectionSet:o}){const s=Ji("",e,": ")+t;let r=s+Ji("(",Ti(n,", "),")");return r.length>80&&(r=s+Ji("(\n",Yi(Ti(n,"\n")),"\n)")),Ti([r,Ti(i," "),o]," ")}},Argument:{leave:({name:e,value:t})=>e+": "+t},FragmentSpread:{leave:({name:e,directives:t})=>"..."+e+Ji(" ",Ti(t," "))},InlineFragment:{leave:({typeCondition:e,directives:t,selectionSet:n})=>Ti(["...",Ji("on ",e),Ti(t," "),n]," ")},FragmentDefinition:{leave:({name:e,typeCondition:t,variableDefinitions:n,directives:i,selectionSet:o})=>`fragment ${e}${Ji("(",Ti(n,", "),")")} on ${t} ${Ji("",Ti(i," ")," ")}`+o},IntValue:{leave:({value:e})=>e},FloatValue:{leave:({value:e})=>e},StringValue:{leave:({value:e,block:t})=>t?function(e,t){const n=e.replace(/"""/g,'\\"""'),i=n.split(/\r\n|[\n\r]/g),o=1===i.length,s=i.length>1&&i.slice(1).every((e=>0===e.length||zn(e.charCodeAt(0)))),r=n.endsWith('\\"""'),l=e.endsWith('"')&&!r,a=e.endsWith("\\"),c=l||a,d=!(null!=t&&t.minimize)&&(!o||e.length>70||c||s||r);let u="";const p=o&&zn(e.charCodeAt(0));return(d&&!p||s)&&(u+="\n"),u+=n,(d||c)&&(u+="\n"),'"""'+u+'"""'}(e):`"${e.replace(Ri,vi)}"`},BooleanValue:{leave:({value:e})=>e?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:e})=>e},ListValue:{leave:({values:e})=>"["+Ti(e,", ")+"]"},ObjectValue:{leave:({fields:e})=>"{"+Ti(e,", ")+"}"},ObjectField:{leave:({name:e,value:t})=>e+": "+t},Directive:{leave:({name:e,arguments:t})=>"@"+e+Ji("(",Ti(t,", "),")")},NamedType:{leave:({name:e})=>e},ListType:{leave:({type:e})=>"["+e+"]"},NonNullType:{leave:({type:e})=>e+"!"},SchemaDefinition:{leave:({description:e,directives:t,operationTypes:n})=>Ji("",e,"\n")+Ti(["schema",Ti(t," "),xi(n)]," ")},OperationTypeDefinition:{leave:({operation:e,type:t})=>e+": "+t},ScalarTypeDefinition:{leave:({description:e,name:t,directives:n})=>Ji("",e,"\n")+Ti(["scalar",t,Ti(n," ")]," ")},ObjectTypeDefinition:{leave:({description:e,name:t,interfaces:n,directives:i,fields:o})=>Ji("",e,"\n")+Ti(["type",t,Ji("implements ",Ti(n," & ")),Ti(i," "),xi(o)]," ")},FieldDefinition:{leave:({description:e,name:t,arguments:n,type:i,directives:o})=>Ji("",e,"\n")+t+(Ui(n)?Ji("(\n",Yi(Ti(n,"\n")),"\n)"):Ji("(",Ti(n,", "),")"))+": "+i+Ji(" ",Ti(o," "))},InputValueDefinition:{leave:({description:e,name:t,type:n,defaultValue:i,directives:o})=>Ji("",e,"\n")+Ti([t+": "+n,Ji("= ",i),Ti(o," ")]," ")},InterfaceTypeDefinition:{leave:({description:e,name:t,interfaces:n,directives:i,fields:o})=>Ji("",e,"\n")+Ti(["interface",t,Ji("implements ",Ti(n," & ")),Ti(i," "),xi(o)]," ")},UnionTypeDefinition:{leave:({description:e,name:t,directives:n,types:i})=>Ji("",e,"\n")+Ti(["union",t,Ti(n," "),Ji("= ",Ti(i," | "))]," ")},EnumTypeDefinition:{leave:({description:e,name:t,directives:n,values:i})=>Ji("",e,"\n")+Ti(["enum",t,Ti(n," "),xi(i)]," ")},EnumValueDefinition:{leave:({description:e,name:t,directives:n})=>Ji("",e,"\n")+Ti([t,Ti(n," ")]," ")},InputObjectTypeDefinition:{leave:({description:e,name:t,directives:n,fields:i})=>Ji("",e,"\n")+Ti(["input",t,Ti(n," "),xi(i)]," ")},DirectiveDefinition:{leave:({description:e,name:t,arguments:n,repeatable:i,locations:o})=>Ji("",e,"\n")+"directive @"+t+(Ui(n)?Ji("(\n",Yi(Ti(n,"\n")),"\n)"):Ji("(",Ti(n,", "),")"))+(i?" repeatable":"")+" on "+Ti(o," | ")},SchemaExtension:{leave:({directives:e,operationTypes:t})=>Ti(["extend schema",Ti(e," "),xi(t)]," ")},ScalarTypeExtension:{leave:({name:e,directives:t})=>Ti(["extend scalar",e,Ti(t," ")]," ")},ObjectTypeExtension:{leave:({name:e,interfaces:t,directives:n,fields:i})=>Ti(["extend type",e,Ji("implements ",Ti(t," & ")),Ti(n," "),xi(i)]," ")},InterfaceTypeExtension:{leave:({name:e,interfaces:t,directives:n,fields:i})=>Ti(["extend interface",e,Ji("implements ",Ti(t," & ")),Ti(n," "),xi(i)]," ")},UnionTypeExtension:{leave:({name:e,directives:t,types:n})=>Ti(["extend union",e,Ti(t," "),Ji("= ",Ti(n," | "))]," ")},EnumTypeExtension:{leave:({name:e,directives:t,values:n})=>Ti(["extend enum",e,Ti(t," "),xi(n)]," ")},InputObjectTypeExtension:{leave:({name:e,directives:t,fields:n})=>Ti(["extend input",e,Ti(t," "),xi(n)]," ")}};function Ti(e,t=""){var n;return null!==(n=null==e?void 0:e.filter((e=>e)).join(t))&&void 0!==n?n:""}function xi(e){return Ji("{\n",Yi(Ti(e,"\n")),"\n}")}function Ji(e,t,n=""){return null!=t&&""!==t?e+t+n:""}function Yi(e){return Ji("  ",e.replace(/\n/g,"\n  "))}function Ui(e){var t;return null!==(t=null==e?void 0:e.some((e=>e.includes("\n"))))&&void 0!==t&&t}const Fi=Lt(Object.freeze(Object.defineProperty({__proto__:null,print:Li},Symbol.toStringTag,{value:"Module"})));var Ki={},Hi={},Ei=function(e){var t=e.uri,n=e.name,i=e.type;this.uri=t,this.name=n,this.type=i},Oi=Ei,zi=function(e){return"undefined"!=typeof File&&e instanceof File||"undefined"!=typeof Blob&&e instanceof Blob||e instanceof Oi},Mi=zi;Hi.ReactNativeFile=Ei,Hi.extractFiles=function e(t,n,i){var o;void 0===n&&(n=""),void 0===i&&(i=Mi);var s=new Map;function r(e,t){var n=s.get(t);n?n.push.apply(n,e):s.set(t,e)}if(i(t))o=null,r([n],t);else{var l=n?n+".":"";if("undefined"!=typeof FileList&&t instanceof FileList)o=Array.prototype.map.call(t,(function(e,t){return r([""+l+t],e),null}));else if(Array.isArray(t))o=t.map((function(t,n){var o=e(t,""+l+n,i);return o.files.forEach(r),o.clone}));else if(t&&t.constructor===Object)for(var a in o={},t){var c=e(t[a],""+l+a,i);c.files.forEach(r),o[a]=c.clone}else o=t}return{clone:o,files:s}},Hi.isExtractableFile=zi;var Ai="object"==typeof self?self.FormData:window.FormData,Bi={};Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.defaultJsonSerializer=void 0,Bi.defaultJsonSerializer={parse:JSON.parse,stringify:JSON.stringify};var Pi=kt&&kt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ki,"__esModule",{value:!0});var Di=Hi,Qi=Pi(Ai),ji=Bi,_i=function(e){return Di.isExtractableFile(e)||null!==e&&"object"==typeof e&&"function"==typeof e.pipe};Ki.default=function(e,t,n,i){void 0===i&&(i=ji.defaultJsonSerializer);var o=Di.extractFiles({query:e,variables:t,operationName:n},"",_i),s=o.clone,r=o.files;if(0===r.size){if(!Array.isArray(e))return i.stringify(s);if(void 0!==t&&!Array.isArray(t))throw new Error("Cannot create request body with given variable type, array expected");var l=e.reduce((function(e,n,i){return e.push({query:n,variables:t?t[i]:void 0}),e}),[]);return i.stringify(l)}var a=new("undefined"==typeof FormData?Qi.default:FormData);a.append("operations",i.stringify(s));var c={},d=0;return r.forEach((function(e){c[++d]=e})),a.append("map",i.stringify(c)),d=0,r.forEach((function(e,t){a.append(""+ ++d,t)})),a};var qi={};Object.defineProperty(qi,"__esModule",{value:!0}),qi.parseBatchRequestsExtendedArgs=qi.parseRawRequestExtendedArgs=qi.parseRequestExtendedArgs=qi.parseBatchRequestArgs=qi.parseRawRequestArgs=qi.parseRequestArgs=void 0,qi.parseRequestArgs=function(e,t,n){return e.document?e:{document:e,variables:t,requestHeaders:n,signal:void 0}},qi.parseRawRequestArgs=function(e,t,n){return e.query?e:{query:e,variables:t,requestHeaders:n,signal:void 0}},qi.parseBatchRequestArgs=function(e,t){return e.documents?e:{documents:e,requestHeaders:t,signal:void 0}},qi.parseRequestExtendedArgs=function(e,t,n,i){return e.document?e:{url:e,document:t,variables:n,requestHeaders:i,signal:void 0}},qi.parseRawRequestExtendedArgs=function(e,t,n,i){return e.query?e:{url:e,query:t,variables:n,requestHeaders:i,signal:void 0}},qi.parseBatchRequestsExtendedArgs=function(e,t,n){return e.documents?e:{url:e,documents:t,requestHeaders:n,signal:void 0}};var $i={},eo=kt&&kt.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty($i,"__esModule",{value:!0}),$i.ClientError=void 0;var to=function(e){function t(n,i){var o=this,s=t.extractMessage(n)+": "+JSON.stringify({response:n,request:i});return o=e.call(this,s)||this,Object.setPrototypeOf(o,t.prototype),o.response=n,o.request=i,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(o,t),o}return eo(t,e),t.extractMessage=function(e){try{return e.errors[0].message}catch(t){return"GraphQL Error (Code: "+e.status+")"}},t}(Error);$i.ClientError=to;var no,io,oo={};function so(){if(no)return oo;no=1;var e=kt&&kt.__assign||function(){return e=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},e.apply(this,arguments)},t=kt&&kt.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{a(i.next(e))}catch(t){s(t)}}function l(e){try{a(i.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,l)}a((i=i.apply(e,t||[])).next())}))},n=kt&&kt.__generator||function(e,t){var n,i,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=r.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(l){s=[6,l],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(oo,"__esModule",{value:!0}),oo.GraphQLWebSocketClient=void 0;var i=$i,o=ro(),s="ping",r="pong",l="subscribe",a="complete",c=function(){function e(e,t,n){this._type=e,this._payload=t,this._id=n}return Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"payload",{get:function(){return this._payload},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){var e={type:this.type};return null!=this.id&&null!=this.id&&(e.id=this.id),null!=this.payload&&null!=this.payload&&(e.payload=this.payload),JSON.stringify(e)},enumerable:!1,configurable:!0}),e.parse=function(t,n){var i=JSON.parse(t),o=i.type,s=i.payload,r=i.id;return new e(o,n(s),r)},e}(),d=function(){function d(o,l){var d=this,h=l.onInit,m=l.onAcknowledged,b=l.onPing,Z=l.onPong;this.socketState={acknowledged:!1,lastRequestId:0,subscriptions:{}},this.socket=o,o.onopen=function(e){return t(d,void 0,void 0,(function(){var e,t,i,s;return n(this,(function(n){switch(n.label){case 0:return this.socketState.acknowledged=!1,this.socketState.subscriptions={},t=(e=o).send,i=u,h?[4,h()]:[3,2];case 1:return s=n.sent(),[3,3];case 2:s=null,n.label=3;case 3:return t.apply(e,[i.apply(void 0,[s]).text]),[2]}}))}))},o.onclose=function(e){d.socketState.acknowledged=!1,d.socketState.subscriptions={}},o.onerror=function(e){console.error(e)},o.onmessage=function(t){try{var n=function(e,t){void 0===t&&(t=function(e){return e});return c.parse(e,t)}(t.data);switch(n.type){case"connection_ack":return void(d.socketState.acknowledged?console.warn("Duplicate CONNECTION_ACK message ignored"):(d.socketState.acknowledged=!0,m&&m(n.payload)));case s:return void(b?b(n.payload).then((function(e){return o.send(p(e).text)})):o.send(p(null).text));case r:return void(Z&&Z(n.payload))}if(!d.socketState.acknowledged)return;if(void 0===n.id||null===n.id||!d.socketState.subscriptions[n.id])return;var l=d.socketState.subscriptions[n.id],u=l.query,h=l.variables,g=l.subscriber;switch(n.type){case"next":return!n.payload.errors&&n.payload.data&&g.next&&g.next(n.payload.data),void(n.payload.errors&&g.error&&g.error(new i.ClientError(e(e({},n.payload),{status:200}),{query:u,variables:h})));case"error":return void(g.error&&g.error(new i.ClientError({errors:n.payload,status:200},{query:u,variables:h})));case a:return g.complete&&g.complete(),void delete d.socketState.subscriptions[n.id]}}catch(y){console.error(y),o.close(1006)}o.close(4400,"Unknown graphql-ws message.")}}return d.prototype.makeSubscribe=function(e,t,n,i){var o,s,r=this,d=(this.socketState.lastRequestId++).toString();return this.socketState.subscriptions[d]={query:e,variables:n,subscriber:i},this.socket.send((o=d,s={query:e,operationName:t,variables:n},new c(l,s,o)).text),function(){r.socket.send(function(e){return new c(a,void 0,e)}(d).text),delete r.socketState.subscriptions[d]}},d.prototype.rawRequest=function(e,t){var n=this;return new Promise((function(i,o){var s;n.rawSubscribe(e,{next:function(e,t){return s={data:e,extensions:t}},error:o,complete:function(){return i(s)}},t)}))},d.prototype.request=function(e,t){var n=this;return new Promise((function(i,o){var s;n.subscribe(e,{next:function(e){return s=e},error:o,complete:function(){return i(s)}},t)}))},d.prototype.subscribe=function(e,t,n){var i=o.resolveRequestDocument(e),s=i.query,r=i.operationName;return this.makeSubscribe(s,r,n,t)},d.prototype.rawSubscribe=function(e,t,n){return this.makeSubscribe(e,void 0,n,t)},d.prototype.ping=function(e){this.socket.send(function(e){return new c(s,e,void 0)}(e).text)},d.prototype.close=function(){this.socket.close(1e3)},d.PROTOCOL="graphql-transport-ws",d}();function u(e){return new c("connection_init",e)}function p(e){return new c(r,e,void 0)}return oo.GraphQLWebSocketClient=d,oo}function ro(){return io||(io=1,function(e){var t=kt&&kt.__assign||function(){return t=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)},n=kt&&kt.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),i=kt&&kt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=kt&&kt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},s=kt&&kt.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{a(i.next(e))}catch(t){s(t)}}function l(e){try{a(i.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,l)}a((i=i.apply(e,t||[])).next())}))},r=kt&&kt.__generator||function(e,t){var n,i,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=r.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(l){s=[6,l],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},l=kt&&kt.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n},a=kt&&kt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.GraphQLWebSocketClient=e.gql=e.resolveRequestDocument=e.batchRequests=e.request=e.rawRequest=e.GraphQLClient=e.ClientError=void 0;var c=o(Xn),d=c,u=Wi,p=Fi,h=a(Ki),m=Bi,b=qi,Z=$i;Object.defineProperty(e,"ClientError",{enumerable:!0,get:function(){return Z.ClientError}});var g=function(e){var t={};return e&&("undefined"!=typeof Headers&&e instanceof Headers||e instanceof d.Headers?t=function(e){var t={};return e.forEach((function(e,n){t[n]=e})),t}(e):Array.isArray(e)?e.forEach((function(e){var n=e[0],i=e[1];t[n]=i})):t=e),t},y=function(e){return e.replace(/([\s,]|#[^\n\r]+)+/g," ").trim()},I=function(e){var n=e.url,i=e.query,o=e.variables,l=e.operationName,a=e.headers,c=e.fetch,d=e.fetchOptions;return s(void 0,void 0,void 0,(function(){var e;return r(this,(function(s){switch(s.label){case 0:return e=h.default(i,o,l,d.jsonSerializer),[4,c(n,t({method:"POST",headers:t(t({},"string"==typeof e?{"Content-Type":"application/json"}:{}),a),body:e},d))];case 1:return[2,s.sent()]}}))}))},f=function(e){var n=e.url,i=e.query,o=e.variables,l=e.operationName,a=e.headers,c=e.fetch,d=e.fetchOptions;return s(void 0,void 0,void 0,(function(){var e;return r(this,(function(s){switch(s.label){case 0:return e=function(e){var t=e.query,n=e.variables,i=e.operationName,o=e.jsonSerializer;if(!Array.isArray(t)){var s=["query="+encodeURIComponent(y(t))];return n&&s.push("variables="+encodeURIComponent(o.stringify(n))),i&&s.push("operationName="+encodeURIComponent(i)),s.join("&")}if(void 0!==n&&!Array.isArray(n))throw new Error("Cannot create query with given variable type, array expected");var r=t.reduce((function(e,t,i){return e.push({query:y(t),variables:n?o.stringify(n[i]):void 0}),e}),[]);return"query="+encodeURIComponent(o.stringify(r))}({query:i,variables:o,operationName:l,jsonSerializer:d.jsonSerializer}),[4,c(n+"?"+e,t({method:"GET",headers:a},d))];case 1:return[2,s.sent()]}}))}))},G=function(){function e(e,t){this.url=e,this.options=t||{}}return e.prototype.rawRequest=function(e,n,i){return s(this,void 0,void 0,(function(){var o,s,a,d,u,p,h,m,Z,y;return r(this,(function(r){return o=b.parseRawRequestArgs(e,n,i),s=this.options,a=s.headers,d=s.fetch,u=void 0===d?c.default:d,p=s.method,h=void 0===p?"POST":p,m=l(s,["headers","fetch","method"]),Z=this.url,void 0!==o.signal&&(m.signal=o.signal),y=R(o.query).operationName,[2,V({url:Z,query:o.query,variables:o.variables,headers:t(t({},g(v(a))),g(o.requestHeaders)),operationName:y,fetch:u,method:h,fetchOptions:m})]}))}))},e.prototype.request=function(e,n,i){return s(this,void 0,void 0,(function(){var o,s,a,d,u,p,h,m,Z,y,I,f;return r(this,(function(r){switch(r.label){case 0:return o=b.parseRequestArgs(e,n,i),s=this.options,a=s.headers,d=s.fetch,u=void 0===d?c.default:d,p=s.method,h=void 0===p?"POST":p,m=l(s,["headers","fetch","method"]),Z=this.url,void 0!==o.signal&&(m.signal=o.signal),y=R(o.document),I=y.query,f=y.operationName,[4,V({url:Z,query:I,variables:o.variables,headers:t(t({},g(v(a))),g(o.requestHeaders)),operationName:f,fetch:u,method:h,fetchOptions:m})];case 1:return[2,r.sent().data]}}))}))},e.prototype.batchRequests=function(e,n){return s(this,void 0,void 0,(function(){var i,o,s,a,d,u,p,h,m,Z,y;return r(this,(function(r){switch(r.label){case 0:return i=b.parseBatchRequestArgs(e,n),o=this.options,s=o.headers,a=o.fetch,d=void 0===a?c.default:a,u=o.method,p=void 0===u?"POST":u,h=l(o,["headers","fetch","method"]),m=this.url,void 0!==i.signal&&(h.signal=i.signal),Z=i.documents.map((function(e){return R(e.document).query})),y=i.documents.map((function(e){return e.variables})),[4,V({url:m,query:Z,variables:y,headers:t(t({},g(v(s))),g(i.requestHeaders)),operationName:void 0,fetch:d,method:p,fetchOptions:h})];case 1:return[2,r.sent().data]}}))}))},e.prototype.setHeaders=function(e){return this.options.headers=e,this},e.prototype.setHeader=function(e,t){var n,i=this.options.headers;return i?i[e]=t:this.options.headers=((n={})[e]=t,n),this},e.prototype.setEndpoint=function(e){return this.url=e,this},e}();function V(e){var n=e.url,i=e.query,o=e.variables,a=e.headers,c=e.operationName,d=e.fetch,u=e.method,p=void 0===u?"POST":u,h=e.fetchOptions;return s(this,void 0,void 0,(function(){var e,s,u,m,b,g,y,G,V,X,W;return r(this,(function(r){switch(r.label){case 0:return e="POST"===p.toUpperCase()?I:f,s=Array.isArray(i),[4,e({url:n,query:i,variables:o,operationName:c,headers:a,fetch:d,fetchOptions:h})];case 1:return[4,S(u=r.sent(),h.jsonSerializer)];case 2:if(m=r.sent(),b=s&&Array.isArray(m)?!m.some((function(e){return!e.data})):!!m.data,g=!m.errors||"all"===h.errorPolicy||"ignore"===h.errorPolicy,u.ok&&g&&b)return y=u.headers,G=u.status,V=l(m,["errors"]),X="ignore"===h.errorPolicy?V:m,[2,t(t({},s?{data:X}:X),{headers:y,status:G})];throw W="string"==typeof m?{error:m}:m,new Z.ClientError(t(t({},W),{status:u.status,headers:u.headers}),{query:i,variables:o})}}))}))}function X(e,n,i,o){return s(this,void 0,void 0,(function(){var s;return r(this,(function(r){return s=b.parseRequestExtendedArgs(e,n,i,o),[2,new G(s.url).request(t({},s))]}))}))}function S(e,t){return void 0===t&&(t=m.defaultJsonSerializer),s(this,void 0,void 0,(function(){var n,i,o;return r(this,(function(s){switch(s.label){case 0:return e.headers.forEach((function(e,t){"content-type"===t.toLowerCase()&&(n=e)})),n&&n.toLowerCase().startsWith("application/json")?(o=(i=t).parse,[4,e.text()]):[3,2];case 1:return[2,o.apply(i,[s.sent()])];case 2:return[2,e.text()]}}))}))}function W(e){var t,n=void 0,i=e.definitions.filter((function(e){return"OperationDefinition"===e.kind}));return 1===i.length&&(n=null===(t=i[0].name)||void 0===t?void 0:t.value),n}function R(e){if("string"==typeof e){var t=void 0;try{t=W(u.parse(e))}catch(i){}return{query:e,operationName:t}}var n=W(e);return{query:p.print(e),operationName:n}}function v(e){return"function"==typeof e?e():e}e.GraphQLClient=G,e.rawRequest=function(e,n,i,o){return s(this,void 0,void 0,(function(){var s;return r(this,(function(r){return s=b.parseRawRequestExtendedArgs(e,n,i,o),[2,new G(s.url).rawRequest(t({},s))]}))}))},e.request=X,e.batchRequests=function(e,n,i){return s(this,void 0,void 0,(function(){var o;return r(this,(function(s){return o=b.parseBatchRequestsExtendedArgs(e,n,i),[2,new G(o.url).batchRequests(t({},o))]}))}))},e.default=X,e.resolveRequestDocument=R,e.gql=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.reduce((function(e,n,i){return""+e+n+(i in t?t[i]:"")}),"")};var C=so();Object.defineProperty(e,"GraphQLWebSocketClient",{enumerable:!0,get:function(){return C.GraphQLWebSocketClient}})}(Gn)),Gn}var lo=ro(),ao=function(){return ao=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ao.apply(this,arguments)},co=new Map,uo=new Map,po=!0,ho=!1;function mo(e){return e.replace(/[\s,]+/g," ").trim()}function bo(e){var t=new Set,n=[];return e.definitions.forEach((function(e){if("FragmentDefinition"===e.kind){var i=e.name.value,o=mo((r=e.loc).source.body.substring(r.start,r.end)),s=uo.get(i);s&&!s.has(o)?po&&console.warn("Warning: fragment with name "+i+" already exists.\ngraphql-tag enforces all fragment names across your application to be unique; read more about\nthis in the docs: http://dev.apollodata.com/core/fragments.html#unique-names"):s||uo.set(i,s=new Set),s.add(o),t.has(o)||(t.add(o),n.push(e))}else n.push(e);var r})),ao(ao({},e),{definitions:n})}function Zo(e){var t=mo(e);if(!co.has(t)){var n=Gi(e,{experimentalFragmentVariables:ho,allowLegacyFragmentVariables:ho});if(!n||"Document"!==n.kind)throw new Error("Not a valid GraphQL document.");co.set(t,function(e){var t=new Set(e.definitions);t.forEach((function(e){e.loc&&delete e.loc,Object.keys(e).forEach((function(n){var i=e[n];i&&"object"==typeof i&&t.add(i)}))}));var n=e.loc;return n&&(delete n.startToken,delete n.endToken),e}(bo(n)))}return co.get(t)}function go(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];"string"==typeof e&&(e=[e]);var i=e[0];return t.forEach((function(t,n){t&&"Document"===t.kind?i+=t.loc.source.body:i+=t,i+=e[n+1]})),Zo(i)}var yo,Io=go,fo=function(){co.clear(),uo.clear()},Go=function(){po=!1},Vo=function(){ho=!0},Xo=function(){ho=!1};(yo=go||(go={})).gql=Io,yo.resetCaches=fo,yo.disableFragmentWarnings=Go,yo.enableExperimentalFragmentVariables=Vo,yo.disableExperimentalFragmentVariables=Xo,go.default=go;const So=go`
	mutation PushPayload(
		$session_secure_id: String!
		$events: ReplayEventsInput!
		$messages: String!
		$resources: String!
		$web_socket_events: String!
		$errors: [ErrorObjectInput]!
		$is_beacon: Boolean
		$has_session_unloaded: Boolean
		$highlight_logs: String
		$payload_id: ID
	) {
		pushPayload(
			session_secure_id: $session_secure_id
			events: $events
			messages: $messages
			resources: $resources
			web_socket_events: $web_socket_events
			errors: $errors
			is_beacon: $is_beacon
			has_session_unloaded: $has_session_unloaded
			highlight_logs: $highlight_logs
			payload_id: $payload_id
		)
	}
`,Wo=go`
	mutation identifySession(
		$session_secure_id: String!
		$user_identifier: String!
		$user_object: Any
	) {
		identifySession(
			session_secure_id: $session_secure_id
			user_identifier: $user_identifier
			user_object: $user_object
		)
	}
`,Ro=go`
	mutation addSessionProperties(
		$session_secure_id: String!
		$properties_object: Any
	) {
		addSessionProperties(
			session_secure_id: $session_secure_id
			properties_object: $properties_object
		)
	}
`,vo=go`
	mutation pushMetrics($metrics: [MetricInput]!) {
		pushMetrics(metrics: $metrics)
	}
`,Co=go`
	mutation addSessionFeedback(
		$session_secure_id: String!
		$user_name: String
		$user_email: String
		$verbatim: String!
		$timestamp: Timestamp!
	) {
		addSessionFeedback(
			session_secure_id: $session_secure_id
			user_name: $user_name
			user_email: $user_email
			verbatim: $verbatim
			timestamp: $timestamp
		)
	}
`,ko=go`
	mutation initializeSession(
		$session_secure_id: String!
		$organization_verbose_id: String!
		$enable_strict_privacy: Boolean!
		$privacy_setting: String!
		$enable_recording_network_contents: Boolean!
		$clientVersion: String!
		$firstloadVersion: String!
		$clientConfig: String!
		$environment: String!
		$id: String!
		$appVersion: String
		$serviceName: String!
		$client_id: String!
		$network_recording_domains: [String!]
		$disable_session_recording: Boolean
	) {
		initializeSession(
			session_secure_id: $session_secure_id
			organization_verbose_id: $organization_verbose_id
			enable_strict_privacy: $enable_strict_privacy
			enable_recording_network_contents: $enable_recording_network_contents
			clientVersion: $clientVersion
			firstloadVersion: $firstloadVersion
			clientConfig: $clientConfig
			environment: $environment
			appVersion: $appVersion
			serviceName: $serviceName
			fingerprint: $id
			client_id: $client_id
			network_recording_domains: $network_recording_domains
			disable_session_recording: $disable_session_recording
			privacy_setting: $privacy_setting
		) {
			secure_id
			project_id
		}
	}
`,No=go`
	query Ignore($id: ID!) {
		ignore(id: $id)
	}
`,Lo=(e,t,n)=>e();var wo,To={exports:{}},xo={exports:{}};function Jo(){return wo||(wo=1,function(e,t){e.exports=function(e){return{backtrace:function(t){var n=[],i=10;"object"==typeof t&&"number"==typeof t.maxStackSize&&(i=t.maxStackSize);for(var o=arguments.callee;o&&n.length<i&&o.arguments;){for(var s=new Array(o.arguments.length),r=0;r<s.length;++r)s[r]=o.arguments[r];/function(?:\s+([\w$]+))+\s*\(/.test(o.toString())?n.push(new e({functionName:RegExp.$1||void 0,args:s})):n.push(new e({args:s}));try{o=o.caller}catch(l){break}}return n}}}(Kt())}(xo)),xo.exports}var Yo,Uo={exports:{}},Fo={},Ko={};function Ho(){return Yo||(Yo=1,function(e){e.getArg=function(e,t,n){if(t in e)return e[t];if(3===arguments.length)return n;throw new Error('"'+t+'" is a required argument.')};var t=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,n=/^data:.+\,.+$/;function i(e){var n=e.match(t);return n?{scheme:n[1],auth:n[2],host:n[3],port:n[4],path:n[5]}:null}function o(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function s(t){var n=t,s=i(t);if(s){if(!s.path)return t;n=s.path}for(var r,l=e.isAbsolute(n),a=n.split(/\/+/),c=0,d=a.length-1;d>=0;d--)"."===(r=a[d])?a.splice(d,1):".."===r?c++:c>0&&(""===r?(a.splice(d+1,c),c=0):(a.splice(d,2),c--));return""===(n=a.join("/"))&&(n=l?"/":"."),s?(s.path=n,o(s)):n}e.urlParse=i,e.urlGenerate=o,e.normalize=s,e.join=function(e,t){""===e&&(e="."),""===t&&(t=".");var r=i(t),l=i(e);if(l&&(e=l.path||"/"),r&&!r.scheme)return l&&(r.scheme=l.scheme),o(r);if(r||t.match(n))return t;if(l&&!l.host&&!l.path)return l.host=t,o(l);var a="/"===t.charAt(0)?t:s(e.replace(/\/+$/,"")+"/"+t);return l?(l.path=a,o(l)):a},e.isAbsolute=function(e){return"/"===e.charAt(0)||!!e.match(t)},e.relative=function(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");for(var n=0;0!==t.indexOf(e+"/");){var i=e.lastIndexOf("/");if(i<0)return t;if((e=e.slice(0,i)).match(/^([^\/]+:\/)?\/*$/))return t;++n}return Array(n+1).join("../")+t.substr(e.length+1)};var r=!("__proto__"in Object.create(null));function l(e){return e}function a(e){if(!e)return!1;var t=e.length;if(t<9)return!1;if(95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(var n=t-10;n>=0;n--)if(36!==e.charCodeAt(n))return!1;return!0}function c(e,t){return e===t?0:e>t?1:-1}e.toSetString=r?l:function(e){return a(e)?"$"+e:e},e.fromSetString=r?l:function(e){return a(e)?e.slice(1):e},e.compareByOriginalPositions=function(e,t,n){var i=e.source-t.source;return 0!==i||0!==(i=e.originalLine-t.originalLine)||0!==(i=e.originalColumn-t.originalColumn)||n||0!==(i=e.generatedColumn-t.generatedColumn)||0!==(i=e.generatedLine-t.generatedLine)?i:e.name-t.name},e.compareByGeneratedPositionsDeflated=function(e,t,n){var i=e.generatedLine-t.generatedLine;return 0!==i||0!==(i=e.generatedColumn-t.generatedColumn)||n||0!==(i=e.source-t.source)||0!==(i=e.originalLine-t.originalLine)||0!==(i=e.originalColumn-t.originalColumn)?i:e.name-t.name},e.compareByGeneratedPositionsInflated=function(e,t){var n=e.generatedLine-t.generatedLine;return 0!==n||0!==(n=e.generatedColumn-t.generatedColumn)||0!==(n=c(e.source,t.source))||0!==(n=e.originalLine-t.originalLine)||0!==(n=e.originalColumn-t.originalColumn)?n:c(e.name,t.name)}}(Ko)),Ko}var Eo,Oo={};function zo(){return Eo||(Eo=1,function(e){function t(n,i,o,s,r,l){var a=Math.floor((i-n)/2)+n,c=r(o,s[a],!0);return 0===c?a:c>0?i-a>1?t(a,i,o,s,r,l):l==e.LEAST_UPPER_BOUND?i<s.length?i:-1:a:a-n>1?t(n,a,o,s,r,l):l==e.LEAST_UPPER_BOUND?a:n<0?-1:n}e.GREATEST_LOWER_BOUND=1,e.LEAST_UPPER_BOUND=2,e.search=function(n,i,o,s){if(0===i.length)return-1;var r=t(-1,i.length,n,i,o,s||e.GREATEST_LOWER_BOUND);if(r<0)return-1;for(;r-1>=0&&0===o(i[r],i[r-1],!0);)--r;return r}}(Oo)),Oo}var Mo,Ao={};var Bo,Po,Do={},Qo={};function jo(){if(Po)return Do;Po=1;var e=function(){if(Bo)return Qo;Bo=1;var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");return Qo.encode=function(t){if(0<=t&&t<e.length)return e[t];throw new TypeError("Must be between 0 and 63: "+t)},Qo.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1},Qo}();return Do.encode=function(t){var n,i="",o=function(e){return e<0?1+(-e<<1):0+(e<<1)}(t);do{n=31&o,(o>>>=5)>0&&(n|=32),i+=e.encode(n)}while(o>0);return i},Do.decode=function(t,n,i){var o,s,r,l,a=t.length,c=0,d=0;do{if(n>=a)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(s=e.decode(t.charCodeAt(n++))))throw new Error("Invalid base64 digit: "+t.charAt(n-1));o=!!(32&s),c+=(s&=31)<<d,d+=5}while(o);i.value=(l=(r=c)>>1,1==(1&r)?-l:l),i.rest=n},Do}var _o,qo,$o,es={};function ts(){if(_o)return es;function e(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function t(n,i,o,s){if(o<s){var r=o-1;e(n,(d=o,u=s,Math.round(d+Math.random()*(u-d))),s);for(var l=n[s],a=o;a<s;a++)i(n[a],l)<=0&&e(n,r+=1,a);e(n,r+1,a);var c=r+1;t(n,i,o,c-1),t(n,i,c+1,s)}var d,u}return _o=1,es.quickSort=function(e,n){t(e,n,0,e.length-1)},es}function ns(){if(qo)return Fo;qo=1;var e=Ho(),t=zo(),n=function(){if(Mo)return Ao;Mo=1;var e=Ho(),t=Object.prototype.hasOwnProperty;function n(){this._array=[],this._set=Object.create(null)}return n.fromArray=function(e,t){for(var i=new n,o=0,s=e.length;o<s;o++)i.add(e[o],t);return i},n.prototype.size=function(){return Object.getOwnPropertyNames(this._set).length},n.prototype.add=function(n,i){var o=e.toSetString(n),s=t.call(this._set,o),r=this._array.length;s&&!i||this._array.push(n),s||(this._set[o]=r)},n.prototype.has=function(n){var i=e.toSetString(n);return t.call(this._set,i)},n.prototype.indexOf=function(n){var i=e.toSetString(n);if(t.call(this._set,i))return this._set[i];throw new Error('"'+n+'" is not in the set.')},n.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},n.prototype.toArray=function(){return this._array.slice()},Ao.ArraySet=n,Ao}().ArraySet,i=jo(),o=ts().quickSort;function s(e){var t=e;return"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,""))),null!=t.sections?new a(t):new r(t)}function r(t){var i=t;"string"==typeof t&&(i=JSON.parse(t.replace(/^\)\]\}'/,"")));var o=e.getArg(i,"version"),s=e.getArg(i,"sources"),r=e.getArg(i,"names",[]),l=e.getArg(i,"sourceRoot",null),a=e.getArg(i,"sourcesContent",null),c=e.getArg(i,"mappings"),d=e.getArg(i,"file",null);if(o!=this._version)throw new Error("Unsupported version: "+o);s=s.map(String).map(e.normalize).map((function(t){return l&&e.isAbsolute(l)&&e.isAbsolute(t)?e.relative(l,t):t})),this._names=n.fromArray(r.map(String),!0),this._sources=n.fromArray(s,!0),this.sourceRoot=l,this.sourcesContent=a,this._mappings=c,this.file=d}function l(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function a(t){var i=t;"string"==typeof t&&(i=JSON.parse(t.replace(/^\)\]\}'/,"")));var o=e.getArg(i,"version"),r=e.getArg(i,"sections");if(o!=this._version)throw new Error("Unsupported version: "+o);this._sources=new n,this._names=new n;var l={line:-1,column:0};this._sections=r.map((function(t){if(t.url)throw new Error("Support for url field in sections not implemented.");var n=e.getArg(t,"offset"),i=e.getArg(n,"line"),o=e.getArg(n,"column");if(i<l.line||i===l.line&&o<l.column)throw new Error("Section offsets must be ordered and non-overlapping.");return l=n,{generatedOffset:{generatedLine:i+1,generatedColumn:o+1},consumer:new s(e.getArg(t,"map"))}}))}return s.fromSourceMap=function(e){return r.fromSourceMap(e)},s.prototype._version=3,s.prototype.__generatedMappings=null,Object.defineProperty(s.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),s.prototype.__originalMappings=null,Object.defineProperty(s.prototype,"_originalMappings",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),s.prototype._charIsMappingSeparator=function(e,t){var n=e.charAt(t);return";"===n||","===n},s.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")},s.GENERATED_ORDER=1,s.ORIGINAL_ORDER=2,s.GREATEST_LOWER_BOUND=1,s.LEAST_UPPER_BOUND=2,s.prototype.eachMapping=function(t,n,i){var o,r=n||null;switch(i||s.GENERATED_ORDER){case s.GENERATED_ORDER:o=this._generatedMappings;break;case s.ORIGINAL_ORDER:o=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var l=this.sourceRoot;o.map((function(t){var n=null===t.source?null:this._sources.at(t.source);return null!=n&&null!=l&&(n=e.join(l,n)),{source:n,generatedLine:t.generatedLine,generatedColumn:t.generatedColumn,originalLine:t.originalLine,originalColumn:t.originalColumn,name:null===t.name?null:this._names.at(t.name)}}),this).forEach(t,r)},s.prototype.allGeneratedPositionsFor=function(n){var i=e.getArg(n,"line"),o={source:e.getArg(n,"source"),originalLine:i,originalColumn:e.getArg(n,"column",0)};if(null!=this.sourceRoot&&(o.source=e.relative(this.sourceRoot,o.source)),!this._sources.has(o.source))return[];o.source=this._sources.indexOf(o.source);var s=[],r=this._findMapping(o,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,t.LEAST_UPPER_BOUND);if(r>=0){var l=this._originalMappings[r];if(void 0===n.column)for(var a=l.originalLine;l&&l.originalLine===a;)s.push({line:e.getArg(l,"generatedLine",null),column:e.getArg(l,"generatedColumn",null),lastColumn:e.getArg(l,"lastGeneratedColumn",null)}),l=this._originalMappings[++r];else for(var c=l.originalColumn;l&&l.originalLine===i&&l.originalColumn==c;)s.push({line:e.getArg(l,"generatedLine",null),column:e.getArg(l,"generatedColumn",null),lastColumn:e.getArg(l,"lastGeneratedColumn",null)}),l=this._originalMappings[++r]}return s},Fo.SourceMapConsumer=s,r.prototype=Object.create(s.prototype),r.prototype.consumer=s,r.fromSourceMap=function(t){var i=Object.create(r.prototype),s=i._names=n.fromArray(t._names.toArray(),!0),a=i._sources=n.fromArray(t._sources.toArray(),!0);i.sourceRoot=t._sourceRoot,i.sourcesContent=t._generateSourcesContent(i._sources.toArray(),i.sourceRoot),i.file=t._file;for(var c=t._mappings.toArray().slice(),d=i.__generatedMappings=[],u=i.__originalMappings=[],p=0,h=c.length;p<h;p++){var m=c[p],b=new l;b.generatedLine=m.generatedLine,b.generatedColumn=m.generatedColumn,m.source&&(b.source=a.indexOf(m.source),b.originalLine=m.originalLine,b.originalColumn=m.originalColumn,m.name&&(b.name=s.indexOf(m.name)),u.push(b)),d.push(b)}return o(i.__originalMappings,e.compareByOriginalPositions),i},r.prototype._version=3,Object.defineProperty(r.prototype,"sources",{get:function(){return this._sources.toArray().map((function(t){return null!=this.sourceRoot?e.join(this.sourceRoot,t):t}),this)}}),r.prototype._parseMappings=function(t,n){for(var s,r,a,c,d,u=1,p=0,h=0,m=0,b=0,Z=0,g=t.length,y=0,I={},f={},G=[],V=[];y<g;)if(";"===t.charAt(y))u++,y++,p=0;else if(","===t.charAt(y))y++;else{for((s=new l).generatedLine=u,c=y;c<g&&!this._charIsMappingSeparator(t,c);c++);if(a=I[r=t.slice(y,c)])y+=r.length;else{for(a=[];y<c;)i.decode(t,y,f),d=f.value,y=f.rest,a.push(d);if(2===a.length)throw new Error("Found a source, but no line and column");if(3===a.length)throw new Error("Found a source and line, but no column");I[r]=a}s.generatedColumn=p+a[0],p=s.generatedColumn,a.length>1&&(s.source=b+a[1],b+=a[1],s.originalLine=h+a[2],h=s.originalLine,s.originalLine+=1,s.originalColumn=m+a[3],m=s.originalColumn,a.length>4&&(s.name=Z+a[4],Z+=a[4])),V.push(s),"number"==typeof s.originalLine&&G.push(s)}o(V,e.compareByGeneratedPositionsDeflated),this.__generatedMappings=V,o(G,e.compareByOriginalPositions),this.__originalMappings=G},r.prototype._findMapping=function(e,n,i,o,s,r){if(e[i]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[i]);if(e[o]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[o]);return t.search(e,n,s,r)},r.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(t.generatedLine===n.generatedLine){t.lastGeneratedColumn=n.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},r.prototype.originalPositionFor=function(t){var n={generatedLine:e.getArg(t,"line"),generatedColumn:e.getArg(t,"column")},i=this._findMapping(n,this._generatedMappings,"generatedLine","generatedColumn",e.compareByGeneratedPositionsDeflated,e.getArg(t,"bias",s.GREATEST_LOWER_BOUND));if(i>=0){var o=this._generatedMappings[i];if(o.generatedLine===n.generatedLine){var r=e.getArg(o,"source",null);null!==r&&(r=this._sources.at(r),null!=this.sourceRoot&&(r=e.join(this.sourceRoot,r)));var l=e.getArg(o,"name",null);return null!==l&&(l=this._names.at(l)),{source:r,line:e.getArg(o,"originalLine",null),column:e.getArg(o,"originalColumn",null),name:l}}}return{source:null,line:null,column:null,name:null}},r.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some((function(e){return null==e})))},r.prototype.sourceContentFor=function(t,n){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(t=e.relative(this.sourceRoot,t)),this._sources.has(t))return this.sourcesContent[this._sources.indexOf(t)];var i;if(null!=this.sourceRoot&&(i=e.urlParse(this.sourceRoot))){var o=t.replace(/^file:\/\//,"");if("file"==i.scheme&&this._sources.has(o))return this.sourcesContent[this._sources.indexOf(o)];if((!i.path||"/"==i.path)&&this._sources.has("/"+t))return this.sourcesContent[this._sources.indexOf("/"+t)]}if(n)return null;throw new Error('"'+t+'" is not in the SourceMap.')},r.prototype.generatedPositionFor=function(t){var n=e.getArg(t,"source");if(null!=this.sourceRoot&&(n=e.relative(this.sourceRoot,n)),!this._sources.has(n))return{line:null,column:null,lastColumn:null};var i={source:n=this._sources.indexOf(n),originalLine:e.getArg(t,"line"),originalColumn:e.getArg(t,"column")},o=this._findMapping(i,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,e.getArg(t,"bias",s.GREATEST_LOWER_BOUND));if(o>=0){var r=this._originalMappings[o];if(r.source===i.source)return{line:e.getArg(r,"generatedLine",null),column:e.getArg(r,"generatedColumn",null),lastColumn:e.getArg(r,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},Fo.BasicSourceMapConsumer=r,a.prototype=Object.create(s.prototype),a.prototype.constructor=s,a.prototype._version=3,Object.defineProperty(a.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var n=0;n<this._sections[t].consumer.sources.length;n++)e.push(this._sections[t].consumer.sources[n]);return e}}),a.prototype.originalPositionFor=function(n){var i={generatedLine:e.getArg(n,"line"),generatedColumn:e.getArg(n,"column")},o=t.search(i,this._sections,(function(e,t){var n=e.generatedLine-t.generatedOffset.generatedLine;return n||e.generatedColumn-t.generatedOffset.generatedColumn})),s=this._sections[o];return s?s.consumer.originalPositionFor({line:i.generatedLine-(s.generatedOffset.generatedLine-1),column:i.generatedColumn-(s.generatedOffset.generatedLine===i.generatedLine?s.generatedOffset.generatedColumn-1:0),bias:n.bias}):{source:null,line:null,column:null,name:null}},a.prototype.hasContentsOfAllSources=function(){return this._sections.every((function(e){return e.consumer.hasContentsOfAllSources()}))},a.prototype.sourceContentFor=function(e,t){for(var n=0;n<this._sections.length;n++){var i=this._sections[n].consumer.sourceContentFor(e,!0);if(i)return i}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},a.prototype.generatedPositionFor=function(t){for(var n=0;n<this._sections.length;n++){var i=this._sections[n];if(-1!==i.consumer.sources.indexOf(e.getArg(t,"source"))){var o=i.consumer.generatedPositionFor(t);if(o)return{line:o.line+(i.generatedOffset.generatedLine-1),column:o.column+(i.generatedOffset.generatedLine===o.line?i.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},a.prototype._parseMappings=function(t,n){this.__generatedMappings=[],this.__originalMappings=[];for(var i=0;i<this._sections.length;i++)for(var s=this._sections[i],r=s.consumer._generatedMappings,l=0;l<r.length;l++){var a=r[l],c=s.consumer._sources.at(a.source);null!==s.consumer.sourceRoot&&(c=e.join(s.consumer.sourceRoot,c)),this._sources.add(c),c=this._sources.indexOf(c);var d=s.consumer._names.at(a.name);this._names.add(d),d=this._names.indexOf(d);var u={source:c,generatedLine:a.generatedLine+(s.generatedOffset.generatedLine-1),generatedColumn:a.generatedColumn+(s.generatedOffset.generatedLine===a.generatedLine?s.generatedOffset.generatedColumn-1:0),originalLine:a.originalLine,originalColumn:a.originalColumn,name:d};this.__generatedMappings.push(u),"number"==typeof u.originalLine&&this.__originalMappings.push(u)}o(this.__generatedMappings,e.compareByGeneratedPositionsDeflated),o(this.__originalMappings,e.compareByOriginalPositions)},Fo.IndexedSourceMapConsumer=a,Fo}function is(){return $o||($o=1,function(e,t){e.exports=function(e,t){function n(e){return new Promise((function(t,n){var i=new XMLHttpRequest;i.open("get",e),i.onerror=n,i.onreadystatechange=function(){4===i.readyState&&(i.status>=200&&i.status<300||"file://"===e.substr(0,7)&&i.responseText?t(i.responseText):n(new Error("HTTP status: "+i.status+" retrieving "+e)))},i.send()}))}function i(e){if("undefined"!=typeof window&&window.atob)return window.atob(e);throw new Error("You must supply a polyfill for window.atob in this environment")}function o(e){if("undefined"!=typeof JSON&&JSON.parse)return JSON.parse(e);throw new Error("You must supply a polyfill for JSON.parse in this environment")}function s(e,t){for(var n=[/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/,/function\s+([^('"`]*?)\s*\(([^)]*)\)/,/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/,/\b(?!(?:if|for|switch|while|with|catch)\b)(?:(?:static)\s+)?(\S+)\s*\(.*?\)\s*\{/,/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*\(.*?\)\s*=>/],i=e.split("\n"),o="",s=Math.min(t,20),r=0;r<s;++r){var l=i[t-r-1],a=l.indexOf("//");if(a>=0&&(l=l.substr(0,a)),l){o=l+o;for(var c=n.length,d=0;d<c;d++){var u=n[d].exec(o);if(u&&u[1])return u[1]}}}}function r(){if("function"!=typeof Object.defineProperty||"function"!=typeof Object.create)throw new Error("Unable to consume source maps in older browsers")}function l(e){if("object"!=typeof e)throw new TypeError("Given StackFrame is not an object");if("string"!=typeof e.fileName)throw new TypeError("Given file name is not a String");if("number"!=typeof e.lineNumber||e.lineNumber%1!=0||e.lineNumber<1)throw new TypeError("Given line number must be a positive integer");if("number"!=typeof e.columnNumber||e.columnNumber%1!=0||e.columnNumber<0)throw new TypeError("Given column number must be a non-negative integer");return!0}function a(e){for(var t,n,i=/\/\/[#@] ?sourceMappingURL=([^\s'"]+)\s*$/gm;n=i.exec(e);)t=n[1];if(t)return t;throw new Error("sourceMappingURL not found")}function c(e,n,i){return new Promise((function(o,s){var r=n.originalPositionFor({line:e.lineNumber,column:e.columnNumber});if(r.source){var l=n.sourceContentFor(r.source);l&&(i[r.source]=l),o(new t({functionName:r.name||e.functionName,args:e.args,fileName:r.source,lineNumber:r.line,columnNumber:r.column}))}else s(new Error("Could not get original source for given stackframe and source map"))}))}return function d(u){if(!(this instanceof d))return new d(u);u=u||{},this.sourceCache=u.sourceCache||{},this.sourceMapConsumerCache=u.sourceMapConsumerCache||{},this.ajax=u.ajax||n,this._atob=u.atob||i,this._get=function(e){return new Promise(function(t,n){var i="data:"===e.substr(0,5);if(this.sourceCache[e])t(this.sourceCache[e]);else if(u.offline&&!i)n(new Error("Cannot make network requests in offline mode"));else if(i){var o=/^data:application\/json;([\w=:"-]+;)*base64,/,s=e.match(o);if(s){var r=s[0].length,l=e.substr(r),a=this._atob(l);this.sourceCache[e]=a,t(a)}else n(new Error("The encoding of the inline sourcemap is not supported"))}else{var c=this.ajax(e,{method:"get"});this.sourceCache[e]=c,c.then(t,n)}}.bind(this))},this._getSourceMapConsumer=function(t,n){return new Promise(function(i){if(this.sourceMapConsumerCache[t])i(this.sourceMapConsumerCache[t]);else{var s=new Promise(function(i,s){return this._get(t).then((function(t){"string"==typeof t&&(t=o(t.replace(/^\)\]\}'/,""))),void 0===t.sourceRoot&&(t.sourceRoot=n),i(new e.SourceMapConsumer(t))}),s)}.bind(this));this.sourceMapConsumerCache[t]=s,i(s)}}.bind(this))},this.pinpoint=function(e){return new Promise(function(t,n){this.getMappedLocation(e).then(function(e){function n(){t(e)}this.findFunctionName(e).then(t,n).catch(n)}.bind(this),n)}.bind(this))},this.findFunctionName=function(e){return new Promise(function(n,i){l(e),this._get(e.fileName).then((function(i){var o=e.lineNumber,r=e.columnNumber,l=s(i,o);n(l?new t({functionName:l,args:e.args,fileName:e.fileName,lineNumber:o,columnNumber:r}):e)}),i).catch(i)}.bind(this))},this.getMappedLocation=function(e){return new Promise(function(t,n){r(),l(e);var i=this.sourceCache,o=e.fileName;this._get(o).then(function(n){var s=a(n),r="data:"===s.substr(0,5),l=o.substring(0,o.lastIndexOf("/")+1);return"/"===s[0]||r||/^https?:\/\/|^\/\//i.test(s)||(s=l+s),this._getSourceMapConsumer(s,l).then((function(n){return c(e,n,i).then(t).catch((function(){t(e)}))}))}.bind(this),n).catch(n)}.bind(this))}}}(ns(),Kt())}(Uo)),Uo.exports}!function(e,t){e.exports=function(e,t,n){var i={filter:function(e){return-1===(e.functionName||"").indexOf("StackTrace$$")&&-1===(e.functionName||"").indexOf("ErrorStackParser$$")&&-1===(e.functionName||"").indexOf("StackTraceGPS$$")&&-1===(e.functionName||"").indexOf("StackGenerator$$")},sourceCache:{}},o=function(){try{throw new Error}catch(e){return e}};function s(e,t){var n={};return[e,t].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n})),n}function r(e){return e.stack||e["opera#sourceloc"]}function l(e,t){return"function"==typeof t?e.filter(t):e}return{get:function(e){var t=o();return r(t)?this.fromError(t,e):this.generateArtificially(e)},getSync:function(n){n=s(i,n);var a=o();return l(r(a)?e.parse(a):t.backtrace(n),n.filter)},fromError:function(t,o){o=s(i,o);var r=new n(o);return new Promise(function(n){var i=l(e.parse(t),o.filter);n(Promise.all(i.map((function(e){return new Promise((function(t){function n(){t(e)}r.pinpoint(e).then(t,n).catch(n)}))}))))}.bind(this))},generateArtificially:function(e){e=s(i,e);var n=t.backtrace(e);return"function"==typeof e.filter&&(n=n.filter(e.filter)),Promise.resolve(n)},instrument:function(e,t,n,i){if("function"!=typeof e)throw new Error("Cannot instrument non-function object");if("function"==typeof e.__stacktraceOriginalFn)return e;var o=function(){try{return this.get().then(t,n).catch(n),e.apply(i||this,arguments)}catch(o){throw r(o)&&this.fromError(o).then(t,n).catch(n),o}}.bind(this);return o.__stacktraceOriginalFn=e,o},deinstrument:function(e){if("function"!=typeof e)throw new Error("Cannot de-instrument non-function object");return"function"==typeof e.__stacktraceOriginalFn?e.__stacktraceOriginalFn:e},report:function(e,t,n,i){return new Promise((function(o,s){var r=new XMLHttpRequest;if(r.onerror=s,r.onreadystatechange=function(){4===r.readyState&&(r.status>=200&&r.status<400?o(r.responseText):s(new Error("POST to "+t+" failed with status: "+r.status)))},r.open("post",t),r.setRequestHeader("Content-Type","application/json"),i&&"object"==typeof i.headers){var l=i.headers;for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&r.setRequestHeader(a,l[a])}var c={stack:e};null!=n&&(c.message=n),r.send(JSON.stringify(c))}))}}}(Ht,Jo(),is())}(To);const os=Nt(To.exports);var ss=(e=>(e.RECORDING_START_TIME="highlightRecordingStartTime",e.SEGMENT_LAST_SENT_HASH_KEY="HIGHLIGHT_SEGMENT_LAST_SENT_HASH_KEY",e.SESSION_DATA="sessionData",e.SESSION_SECURE_ID="sessionSecureID",e.USER_IDENTIFIER="highlightIdentifier",e.USER_OBJECT="highlightUserObject",e.PAYLOAD_ID="payloadId",e))(ss||{});let rs="localStorage";let ls=new class{constructor(){h(this,"storage",{})}getItem(e){var t;return null!=(t=this.storage[e])?t:""}setItem(e,t){this.storage[e]=t}removeItem(e){delete this.storage[e]}};const as=()=>{try{switch(rs){case"localStorage":return window.localStorage;case"sessionStorage":return window.sessionStorage}}catch(e){return ls}},cs=e=>as().getItem(e),ds=(e,t)=>as().setItem(e,t),us=e=>as().removeItem(e),ps=e=>{if("sessionStorage"===rs)return void console.warn("highlight.io cannot use local storage; segment integration will not work");const t=window.localStorage.setItem;window.localStorage.setItem=function(){const[n,i]=arguments;e({keyName:n,keyValue:i}),t.apply(this,[n,i])}},hs=e=>{e(window.location.href);var t=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(n){setTimeout((()=>{var t,i;try{i=JSON.parse(null!=(t=null==n?void 0:n.toString())?t:"")}catch(o){return}"track"!==i.type&&"identify"!==i.type||bs(i)&&e(i)}),100),t.call(this,n)};const n=t=>{if("ajs_user_id"===t.key||"ajs_anonymous_id"===t.key||"ajs_user_traits"===t.key){const{userId:t,userTraits:n}=ms();if(t){let i={};n&&(i=JSON.parse(n));const o={type:"identify",userId:t.toString(),traits:i};bs(o)&&e(o)}}},{userId:i,userTraits:o}=ms();if(i){let t={};o&&(t=JSON.parse(o));const n={type:"identify",userId:i.toString(),traits:t};bs(n)&&e(n)}return window.addEventListener("storage",n),ps((({keyName:e})=>{n({key:e})})),()=>{window.removeEventListener("storage",n),XMLHttpRequest.prototype.send=t}},ms=()=>({userId:cs("ajs_user_id"),userTraits:cs("ajs_user_traits"),anonymousId:cs("ajs_anonymous_id")}),bs=e=>{if(!Boolean(e))return!1;let t="";try{t=JSON.stringify(e)}catch(o){return!1}const n=Zs(t),i=cs(ss.SEGMENT_LAST_SENT_HASH_KEY);return(void 0===i||n!==i)&&(ds(ss.SEGMENT_LAST_SENT_HASH_KEY,n),!0)},Zs=e=>{var t=0,n=e.length,i=0;if(n>0)for(;i<n;)t=(t<<5)-t+e.charCodeAt(i++)|0;return t.toString()};function gs(e,t){return e.nodeType,Node.ELEMENT_NODE,Is(e)}function ys(e){if(e.id.length)return`#${e.id}`;if(e.classList.length){let t=[];for(const n of e.classList)t.push(`.${n}`);return`${e.nodeName.toLowerCase()}${t.join(",")}`}return e.nodeName.toLowerCase()}const Is=e=>{let t="";const n=e.getAttribute("class"),i=e.getAttribute("id");return i&&(t=t.concat(fs(i,"#"))),n&&(t=t.concat(fs(n,"."))),""===t&&(t=t.concat(e.tagName.toLowerCase())),t},fs=(e,t)=>`${t}${e.trim().split(" ").join(t)}`,Gs=(e,t)=>{const n=function(e){"string"!=typeof e&&(e="");const t=(e=e.replace(/\s/g,"")).split(",");let n=t.lastIndexOf("");for(;n>=0;)t[n-1]+=",",t.splice(n,1),n=t.lastIndexOf("");return t}(e);let i=[];for(let l=0;l<n.length;l++){let e=n[l].split("+");i=[],e.length>1&&(i=Ns(Cs,e)),e=e[e.length-1],e="*"===e?"*":ks(e),e in Xs||(Xs[e]=[]),Xs[e].push({mods:i,shortcut:n[l],key:n[l],method:t,keyup:false,keydown:true,scope:"all",splitKey:"+"})}var o,s,r;o=document,s="keydown",r=e=>{!function(e){const t=Xs["*"];let n=e.keyCode||e.which||e.charCode;if(93!==n&&224!==n||(n=91),-1===Vs.indexOf(n)&&229!==n&&Vs.push(n),["ctrlKey","altKey","shiftKey","metaKey"].forEach((t=>{const n=Rs[t];e[t]&&-1===Vs.indexOf(n)?Vs.push(n):!e[t]&&Vs.indexOf(n)>-1?Vs.splice(Vs.indexOf(n),1):"metaKey"===t&&e[t]&&3===Vs.length&&(e.ctrlKey||e.shiftKey||e.altKey||(Vs=Vs.slice(Vs.indexOf(n))))})),!(n in vs)||(vs[n]=!0,t)){for(const t in vs)Object.prototype.hasOwnProperty.call(vs,t)&&(vs[t]=e[Rs[t]]);if(e.getModifierState&&(!e.altKey||e.ctrlKey)&&e.getModifierState("AltGraph")&&(-1===Vs.indexOf(17)&&Vs.push(17),-1===Vs.indexOf(18)&&Vs.push(18),vs[17]=!0,vs[18]=!0),n in Xs)for(let t=0;t<Xs[n].length;t++)if(("keydown"===e.type&&Xs[n][t].keydown||"keyup"===e.type&&Xs[n][t].keyup)&&Xs[n][t].key){const i=Xs[n][t];Ls(e,i,"all")}}}(e)},o.addEventListener?o.addEventListener(s,r,!1):o.attachEvent&&o.attachEvent(`on${s}`,(()=>{r(window.event)}))};let Vs=[];const Xs={},Ss="undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>0,Ws={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"":20,",":188,".":190,"/":191,"`":192,"-":Ss?173:189,"=":Ss?61:187,";":Ss?59:186,"'":222,"[":219,"]":221,"\\":220},Rs={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},vs={16:!1,18:!1,17:!1,91:!1},Cs={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,cmd:91,command:91},ks=e=>Ws[e.toLowerCase()]||Cs[e.toLowerCase()]||e.toUpperCase().charCodeAt(0);function Ns(e,t){const n=t.slice(0,t.length-1);for(let i=0;i<n.length;i++)n[i]=e[n[i].toLowerCase()];return n}function Ls(e,t,n){let i;if(t.scope===n||"all"===t.scope){i=t.mods.length>0;for(const e in vs)Object.prototype.hasOwnProperty.call(vs,e)&&(!vs[e]&&t.mods.indexOf(+e)>-1||vs[e]&&-1===t.mods.indexOf(+e))&&(i=!1);(0!==t.mods.length||vs[16]||vs[18]||vs[17]||vs[91])&&!i&&"*"!==t.shortcut||!1===t.method(e,t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}var ws,Ts,xs,Js,Ys,Us=-1,Fs=function(e){addEventListener("pageshow",(function(t){t.persisted&&(Us=t.timeStamp,e(t))}),!0)},Ks=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},Hs=function(){var e=Ks();return e&&e.activationStart||0},Es=function(e,t){var n=Ks(),i="navigate";return Us>=0?i="back-forward-cache":n&&(i=document.prerendering||Hs()>0?"prerender":document.wasDiscarded?"restore":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:i}},Os=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var i=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return i.observe(Object.assign({type:e,buffered:!0},n||{})),i}}catch(o){}},zs=function(e,t,n,i){var o,s;return function(r){var l,a;t.value>=0&&(r||i)&&((s=t.value-(o||0))||void 0===o)&&(o=t.value,t.delta=s,t.rating=(l=t.value)>(a=n)[1]?"poor":l>a[0]?"needs-improvement":"good",e(t))}},Ms=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},As=function(e){var t=function(t){"pagehide"!==t.type&&"hidden"!==document.visibilityState||e(t)};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},Bs=function(e){var t=!1;return function(n){t||(e(n),t=!0)}},Ps=-1,Ds=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},Qs=function(e){"hidden"===document.visibilityState&&Ps>-1&&(Ps="visibilitychange"===e.type?e.timeStamp:0,_s())},js=function(){addEventListener("visibilitychange",Qs,!0),addEventListener("prerenderingchange",Qs,!0)},_s=function(){removeEventListener("visibilitychange",Qs,!0),removeEventListener("prerenderingchange",Qs,!0)},qs=function(){return Ps<0&&(Ps=Ds(),js(),Fs((function(){setTimeout((function(){Ps=Ds(),js()}),0)}))),{get firstHiddenTime(){return Ps}}},$s=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},er=[1800,3e3],tr=function(e,t){t=t||{},$s((function(){var n,i=qs(),o=Es("FCP"),s=Os("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(s.disconnect(),e.startTime<i.firstHiddenTime&&(o.value=Math.max(e.startTime-Hs(),0),o.entries.push(e),n(!0)))}))}));s&&(n=zs(e,o,er,t.reportAllChanges),Fs((function(i){o=Es("FCP"),n=zs(e,o,er,t.reportAllChanges),Ms((function(){o.value=performance.now()-i.timeStamp,n(!0)}))})))}))},nr=[.1,.25],ir={passive:!0,capture:!0},or=new Date,sr=function(e,t){ws||(ws=t,Ts=e,xs=new Date,ar(removeEventListener),rr())},rr=function(){if(Ts>=0&&Ts<xs-or){var e={entryType:"first-input",name:ws.type,target:ws.target,cancelable:ws.cancelable,startTime:ws.timeStamp,processingStart:ws.timeStamp+Ts};Js.forEach((function(t){t(e)})),Js=[]}},lr=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?(n=t,i=e,o=function(){sr(n,i),r()},s=function(){r()},r=function(){removeEventListener("pointerup",o,ir),removeEventListener("pointercancel",s,ir)},addEventListener("pointerup",o,ir),addEventListener("pointercancel",s,ir)):sr(t,e)}var n,i,o,s,r},ar=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,lr,ir)}))},cr=[100,300],dr=0,ur=1/0,pr=0,hr=function(e){e.forEach((function(e){e.interactionId&&(ur=Math.min(ur,e.interactionId),pr=Math.max(pr,e.interactionId),dr=pr?(pr-ur)/7+1:0)}))},mr=function(){return Ys?dr:performance.interactionCount||0},br=[200,500],Zr=0,gr=function(){return mr()-Zr},yr=[],Ir={},fr=function(e){var t=yr[yr.length-1],n=Ir[e.interactionId];if(n||yr.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{var i={id:e.interactionId,latency:e.duration,entries:[e]};Ir[i.id]=i,yr.push(i)}yr.sort((function(e,t){return t.latency-e.latency})),yr.splice(10).forEach((function(e){delete Ir[e.id]}))}},Gr=function(e,t){t=t||{},$s((function(){"interactionCount"in performance||Ys||(Ys=Os("event",hr,{type:"event",buffered:!0,durationThreshold:0}));var n,i=Es("INP"),o=function(e){e.forEach((function(e){e.interactionId&&fr(e),"first-input"===e.entryType&&!yr.some((function(t){return t.entries.some((function(t){return e.duration===t.duration&&e.startTime===t.startTime}))}))&&fr(e)}));var t,o=(t=Math.min(yr.length-1,Math.floor(gr()/50)),yr[t]);o&&o.latency!==i.value&&(i.value=o.latency,i.entries=o.entries,n())},s=Os("event",o,{durationThreshold:t.durationThreshold||40});n=zs(e,i,br,t.reportAllChanges),s&&(s.observe({type:"first-input",buffered:!0}),As((function(){o(s.takeRecords()),i.value<0&&gr()>0&&(i.value=0,i.entries=[]),n(!0)})),Fs((function(){yr=[],Zr=mr(),i=Es("INP"),n=zs(e,i,br,t.reportAllChanges)})))}))},Vr=[2500,4e3],Xr={},Sr=[800,1800],Wr=function e(t){document.prerendering?$s((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},Rr=function(e,t){t=t||{};var n=Es("TTFB"),i=zs(e,n,Sr,t.reportAllChanges);Wr((function(){var o=Ks();if(o){var s=o.responseStart;if(s<=0||s>performance.now())return;n.value=Math.max(s-Hs(),0),n.entries=[o],i(!0),Fs((function(){n=Es("TTFB",0),(i=zs(e,n,Sr,t.reportAllChanges))(!0)}))}}))};const vr=e=>{var t,n,i,o;return t=e,n=n||{},tr(Bs((function(){var e,i=Es("CLS",0),o=0,s=[],r=function(t){t.forEach((function(e){if(!e.hadRecentInput){var t=s[0],n=s[s.length-1];o&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(o+=e.value,s.push(e)):(o=e.value,s=[e])}})),o>i.value&&(i.value=o,i.entries=s,e())},l=Os("layout-shift",r);l&&(e=zs(t,i,nr,n.reportAllChanges),As((function(){r(l.takeRecords()),e(!0)})),Fs((function(){o=0,i=Es("CLS",0),e=zs(t,i,nr,n.reportAllChanges),Ms((function(){return e()}))})),setTimeout(e,0))}))),tr(e),i=e,o=o||{},$s((function(){var e,t=qs(),n=Es("FID"),s=function(i){i.startTime<t.firstHiddenTime&&(n.value=i.processingStart-i.startTime,n.entries.push(i),e(!0))},r=function(e){e.forEach(s)},l=Os("first-input",r);e=zs(i,n,cr,o.reportAllChanges),l&&As(Bs((function(){r(l.takeRecords()),l.disconnect()}))),l&&Fs((function(){var t;n=Es("FID"),e=zs(i,n,cr,o.reportAllChanges),Js=[],Ts=-1,ws=null,ar(addEventListener),t=s,Js.push(t),rr()}))})),function(e,t){t=t||{},$s((function(){var n,i=qs(),o=Es("LCP"),s=function(e){var t=e[e.length-1];t&&t.startTime<i.firstHiddenTime&&(o.value=Math.max(t.startTime-Hs(),0),o.entries=[t],n())},r=Os("largest-contentful-paint",s);if(r){n=zs(e,o,Vr,t.reportAllChanges);var l=Bs((function(){Xr[o.id]||(s(r.takeRecords()),r.disconnect(),Xr[o.id]=!0,n(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,l,!0)})),As(l),Fs((function(i){o=Es("LCP"),n=zs(e,o,Vr,t.reportAllChanges),Ms((function(){o.value=performance.now()-i.timeStamp,Xr[o.id]=!0,n(!0)}))}))}}))}(e),Rr(e),Gr(e),()=>{}},Cr=e=>e/Math.pow(1e3,2),kr=e=>1024*e,Nr=!("undefined"==typeof window)&&"performance"in window&&"memory"in performance?performance:{memory:{}},Lr="highlightLogs",wr=e=>{if(!e)return;let t=cs(Lr)||"";t&&(t.startsWith(e)?(t=t.slice(e.length),ds(Lr,t)):(e=>{let t=cs(Lr)||"";t=t+"["+(new Date).getTime()+"] "+e+"\n",ds(Lr,t)})("Unable to clear logs "+e.replace("\n"," ")+" from "+t.replace("\n"," ")))},Tr=()=>{var e;const t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";var n="";const i="undefined"!=typeof window&&(null==(e=window.crypto)?void 0:e.getRandomValues),o=new Uint32Array(28);i&&window.crypto.getRandomValues(o);for(let s=0;s<28;s++)n+=t.charAt(i?o[s]%t.length:Math.floor(Math.random()*t.length));return n},xr=()=>{let e=JSON.parse(cs(ss.SESSION_DATA)||"{}");if(e&&e.lastPushTime&&Date.now()-e.lastPushTime<55e3)return e},Jr="dmFyIF9fZGVmUHJvcD1PYmplY3QuZGVmaW5lUHJvcGVydHksX19nZXRPd25Qcm9wU3ltYm9scz1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzLF9faGFzT3duUHJvcD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LF9fcHJvcElzRW51bT1PYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLF9fZGVmTm9ybWFsUHJvcD0oZSx0LG4pPT50IGluIGU/X19kZWZQcm9wKGUsdCx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6bn0pOmVbdF09bixfX3NwcmVhZFZhbHVlcz0oZSx0KT0+e2Zvcih2YXIgbiBpbiB0fHwodD17fSkpX19oYXNPd25Qcm9wLmNhbGwodCxuKSYmX19kZWZOb3JtYWxQcm9wKGUsbix0W25dKTtpZihfX2dldE93blByb3BTeW1ib2xzKWZvcih2YXIgbiBvZiBfX2dldE93blByb3BTeW1ib2xzKHQpKV9fcHJvcElzRW51bS5jYWxsKHQsbikmJl9fZGVmTm9ybWFsUHJvcChlLG4sdFtuXSk7cmV0dXJuIGV9LF9fcHVibGljRmllbGQ9KGUsdCxuKT0+KF9fZGVmTm9ybWFsUHJvcChlLCJzeW1ib2wiIT10eXBlb2YgdD90KyIiOnQsbiksbiksX19hc3luYz0oZSx0LG4pPT5uZXcgUHJvbWlzZSgoKHIsaSk9Pnt2YXIgcz1lPT57dHJ5e2Eobi5uZXh0KGUpKX1jYXRjaCh0KXtpKHQpfX0sbz1lPT57dHJ5e2Eobi50aHJvdyhlKSl9Y2F0Y2godCl7aSh0KX19LGE9ZT0+ZS5kb25lP3IoZS52YWx1ZSk6UHJvbWlzZS5yZXNvbHZlKGUudmFsdWUpLnRoZW4ocyxvKTthKChuPW4uYXBwbHkoZSx0KSkubmV4dCgpKX0pKTshZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIGU9KGU9PihlW2UuSW5pdGlhbGl6ZT0wXT0iSW5pdGlhbGl6ZSIsZVtlLkFzeW5jRXZlbnRzPTFdPSJBc3luY0V2ZW50cyIsZVtlLklkZW50aWZ5PTJdPSJJZGVudGlmeSIsZVtlLlByb3BlcnRpZXM9M109IlByb3BlcnRpZXMiLGVbZS5NZXRyaWNzPTRdPSJNZXRyaWNzIixlW2UuRmVlZGJhY2s9NV09IkZlZWRiYWNrIixlW2UuQ3VzdG9tRXZlbnQ9Nl09IkN1c3RvbUV2ZW50IixlKSkoZXx8e30pLHQ9InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWxUaGlzP2dsb2JhbFRoaXM6InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/c2VsZjp7fTtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGUmJk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLCJkZWZhdWx0Iik/ZS5kZWZhdWx0OmV9ZnVuY3Rpb24gcihlKXtpZihlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9ZS5kZWZhdWx0O2lmKCJmdW5jdGlvbiI9PXR5cGVvZiB0KXt2YXIgbj1mdW5jdGlvbiBlKCl7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBlP1JlZmxlY3QuY29uc3RydWN0KHQsYXJndW1lbnRzLHRoaXMuY29uc3RydWN0b3IpOnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtuLnByb3RvdHlwZT10LnByb3RvdHlwZX1lbHNlIG49e307cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSxPYmplY3Qua2V5cyhlKS5mb3JFYWNoKChmdW5jdGlvbih0KXt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsdCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KG4sdCxyLmdldD9yOntlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBlW3RdfX0pfSkpLG59dmFyIGk9e2V4cG9ydHM6e319OyFmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSx0KXt2YXIgbj1bXSxyPVtdO3JldHVybiBudWxsPT10JiYodD1mdW5jdGlvbihlLHQpe3JldHVybiBuWzBdPT09dD8iW0NpcmN1bGFyIH5dIjoiW0NpcmN1bGFyIH4uIityLnNsaWNlKDAsbi5pbmRleE9mKHQpKS5qb2luKCIuIikrIl0ifSksZnVuY3Rpb24oaSxzKXtpZihuLmxlbmd0aD4wKXt2YXIgbz1uLmluZGV4T2YodGhpcyk7fm8/bi5zcGxpY2UobysxKTpuLnB1c2godGhpcyksfm8/ci5zcGxpY2UobywxLzAsaSk6ci5wdXNoKGkpLH5uLmluZGV4T2YocykmJihzPXQuY2FsbCh0aGlzLGkscykpfWVsc2Ugbi5wdXNoKHMpO3JldHVybiBudWxsPT1lP3M6ZS5jYWxsKHRoaXMsaSxzKX19KGUuZXhwb3J0cz1mdW5jdGlvbihlLHQscixpKXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoZSxuKHQsaSkscil9KS5nZXRTZXJpYWxpemU9bn0oaSk7dmFyIHM9bihpLmV4cG9ydHMpLG89ZnVuY3Rpb24oKXtyZXR1cm4gbz1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIHQsbj0xLHI9YXJndW1lbnRzLmxlbmd0aDtuPHI7bisrKWZvcih2YXIgaSBpbiB0PWFyZ3VtZW50c1tuXSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxpKSYmKGVbaV09dFtpXSk7cmV0dXJuIGV9LG8uYXBwbHkodGhpcyxhcmd1bWVudHMpfTtmdW5jdGlvbiBhKGUsdCl7aWYoIUJvb2xlYW4oZSkpdGhyb3cgbmV3IEVycm9yKHQpfWZ1bmN0aW9uIGMoZSx0KXtpZighQm9vbGVhbihlKSl0aHJvdyBuZXcgRXJyb3IobnVsbCE9dD90OiJVbmV4cGVjdGVkIGludmFyaWFudCB0cmlnZ2VyZWQuIil9Y29uc3QgdT0vXHJcbnxbXG5ccl0vZztmdW5jdGlvbiBsKGUsdCl7bGV0IG49MCxyPTE7Zm9yKGNvbnN0IGkgb2YgZS5ib2R5Lm1hdGNoQWxsKHUpKXtpZigibnVtYmVyIj09dHlwZW9mIGkuaW5kZXh8fGMoITEpLGkuaW5kZXg+PXQpYnJlYWs7bj1pLmluZGV4K2lbMF0ubGVuZ3RoLHIrPTF9cmV0dXJue2xpbmU6cixjb2x1bW46dCsxLW59fWZ1bmN0aW9uIHAoZSx0KXtjb25zdCBuPWUubG9jYXRpb25PZmZzZXQuY29sdW1uLTEscj0iIi5wYWRTdGFydChuKStlLmJvZHksaT10LmxpbmUtMSxzPWUubG9jYXRpb25PZmZzZXQubGluZS0xLG89dC5saW5lK3MsYT0xPT09dC5saW5lP246MCxjPXQuY29sdW1uK2EsdT1gJHtlLm5hbWV9OiR7b306JHtjfVxuYCxsPXIuc3BsaXQoL1xyXG58W1xuXHJdL2cpLHA9bFtpXTtpZihwLmxlbmd0aD4xMjApe2NvbnN0IGU9TWF0aC5mbG9vcihjLzgwKSx0PWMlODAsbj1bXTtmb3IobGV0IHI9MDtyPHAubGVuZ3RoO3IrPTgwKW4ucHVzaChwLnNsaWNlKHIscis4MCkpO3JldHVybiB1K2QoW1tgJHtvfSB8YCxuWzBdXSwuLi5uLnNsaWNlKDEsZSsxKS5tYXAoKGU9PlsifCIsZV0pKSxbInwiLCJeIi5wYWRTdGFydCh0KV0sWyJ8IixuW2UrMV1dXSl9cmV0dXJuIHUrZChbW28tMSsiIHwiLGxbaS0xXV0sW2Ake299IHxgLHBdLFsifCIsIl4iLnBhZFN0YXJ0KGMpXSxbYCR7bysxfSB8YCxsW2krMV1dXSl9ZnVuY3Rpb24gZChlKXtjb25zdCB0PWUuZmlsdGVyKCgoW2UsdF0pPT52b2lkIDAhPT10KSksbj1NYXRoLm1heCguLi50Lm1hcCgoKFtlXSk9PmUubGVuZ3RoKSkpO3JldHVybiB0Lm1hcCgoKFtlLHRdKT0+ZS5wYWRTdGFydChuKSsodD8iICIrdDoiIikpKS5qb2luKCJcbiIpfWNsYXNzIGggZXh0ZW5kcyBFcnJvcntjb25zdHJ1Y3RvcihlLC4uLnQpe3ZhciBuLHIsaTtjb25zdHtub2RlczpzLHNvdXJjZTpvLHBvc2l0aW9uczphLHBhdGg6YyxvcmlnaW5hbEVycm9yOnUsZXh0ZW5zaW9uczpwfT1mdW5jdGlvbihlKXtjb25zdCB0PWVbMF07cmV0dXJuIG51bGw9PXR8fCJraW5kImluIHR8fCJsZW5ndGgiaW4gdD97bm9kZXM6dCxzb3VyY2U6ZVsxXSxwb3NpdGlvbnM6ZVsyXSxwYXRoOmVbM10sb3JpZ2luYWxFcnJvcjplWzRdLGV4dGVuc2lvbnM6ZVs1XX06dH0odCk7c3VwZXIoZSksdGhpcy5uYW1lPSJHcmFwaFFMRXJyb3IiLHRoaXMucGF0aD1udWxsIT1jP2M6dm9pZCAwLHRoaXMub3JpZ2luYWxFcnJvcj1udWxsIT11P3U6dm9pZCAwLHRoaXMubm9kZXM9ZihBcnJheS5pc0FycmF5KHMpP3M6cz9bc106dm9pZCAwKTtjb25zdCBkPWYobnVsbD09PShuPXRoaXMubm9kZXMpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLm1hcCgoZT0+ZS5sb2MpKS5maWx0ZXIoKGU9Pm51bGwhPWUpKSk7dGhpcy5zb3VyY2U9bnVsbCE9bz9vOm51bGw9PWR8fG51bGw9PT0ocj1kWzBdKXx8dm9pZCAwPT09cj92b2lkIDA6ci5zb3VyY2UsdGhpcy5wb3NpdGlvbnM9bnVsbCE9YT9hOm51bGw9PWQ/dm9pZCAwOmQubWFwKChlPT5lLnN0YXJ0KSksdGhpcy5sb2NhdGlvbnM9YSYmbz9hLm1hcCgoZT0+bChvLGUpKSk6bnVsbD09ZD92b2lkIDA6ZC5tYXAoKGU9PmwoZS5zb3VyY2UsZS5zdGFydCkpKTtjb25zdCB5PSJvYmplY3QiPT10eXBlb2Yodj1udWxsPT11P3ZvaWQgMDp1LmV4dGVuc2lvbnMpJiZudWxsIT09dj9udWxsPT11P3ZvaWQgMDp1LmV4dGVuc2lvbnM6dm9pZCAwO3ZhciB2O3RoaXMuZXh0ZW5zaW9ucz1udWxsIT09KGk9bnVsbCE9cD9wOnkpJiZ2b2lkIDAhPT1pP2k6T2JqZWN0LmNyZWF0ZShudWxsKSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLHttZXNzYWdlOnt3cml0YWJsZTohMCxlbnVtZXJhYmxlOiEwfSxuYW1lOntlbnVtZXJhYmxlOiExfSxub2Rlczp7ZW51bWVyYWJsZTohMX0sc291cmNlOntlbnVtZXJhYmxlOiExfSxwb3NpdGlvbnM6e2VudW1lcmFibGU6ITF9LG9yaWdpbmFsRXJyb3I6e2VudW1lcmFibGU6ITF9fSksbnVsbCE9dSYmdS5zdGFjaz9PYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywic3RhY2siLHt2YWx1ZTp1LnN0YWNrLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pOkVycm9yLmNhcHR1cmVTdGFja1RyYWNlP0Vycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsaCk6T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsInN0YWNrIix7dmFsdWU6RXJyb3IoKS5zdGFjayx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9KX1nZXRbU3ltYm9sLnRvU3RyaW5nVGFnXSgpe3JldHVybiJHcmFwaFFMRXJyb3IifXRvU3RyaW5nKCl7bGV0IGU9dGhpcy5tZXNzYWdlO2lmKHRoaXMubm9kZXMpZm9yKGNvbnN0IG4gb2YgdGhpcy5ub2RlcyluLmxvYyYmKGUrPSJcblxuIitwKCh0PW4ubG9jKS5zb3VyY2UsbCh0LnNvdXJjZSx0LnN0YXJ0KSkpO2Vsc2UgaWYodGhpcy5zb3VyY2UmJnRoaXMubG9jYXRpb25zKWZvcihjb25zdCBuIG9mIHRoaXMubG9jYXRpb25zKWUrPSJcblxuIitwKHRoaXMuc291cmNlLG4pO3ZhciB0O3JldHVybiBlfXRvSlNPTigpe2NvbnN0IGU9e21lc3NhZ2U6dGhpcy5tZXNzYWdlfTtyZXR1cm4gbnVsbCE9dGhpcy5sb2NhdGlvbnMmJihlLmxvY2F0aW9ucz10aGlzLmxvY2F0aW9ucyksbnVsbCE9dGhpcy5wYXRoJiYoZS5wYXRoPXRoaXMucGF0aCksbnVsbCE9dGhpcy5leHRlbnNpb25zJiZPYmplY3Qua2V5cyh0aGlzLmV4dGVuc2lvbnMpLmxlbmd0aD4wJiYoZS5leHRlbnNpb25zPXRoaXMuZXh0ZW5zaW9ucyksZX19ZnVuY3Rpb24gZihlKXtyZXR1cm4gdm9pZCAwPT09ZXx8MD09PWUubGVuZ3RoP3ZvaWQgMDplfWZ1bmN0aW9uIHkoZSx0LG4pe3JldHVybiBuZXcgaChgU3ludGF4IEVycm9yOiAke259YCx7c291cmNlOmUscG9zaXRpb25zOlt0XX0pfWNsYXNzIHZ7Y29uc3RydWN0b3IoZSx0LG4pe3RoaXMuc3RhcnQ9ZS5zdGFydCx0aGlzLmVuZD10LmVuZCx0aGlzLnN0YXJ0VG9rZW49ZSx0aGlzLmVuZFRva2VuPXQsdGhpcy5zb3VyY2U9bn1nZXRbU3ltYm9sLnRvU3RyaW5nVGFnXSgpe3JldHVybiJMb2NhdGlvbiJ9dG9KU09OKCl7cmV0dXJue3N0YXJ0OnRoaXMuc3RhcnQsZW5kOnRoaXMuZW5kfX19Y2xhc3MgbXtjb25zdHJ1Y3RvcihlLHQsbixyLGkscyl7dGhpcy5raW5kPWUsdGhpcy5zdGFydD10LHRoaXMuZW5kPW4sdGhpcy5saW5lPXIsdGhpcy5jb2x1bW49aSx0aGlzLnZhbHVlPXMsdGhpcy5wcmV2PW51bGwsdGhpcy5uZXh0PW51bGx9Z2V0W1N5bWJvbC50b1N0cmluZ1RhZ10oKXtyZXR1cm4iVG9rZW4ifXRvSlNPTigpe3JldHVybntraW5kOnRoaXMua2luZCx2YWx1ZTp0aGlzLnZhbHVlLGxpbmU6dGhpcy5saW5lLGNvbHVtbjp0aGlzLmNvbHVtbn19fWNvbnN0IF89e05hbWU6W10sRG9jdW1lbnQ6WyJkZWZpbml0aW9ucyJdLE9wZXJhdGlvbkRlZmluaXRpb246WyJuYW1lIiwidmFyaWFibGVEZWZpbml0aW9ucyIsImRpcmVjdGl2ZXMiLCJzZWxlY3Rpb25TZXQiXSxWYXJpYWJsZURlZmluaXRpb246WyJ2YXJpYWJsZSIsInR5cGUiLCJkZWZhdWx0VmFsdWUiLCJkaXJlY3RpdmVzIl0sVmFyaWFibGU6WyJuYW1lIl0sU2VsZWN0aW9uU2V0Olsic2VsZWN0aW9ucyJdLEZpZWxkOlsiYWxpYXMiLCJuYW1lIiwiYXJndW1lbnRzIiwiZGlyZWN0aXZlcyIsInNlbGVjdGlvblNldCJdLEFyZ3VtZW50OlsibmFtZSIsInZhbHVlIl0sRnJhZ21lbnRTcHJlYWQ6WyJuYW1lIiwiZGlyZWN0aXZlcyJdLElubGluZUZyYWdtZW50OlsidHlwZUNvbmRpdGlvbiIsImRpcmVjdGl2ZXMiLCJzZWxlY3Rpb25TZXQiXSxGcmFnbWVudERlZmluaXRpb246WyJuYW1lIiwidmFyaWFibGVEZWZpbml0aW9ucyIsInR5cGVDb25kaXRpb24iLCJkaXJlY3RpdmVzIiwic2VsZWN0aW9uU2V0Il0sSW50VmFsdWU6W10sRmxvYXRWYWx1ZTpbXSxTdHJpbmdWYWx1ZTpbXSxCb29sZWFuVmFsdWU6W10sTnVsbFZhbHVlOltdLEVudW1WYWx1ZTpbXSxMaXN0VmFsdWU6WyJ2YWx1ZXMiXSxPYmplY3RWYWx1ZTpbImZpZWxkcyJdLE9iamVjdEZpZWxkOlsibmFtZSIsInZhbHVlIl0sRGlyZWN0aXZlOlsibmFtZSIsImFyZ3VtZW50cyJdLE5hbWVkVHlwZTpbIm5hbWUiXSxMaXN0VHlwZTpbInR5cGUiXSxOb25OdWxsVHlwZTpbInR5cGUiXSxTY2hlbWFEZWZpbml0aW9uOlsiZGVzY3JpcHRpb24iLCJkaXJlY3RpdmVzIiwib3BlcmF0aW9uVHlwZXMiXSxPcGVyYXRpb25UeXBlRGVmaW5pdGlvbjpbInR5cGUiXSxTY2FsYXJUeXBlRGVmaW5pdGlvbjpbImRlc2NyaXB0aW9uIiwibmFtZSIsImRpcmVjdGl2ZXMiXSxPYmplY3RUeXBlRGVmaW5pdGlvbjpbImRlc2NyaXB0aW9uIiwibmFtZSIsImludGVyZmFjZXMiLCJkaXJlY3RpdmVzIiwiZmllbGRzIl0sRmllbGREZWZpbml0aW9uOlsiZGVzY3JpcHRpb24iLCJuYW1lIiwiYXJndW1lbnRzIiwidHlwZSIsImRpcmVjdGl2ZXMiXSxJbnB1dFZhbHVlRGVmaW5pdGlvbjpbImRlc2NyaXB0aW9uIiwibmFtZSIsInR5cGUiLCJkZWZhdWx0VmFsdWUiLCJkaXJlY3RpdmVzIl0sSW50ZXJmYWNlVHlwZURlZmluaXRpb246WyJkZXNjcmlwdGlvbiIsIm5hbWUiLCJpbnRlcmZhY2VzIiwiZGlyZWN0aXZlcyIsImZpZWxkcyJdLFVuaW9uVHlwZURlZmluaXRpb246WyJkZXNjcmlwdGlvbiIsIm5hbWUiLCJkaXJlY3RpdmVzIiwidHlwZXMiXSxFbnVtVHlwZURlZmluaXRpb246WyJkZXNjcmlwdGlvbiIsIm5hbWUiLCJkaXJlY3RpdmVzIiwidmFsdWVzIl0sRW51bVZhbHVlRGVmaW5pdGlvbjpbImRlc2NyaXB0aW9uIiwibmFtZSIsImRpcmVjdGl2ZXMiXSxJbnB1dE9iamVjdFR5cGVEZWZpbml0aW9uOlsiZGVzY3JpcHRpb24iLCJuYW1lIiwiZGlyZWN0aXZlcyIsImZpZWxkcyJdLERpcmVjdGl2ZURlZmluaXRpb246WyJkZXNjcmlwdGlvbiIsIm5hbWUiLCJhcmd1bWVudHMiLCJsb2NhdGlvbnMiXSxTY2hlbWFFeHRlbnNpb246WyJkaXJlY3RpdmVzIiwib3BlcmF0aW9uVHlwZXMiXSxTY2FsYXJUeXBlRXh0ZW5zaW9uOlsibmFtZSIsImRpcmVjdGl2ZXMiXSxPYmplY3RUeXBlRXh0ZW5zaW9uOlsibmFtZSIsImludGVyZmFjZXMiLCJkaXJlY3RpdmVzIiwiZmllbGRzIl0sSW50ZXJmYWNlVHlwZUV4dGVuc2lvbjpbIm5hbWUiLCJpbnRlcmZhY2VzIiwiZGlyZWN0aXZlcyIsImZpZWxkcyJdLFVuaW9uVHlwZUV4dGVuc2lvbjpbIm5hbWUiLCJkaXJlY3RpdmVzIiwidHlwZXMiXSxFbnVtVHlwZUV4dGVuc2lvbjpbIm5hbWUiLCJkaXJlY3RpdmVzIiwidmFsdWVzIl0sSW5wdXRPYmplY3RUeXBlRXh0ZW5zaW9uOlsibmFtZSIsImRpcmVjdGl2ZXMiLCJmaWVsZHMiXX0sRT1uZXcgU2V0KE9iamVjdC5rZXlzKF8pKTtmdW5jdGlvbiBiKGUpe2NvbnN0IHQ9bnVsbD09ZT92b2lkIDA6ZS5raW5kO3JldHVybiJzdHJpbmciPT10eXBlb2YgdCYmRS5oYXModCl9bGV0IGc7dmFyIFQ7bGV0IE87dmFyIE47bGV0IHg7dmFyIEk7ZnVuY3Rpb24gQShlKXtyZXR1cm4gOT09PWV8fDMyPT09ZX1mdW5jdGlvbiBTKGUpe3JldHVybiBlPj00OCYmZTw9NTd9ZnVuY3Rpb24gdyhlKXtyZXR1cm4gZT49OTcmJmU8PTEyMnx8ZT49NjUmJmU8PTkwfWZ1bmN0aW9uIGsoZSl7cmV0dXJuIHcoZSl8fDk1PT09ZX1mdW5jdGlvbiBEKGUpe3JldHVybiB3KGUpfHxTKGUpfHw5NT09PWV9ZnVuY3Rpb24gQyhlKXt2YXIgdDtsZXQgbj1OdW1iZXIuTUFYX1NBRkVfSU5URUdFUixyPW51bGwsaT0tMTtmb3IobGV0IG89MDtvPGUubGVuZ3RoOysrbyl7dmFyIHM7Y29uc3QgdD1lW29dLGE9Uih0KTthIT09dC5sZW5ndGgmJihyPW51bGwhPT0ocz1yKSYmdm9pZCAwIT09cz9zOm8saT1vLDAhPT1vJiZhPG4mJihuPWEpKX1yZXR1cm4gZS5tYXAoKChlLHQpPT4wPT09dD9lOmUuc2xpY2UobikpKS5zbGljZShudWxsIT09KHQ9cikmJnZvaWQgMCE9PXQ/dDowLGkrMSl9ZnVuY3Rpb24gUihlKXtsZXQgdD0wO2Zvcig7dDxlLmxlbmd0aCYmQShlLmNoYXJDb2RlQXQodCkpOykrK3Q7cmV0dXJuIHR9bGV0IFA7dmFyIEY7KFQ9Z3x8KGc9e30pKS5RVUVSWT0icXVlcnkiLFQuTVVUQVRJT049Im11dGF0aW9uIixULlNVQlNDUklQVElPTj0ic3Vic2NyaXB0aW9uIiwoTj1PfHwoTz17fSkpLlFVRVJZPSJRVUVSWSIsTi5NVVRBVElPTj0iTVVUQVRJT04iLE4uU1VCU0NSSVBUSU9OPSJTVUJTQ1JJUFRJT04iLE4uRklFTEQ9IkZJRUxEIixOLkZSQUdNRU5UX0RFRklOSVRJT049IkZSQUdNRU5UX0RFRklOSVRJT04iLE4uRlJBR01FTlRfU1BSRUFEPSJGUkFHTUVOVF9TUFJFQUQiLE4uSU5MSU5FX0ZSQUdNRU5UPSJJTkxJTkVfRlJBR01FTlQiLE4uVkFSSUFCTEVfREVGSU5JVElPTj0iVkFSSUFCTEVfREVGSU5JVElPTiIsTi5TQ0hFTUE9IlNDSEVNQSIsTi5TQ0FMQVI9IlNDQUxBUiIsTi5PQkpFQ1Q9Ik9CSkVDVCIsTi5GSUVMRF9ERUZJTklUSU9OPSJGSUVMRF9ERUZJTklUSU9OIixOLkFSR1VNRU5UX0RFRklOSVRJT049IkFSR1VNRU5UX0RFRklOSVRJT04iLE4uSU5URVJGQUNFPSJJTlRFUkZBQ0UiLE4uVU5JT049IlVOSU9OIixOLkVOVU09IkVOVU0iLE4uRU5VTV9WQUxVRT0iRU5VTV9WQUxVRSIsTi5JTlBVVF9PQkpFQ1Q9IklOUFVUX09CSkVDVCIsTi5JTlBVVF9GSUVMRF9ERUZJTklUSU9OPSJJTlBVVF9GSUVMRF9ERUZJTklUSU9OIiwoST14fHwoeD17fSkpLk5BTUU9Ik5hbWUiLEkuRE9DVU1FTlQ9IkRvY3VtZW50IixJLk9QRVJBVElPTl9ERUZJTklUSU9OPSJPcGVyYXRpb25EZWZpbml0aW9uIixJLlZBUklBQkxFX0RFRklOSVRJT049IlZhcmlhYmxlRGVmaW5pdGlvbiIsSS5TRUxFQ1RJT05fU0VUPSJTZWxlY3Rpb25TZXQiLEkuRklFTEQ9IkZpZWxkIixJLkFSR1VNRU5UPSJBcmd1bWVudCIsSS5GUkFHTUVOVF9TUFJFQUQ9IkZyYWdtZW50U3ByZWFkIixJLklOTElORV9GUkFHTUVOVD0iSW5saW5lRnJhZ21lbnQiLEkuRlJBR01FTlRfREVGSU5JVElPTj0iRnJhZ21lbnREZWZpbml0aW9uIixJLlZBUklBQkxFPSJWYXJpYWJsZSIsSS5JTlQ9IkludFZhbHVlIixJLkZMT0FUPSJGbG9hdFZhbHVlIixJLlNUUklORz0iU3RyaW5nVmFsdWUiLEkuQk9PTEVBTj0iQm9vbGVhblZhbHVlIixJLk5VTEw9Ik51bGxWYWx1ZSIsSS5FTlVNPSJFbnVtVmFsdWUiLEkuTElTVD0iTGlzdFZhbHVlIixJLk9CSkVDVD0iT2JqZWN0VmFsdWUiLEkuT0JKRUNUX0ZJRUxEPSJPYmplY3RGaWVsZCIsSS5ESVJFQ1RJVkU9IkRpcmVjdGl2ZSIsSS5OQU1FRF9UWVBFPSJOYW1lZFR5cGUiLEkuTElTVF9UWVBFPSJMaXN0VHlwZSIsSS5OT05fTlVMTF9UWVBFPSJOb25OdWxsVHlwZSIsSS5TQ0hFTUFfREVGSU5JVElPTj0iU2NoZW1hRGVmaW5pdGlvbiIsSS5PUEVSQVRJT05fVFlQRV9ERUZJTklUSU9OPSJPcGVyYXRpb25UeXBlRGVmaW5pdGlvbiIsSS5TQ0FMQVJfVFlQRV9ERUZJTklUSU9OPSJTY2FsYXJUeXBlRGVmaW5pdGlvbiIsSS5PQkpFQ1RfVFlQRV9ERUZJTklUSU9OPSJPYmplY3RUeXBlRGVmaW5pdGlvbiIsSS5GSUVMRF9ERUZJTklUSU9OPSJGaWVsZERlZmluaXRpb24iLEkuSU5QVVRfVkFMVUVfREVGSU5JVElPTj0iSW5wdXRWYWx1ZURlZmluaXRpb24iLEkuSU5URVJGQUNFX1RZUEVfREVGSU5JVElPTj0iSW50ZXJmYWNlVHlwZURlZmluaXRpb24iLEkuVU5JT05fVFlQRV9ERUZJTklUSU9OPSJVbmlvblR5cGVEZWZpbml0aW9uIixJLkVOVU1fVFlQRV9ERUZJTklUSU9OPSJFbnVtVHlwZURlZmluaXRpb24iLEkuRU5VTV9WQUxVRV9ERUZJTklUSU9OPSJFbnVtVmFsdWVEZWZpbml0aW9uIixJLklOUFVUX09CSkVDVF9UWVBFX0RFRklOSVRJT049IklucHV0T2JqZWN0VHlwZURlZmluaXRpb24iLEkuRElSRUNUSVZFX0RFRklOSVRJT049IkRpcmVjdGl2ZURlZmluaXRpb24iLEkuU0NIRU1BX0VYVEVOU0lPTj0iU2NoZW1hRXh0ZW5zaW9uIixJLlNDQUxBUl9UWVBFX0VYVEVOU0lPTj0iU2NhbGFyVHlwZUV4dGVuc2lvbiIsSS5PQkpFQ1RfVFlQRV9FWFRFTlNJT049Ik9iamVjdFR5cGVFeHRlbnNpb24iLEkuSU5URVJGQUNFX1RZUEVfRVhURU5TSU9OPSJJbnRlcmZhY2VUeXBlRXh0ZW5zaW9uIixJLlVOSU9OX1RZUEVfRVhURU5TSU9OPSJVbmlvblR5cGVFeHRlbnNpb24iLEkuRU5VTV9UWVBFX0VYVEVOU0lPTj0iRW51bVR5cGVFeHRlbnNpb24iLEkuSU5QVVRfT0JKRUNUX1RZUEVfRVhURU5TSU9OPSJJbnB1dE9iamVjdFR5cGVFeHRlbnNpb24iLChGPVB8fChQPXt9KSkuU09GPSI8U09GPiIsRi5FT0Y9IjxFT0Y+IixGLkJBTkc9IiEiLEYuRE9MTEFSPSIkIixGLkFNUD0iJiIsRi5QQVJFTl9MPSIoIixGLlBBUkVOX1I9IikiLEYuU1BSRUFEPSIuLi4iLEYuQ09MT049IjoiLEYuRVFVQUxTPSI9IixGLkFUPSJAIixGLkJSQUNLRVRfTD0iWyIsRi5CUkFDS0VUX1I9Il0iLEYuQlJBQ0VfTD0ieyIsRi5QSVBFPSJ8IixGLkJSQUNFX1I9In0iLEYuTkFNRT0iTmFtZSIsRi5JTlQ9IkludCIsRi5GTE9BVD0iRmxvYXQiLEYuU1RSSU5HPSJTdHJpbmciLEYuQkxPQ0tfU1RSSU5HPSJCbG9ja1N0cmluZyIsRi5DT01NRU5UPSJDb21tZW50IjtjbGFzcyBMe2NvbnN0cnVjdG9yKGUpe2NvbnN0IHQ9bmV3IG0oUC5TT0YsMCwwLDAsMCk7dGhpcy5zb3VyY2U9ZSx0aGlzLmxhc3RUb2tlbj10LHRoaXMudG9rZW49dCx0aGlzLmxpbmU9MSx0aGlzLmxpbmVTdGFydD0wfWdldFtTeW1ib2wudG9TdHJpbmdUYWddKCl7cmV0dXJuIkxleGVyIn1hZHZhbmNlKCl7dGhpcy5sYXN0VG9rZW49dGhpcy50b2tlbjtyZXR1cm4gdGhpcy50b2tlbj10aGlzLmxvb2thaGVhZCgpfWxvb2thaGVhZCgpe2xldCBlPXRoaXMudG9rZW47aWYoZS5raW5kIT09UC5FT0YpZG97aWYoZS5uZXh0KWU9ZS5uZXh0O2Vsc2V7Y29uc3QgdD1VKHRoaXMsZS5lbmQpO2UubmV4dD10LHQucHJldj1lLGU9dH19d2hpbGUoZS5raW5kPT09UC5DT01NRU5UKTtyZXR1cm4gZX19ZnVuY3Rpb24gaihlKXtyZXR1cm4gZT49MCYmZTw9NTUyOTV8fGU+PTU3MzQ0JiZlPD0xMTE0MTExfWZ1bmN0aW9uIEIoZSx0KXtyZXR1cm4gTShlLmNoYXJDb2RlQXQodCkpJiYkKGUuY2hhckNvZGVBdCh0KzEpKX1mdW5jdGlvbiBNKGUpe3JldHVybiBlPj01NTI5NiYmZTw9NTYzMTl9ZnVuY3Rpb24gJChlKXtyZXR1cm4gZT49NTYzMjAmJmU8PTU3MzQzfWZ1bmN0aW9uIFYoZSx0KXtjb25zdCBuPWUuc291cmNlLmJvZHkuY29kZVBvaW50QXQodCk7aWYodm9pZCAwPT09bilyZXR1cm4gUC5FT0Y7aWYobj49MzImJm48PTEyNil7Y29uc3QgZT1TdHJpbmcuZnJvbUNvZGVQb2ludChuKTtyZXR1cm4nIic9PT1lPyInXCInIjpgIiR7ZX0iYH1yZXR1cm4iVSsiK24udG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCkucGFkU3RhcnQoNCwiMCIpfWZ1bmN0aW9uIHEoZSx0LG4scixpKXtjb25zdCBzPWUubGluZSxvPTErbi1lLmxpbmVTdGFydDtyZXR1cm4gbmV3IG0odCxuLHIscyxvLGkpfWZ1bmN0aW9uIFUoZSx0KXtjb25zdCBuPWUuc291cmNlLmJvZHkscj1uLmxlbmd0aDtsZXQgaT10O2Zvcig7aTxyOyl7Y29uc3QgdD1uLmNoYXJDb2RlQXQoaSk7c3dpdGNoKHQpe2Nhc2UgNjUyNzk6Y2FzZSA5OmNhc2UgMzI6Y2FzZSA0NDorK2k7Y29udGludWU7Y2FzZSAxMDorK2ksKytlLmxpbmUsZS5saW5lU3RhcnQ9aTtjb250aW51ZTtjYXNlIDEzOjEwPT09bi5jaGFyQ29kZUF0KGkrMSk/aSs9MjorK2ksKytlLmxpbmUsZS5saW5lU3RhcnQ9aTtjb250aW51ZTtjYXNlIDM1OnJldHVybiBHKGUsaSk7Y2FzZSAzMzpyZXR1cm4gcShlLFAuQkFORyxpLGkrMSk7Y2FzZSAzNjpyZXR1cm4gcShlLFAuRE9MTEFSLGksaSsxKTtjYXNlIDM4OnJldHVybiBxKGUsUC5BTVAsaSxpKzEpO2Nhc2UgNDA6cmV0dXJuIHEoZSxQLlBBUkVOX0wsaSxpKzEpO2Nhc2UgNDE6cmV0dXJuIHEoZSxQLlBBUkVOX1IsaSxpKzEpO2Nhc2UgNDY6aWYoNDY9PT1uLmNoYXJDb2RlQXQoaSsxKSYmNDY9PT1uLmNoYXJDb2RlQXQoaSsyKSlyZXR1cm4gcShlLFAuU1BSRUFELGksaSszKTticmVhaztjYXNlIDU4OnJldHVybiBxKGUsUC5DT0xPTixpLGkrMSk7Y2FzZSA2MTpyZXR1cm4gcShlLFAuRVFVQUxTLGksaSsxKTtjYXNlIDY0OnJldHVybiBxKGUsUC5BVCxpLGkrMSk7Y2FzZSA5MTpyZXR1cm4gcShlLFAuQlJBQ0tFVF9MLGksaSsxKTtjYXNlIDkzOnJldHVybiBxKGUsUC5CUkFDS0VUX1IsaSxpKzEpO2Nhc2UgMTIzOnJldHVybiBxKGUsUC5CUkFDRV9MLGksaSsxKTtjYXNlIDEyNDpyZXR1cm4gcShlLFAuUElQRSxpLGkrMSk7Y2FzZSAxMjU6cmV0dXJuIHEoZSxQLkJSQUNFX1IsaSxpKzEpO2Nhc2UgMzQ6cmV0dXJuIDM0PT09bi5jaGFyQ29kZUF0KGkrMSkmJjM0PT09bi5jaGFyQ29kZUF0KGkrMik/WihlLGkpOlkoZSxpKX1pZihTKHQpfHw0NT09PXQpcmV0dXJuIEsoZSxpLHQpO2lmKGsodCkpcmV0dXJuIGVlKGUsaSk7dGhyb3cgeShlLnNvdXJjZSxpLDM5PT09dD8iVW5leHBlY3RlZCBzaW5nbGUgcXVvdGUgY2hhcmFjdGVyICgnKSwgZGlkIHlvdSBtZWFuIHRvIHVzZSBhIGRvdWJsZSBxdW90ZSAoXCIpPyI6aih0KXx8QihuLGkpP2BVbmV4cGVjdGVkIGNoYXJhY3RlcjogJHtWKGUsaSl9LmA6YEludmFsaWQgY2hhcmFjdGVyOiAke1YoZSxpKX0uYCl9cmV0dXJuIHEoZSxQLkVPRixyLHIpfWZ1bmN0aW9uIEcoZSx0KXtjb25zdCBuPWUuc291cmNlLmJvZHkscj1uLmxlbmd0aDtsZXQgaT10KzE7Zm9yKDtpPHI7KXtjb25zdCBlPW4uY2hhckNvZGVBdChpKTtpZigxMD09PWV8fDEzPT09ZSlicmVhaztpZihqKGUpKSsraTtlbHNle2lmKCFCKG4saSkpYnJlYWs7aSs9Mn19cmV0dXJuIHEoZSxQLkNPTU1FTlQsdCxpLG4uc2xpY2UodCsxLGkpKX1mdW5jdGlvbiBLKGUsdCxuKXtjb25zdCByPWUuc291cmNlLmJvZHk7bGV0IGk9dCxzPW4sbz0hMTtpZig0NT09PXMmJihzPXIuY2hhckNvZGVBdCgrK2kpKSw0OD09PXMpe2lmKHM9ci5jaGFyQ29kZUF0KCsraSksUyhzKSl0aHJvdyB5KGUuc291cmNlLGksYEludmFsaWQgbnVtYmVyLCB1bmV4cGVjdGVkIGRpZ2l0IGFmdGVyIDA6ICR7VihlLGkpfS5gKX1lbHNlIGk9eihlLGkscykscz1yLmNoYXJDb2RlQXQoaSk7aWYoNDY9PT1zJiYobz0hMCxzPXIuY2hhckNvZGVBdCgrK2kpLGk9eihlLGkscykscz1yLmNoYXJDb2RlQXQoaSkpLDY5IT09cyYmMTAxIT09c3x8KG89ITAscz1yLmNoYXJDb2RlQXQoKytpKSw0MyE9PXMmJjQ1IT09c3x8KHM9ci5jaGFyQ29kZUF0KCsraSkpLGk9eihlLGkscykscz1yLmNoYXJDb2RlQXQoaSkpLDQ2PT09c3x8ayhzKSl0aHJvdyB5KGUuc291cmNlLGksYEludmFsaWQgbnVtYmVyLCBleHBlY3RlZCBkaWdpdCBidXQgZ290OiAke1YoZSxpKX0uYCk7cmV0dXJuIHEoZSxvP1AuRkxPQVQ6UC5JTlQsdCxpLHIuc2xpY2UodCxpKSl9ZnVuY3Rpb24geihlLHQsbil7aWYoIVMobikpdGhyb3cgeShlLnNvdXJjZSx0LGBJbnZhbGlkIG51bWJlciwgZXhwZWN0ZWQgZGlnaXQgYnV0IGdvdDogJHtWKGUsdCl9LmApO2NvbnN0IHI9ZS5zb3VyY2UuYm9keTtsZXQgaT10KzE7Zm9yKDtTKHIuY2hhckNvZGVBdChpKSk7KSsraTtyZXR1cm4gaX1mdW5jdGlvbiBZKGUsdCl7Y29uc3Qgbj1lLnNvdXJjZS5ib2R5LHI9bi5sZW5ndGg7bGV0IGk9dCsxLHM9aSxvPSIiO2Zvcig7aTxyOyl7Y29uc3Qgcj1uLmNoYXJDb2RlQXQoaSk7aWYoMzQ9PT1yKXJldHVybiBvKz1uLnNsaWNlKHMsaSkscShlLFAuU1RSSU5HLHQsaSsxLG8pO2lmKDkyIT09cil7aWYoMTA9PT1yfHwxMz09PXIpYnJlYWs7aWYoaihyKSkrK2k7ZWxzZXtpZighQihuLGkpKXRocm93IHkoZS5zb3VyY2UsaSxgSW52YWxpZCBjaGFyYWN0ZXIgd2l0aGluIFN0cmluZzogJHtWKGUsaSl9LmApO2krPTJ9fWVsc2V7bys9bi5zbGljZShzLGkpO2NvbnN0IHQ9MTE3PT09bi5jaGFyQ29kZUF0KGkrMSk/MTIzPT09bi5jaGFyQ29kZUF0KGkrMik/SihlLGkpOkgoZSxpKTpXKGUsaSk7bys9dC52YWx1ZSxpKz10LnNpemUscz1pfX10aHJvdyB5KGUuc291cmNlLGksIlVudGVybWluYXRlZCBzdHJpbmcuIil9ZnVuY3Rpb24gSihlLHQpe2NvbnN0IG49ZS5zb3VyY2UuYm9keTtsZXQgcj0wLGk9Mztmb3IoO2k8MTI7KXtjb25zdCBlPW4uY2hhckNvZGVBdCh0K2krKyk7aWYoMTI1PT09ZSl7aWYoaTw1fHwhaihyKSlicmVhaztyZXR1cm57dmFsdWU6U3RyaW5nLmZyb21Db2RlUG9pbnQociksc2l6ZTppfX1pZihyPXI8PDR8WChlKSxyPDApYnJlYWt9dGhyb3cgeShlLnNvdXJjZSx0LGBJbnZhbGlkIFVuaWNvZGUgZXNjYXBlIHNlcXVlbmNlOiAiJHtuLnNsaWNlKHQsdCtpKX0iLmApfWZ1bmN0aW9uIEgoZSx0KXtjb25zdCBuPWUuc291cmNlLmJvZHkscj1RKG4sdCsyKTtpZihqKHIpKXJldHVybnt2YWx1ZTpTdHJpbmcuZnJvbUNvZGVQb2ludChyKSxzaXplOjZ9O2lmKE0ocikmJjkyPT09bi5jaGFyQ29kZUF0KHQrNikmJjExNz09PW4uY2hhckNvZGVBdCh0KzcpKXtjb25zdCBlPVEobix0KzgpO2lmKCQoZSkpcmV0dXJue3ZhbHVlOlN0cmluZy5mcm9tQ29kZVBvaW50KHIsZSksc2l6ZToxMn19dGhyb3cgeShlLnNvdXJjZSx0LGBJbnZhbGlkIFVuaWNvZGUgZXNjYXBlIHNlcXVlbmNlOiAiJHtuLnNsaWNlKHQsdCs2KX0iLmApfWZ1bmN0aW9uIFEoZSx0KXtyZXR1cm4gWChlLmNoYXJDb2RlQXQodCkpPDwxMnxYKGUuY2hhckNvZGVBdCh0KzEpKTw8OHxYKGUuY2hhckNvZGVBdCh0KzIpKTw8NHxYKGUuY2hhckNvZGVBdCh0KzMpKX1mdW5jdGlvbiBYKGUpe3JldHVybiBlPj00OCYmZTw9NTc/ZS00ODplPj02NSYmZTw9NzA/ZS01NTplPj05NyYmZTw9MTAyP2UtODc6LTF9ZnVuY3Rpb24gVyhlLHQpe2NvbnN0IG49ZS5zb3VyY2UuYm9keTtzd2l0Y2gobi5jaGFyQ29kZUF0KHQrMSkpe2Nhc2UgMzQ6cmV0dXJue3ZhbHVlOiciJyxzaXplOjJ9O2Nhc2UgOTI6cmV0dXJue3ZhbHVlOiJcXCIsc2l6ZToyfTtjYXNlIDQ3OnJldHVybnt2YWx1ZToiLyIsc2l6ZToyfTtjYXNlIDk4OnJldHVybnt2YWx1ZToiXGIiLHNpemU6Mn07Y2FzZSAxMDI6cmV0dXJue3ZhbHVlOiJcZiIsc2l6ZToyfTtjYXNlIDExMDpyZXR1cm57dmFsdWU6IlxuIixzaXplOjJ9O2Nhc2UgMTE0OnJldHVybnt2YWx1ZToiXHIiLHNpemU6Mn07Y2FzZSAxMTY6cmV0dXJue3ZhbHVlOiJcdCIsc2l6ZToyfX10aHJvdyB5KGUuc291cmNlLHQsYEludmFsaWQgY2hhcmFjdGVyIGVzY2FwZSBzZXF1ZW5jZTogIiR7bi5zbGljZSh0LHQrMil9Ii5gKX1mdW5jdGlvbiBaKGUsdCl7Y29uc3Qgbj1lLnNvdXJjZS5ib2R5LHI9bi5sZW5ndGg7bGV0IGk9ZS5saW5lU3RhcnQscz10KzMsbz1zLGE9IiI7Y29uc3QgYz1bXTtmb3IoO3M8cjspe2NvbnN0IHI9bi5jaGFyQ29kZUF0KHMpO2lmKDM0PT09ciYmMzQ9PT1uLmNoYXJDb2RlQXQocysxKSYmMzQ9PT1uLmNoYXJDb2RlQXQocysyKSl7YSs9bi5zbGljZShvLHMpLGMucHVzaChhKTtjb25zdCByPXEoZSxQLkJMT0NLX1NUUklORyx0LHMrMyxDKGMpLmpvaW4oIlxuIikpO3JldHVybiBlLmxpbmUrPWMubGVuZ3RoLTEsZS5saW5lU3RhcnQ9aSxyfWlmKDkyIT09cnx8MzQhPT1uLmNoYXJDb2RlQXQocysxKXx8MzQhPT1uLmNoYXJDb2RlQXQocysyKXx8MzQhPT1uLmNoYXJDb2RlQXQocyszKSlpZigxMCE9PXImJjEzIT09cilpZihqKHIpKSsrcztlbHNle2lmKCFCKG4scykpdGhyb3cgeShlLnNvdXJjZSxzLGBJbnZhbGlkIGNoYXJhY3RlciB3aXRoaW4gU3RyaW5nOiAke1YoZSxzKX0uYCk7cys9Mn1lbHNlIGErPW4uc2xpY2UobyxzKSxjLnB1c2goYSksMTM9PT1yJiYxMD09PW4uY2hhckNvZGVBdChzKzEpP3MrPTI6KytzLGE9IiIsbz1zLGk9cztlbHNlIGErPW4uc2xpY2UobyxzKSxvPXMrMSxzKz00fXRocm93IHkoZS5zb3VyY2UscywiVW50ZXJtaW5hdGVkIHN0cmluZy4iKX1mdW5jdGlvbiBlZShlLHQpe2NvbnN0IG49ZS5zb3VyY2UuYm9keSxyPW4ubGVuZ3RoO2xldCBpPXQrMTtmb3IoO2k8cjspe2lmKCFEKG4uY2hhckNvZGVBdChpKSkpYnJlYWs7KytpfXJldHVybiBxKGUsUC5OQU1FLHQsaSxuLnNsaWNlKHQsaSkpfWZ1bmN0aW9uIHRlKGUpe3JldHVybiBuZShlLFtdKX1mdW5jdGlvbiBuZShlLHQpe3N3aXRjaCh0eXBlb2YgZSl7Y2FzZSJzdHJpbmciOnJldHVybiBKU09OLnN0cmluZ2lmeShlKTtjYXNlImZ1bmN0aW9uIjpyZXR1cm4gZS5uYW1lP2BbZnVuY3Rpb24gJHtlLm5hbWV9XWA6IltmdW5jdGlvbl0iO2Nhc2Uib2JqZWN0IjpyZXR1cm4gZnVuY3Rpb24oZSx0KXtpZihudWxsPT09ZSlyZXR1cm4ibnVsbCI7aWYodC5pbmNsdWRlcyhlKSlyZXR1cm4iW0NpcmN1bGFyXSI7Y29uc3Qgbj1bLi4udCxlXTtpZihmdW5jdGlvbihlKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgZS50b0pTT059KGUpKXtjb25zdCB0PWUudG9KU09OKCk7aWYodCE9PWUpcmV0dXJuInN0cmluZyI9PXR5cGVvZiB0P3Q6bmUodCxuKX1lbHNlIGlmKEFycmF5LmlzQXJyYXkoZSkpcmV0dXJuIGZ1bmN0aW9uKGUsdCl7aWYoMD09PWUubGVuZ3RoKXJldHVybiJbXSI7aWYodC5sZW5ndGg+MilyZXR1cm4iW0FycmF5XSI7Y29uc3Qgbj1NYXRoLm1pbigxMCxlLmxlbmd0aCkscj1lLmxlbmd0aC1uLGk9W107Zm9yKGxldCBzPTA7czxuOysrcylpLnB1c2gobmUoZVtzXSx0KSk7MT09PXI/aS5wdXNoKCIuLi4gMSBtb3JlIGl0ZW0iKTpyPjEmJmkucHVzaChgLi4uICR7cn0gbW9yZSBpdGVtc2ApO3JldHVybiJbIitpLmpvaW4oIiwgIikrIl0ifShlLG4pO3JldHVybiBmdW5jdGlvbihlLHQpe2NvbnN0IG49T2JqZWN0LmVudHJpZXMoZSk7aWYoMD09PW4ubGVuZ3RoKXJldHVybiJ7fSI7aWYodC5sZW5ndGg+MilyZXR1cm4iWyIrZnVuY3Rpb24oZSl7Y29uc3QgdD1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkucmVwbGFjZSgvXlxbb2JqZWN0IC8sIiIpLnJlcGxhY2UoL10kLywiIik7aWYoIk9iamVjdCI9PT10JiYiZnVuY3Rpb24iPT10eXBlb2YgZS5jb25zdHJ1Y3Rvcil7Y29uc3QgdD1lLmNvbnN0cnVjdG9yLm5hbWU7aWYoInN0cmluZyI9PXR5cGVvZiB0JiYiIiE9PXQpcmV0dXJuIHR9cmV0dXJuIHR9KGUpKyJdIjtjb25zdCByPW4ubWFwKCgoW2Usbl0pPT5lKyI6ICIrbmUobix0KSkpO3JldHVybiJ7ICIrci5qb2luKCIsICIpKyIgfSJ9KGUsbil9KGUsdCk7ZGVmYXVsdDpyZXR1cm4gU3RyaW5nKGUpfX1jbGFzcyByZXtjb25zdHJ1Y3RvcihlLHQ9IkdyYXBoUUwgcmVxdWVzdCIsbj17bGluZToxLGNvbHVtbjoxfSl7InN0cmluZyI9PXR5cGVvZiBlfHxhKCExLGBCb2R5IG11c3QgYmUgYSBzdHJpbmcuIFJlY2VpdmVkOiAke3RlKGUpfS5gKSx0aGlzLmJvZHk9ZSx0aGlzLm5hbWU9dCx0aGlzLmxvY2F0aW9uT2Zmc2V0PW4sdGhpcy5sb2NhdGlvbk9mZnNldC5saW5lPjB8fGEoITEsImxpbmUgaW4gbG9jYXRpb25PZmZzZXQgaXMgMS1pbmRleGVkIGFuZCBtdXN0IGJlIHBvc2l0aXZlLiIpLHRoaXMubG9jYXRpb25PZmZzZXQuY29sdW1uPjB8fGEoITEsImNvbHVtbiBpbiBsb2NhdGlvbk9mZnNldCBpcyAxLWluZGV4ZWQgYW5kIG11c3QgYmUgcG9zaXRpdmUuIil9Z2V0W1N5bWJvbC50b1N0cmluZ1RhZ10oKXtyZXR1cm4iU291cmNlIn19ZnVuY3Rpb24gaWUoZSx0KXtyZXR1cm4gbmV3IHNlKGUsdCkucGFyc2VEb2N1bWVudCgpfWNsYXNzIHNle2NvbnN0cnVjdG9yKGUsdCl7Y29uc3Qgbj1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIHJlfShlKT9lOm5ldyByZShlKTt0aGlzLl9sZXhlcj1uZXcgTChuKSx0aGlzLl9vcHRpb25zPXR9cGFyc2VOYW1lKCl7Y29uc3QgZT10aGlzLmV4cGVjdFRva2VuKFAuTkFNRSk7cmV0dXJuIHRoaXMubm9kZShlLHtraW5kOnguTkFNRSx2YWx1ZTplLnZhbHVlfSl9cGFyc2VEb2N1bWVudCgpe3JldHVybiB0aGlzLm5vZGUodGhpcy5fbGV4ZXIudG9rZW4se2tpbmQ6eC5ET0NVTUVOVCxkZWZpbml0aW9uczp0aGlzLm1hbnkoUC5TT0YsdGhpcy5wYXJzZURlZmluaXRpb24sUC5FT0YpfSl9cGFyc2VEZWZpbml0aW9uKCl7aWYodGhpcy5wZWVrKFAuQlJBQ0VfTCkpcmV0dXJuIHRoaXMucGFyc2VPcGVyYXRpb25EZWZpbml0aW9uKCk7Y29uc3QgZT10aGlzLnBlZWtEZXNjcmlwdGlvbigpLHQ9ZT90aGlzLl9sZXhlci5sb29rYWhlYWQoKTp0aGlzLl9sZXhlci50b2tlbjtpZih0LmtpbmQ9PT1QLk5BTUUpe3N3aXRjaCh0LnZhbHVlKXtjYXNlInNjaGVtYSI6cmV0dXJuIHRoaXMucGFyc2VTY2hlbWFEZWZpbml0aW9uKCk7Y2FzZSJzY2FsYXIiOnJldHVybiB0aGlzLnBhcnNlU2NhbGFyVHlwZURlZmluaXRpb24oKTtjYXNlInR5cGUiOnJldHVybiB0aGlzLnBhcnNlT2JqZWN0VHlwZURlZmluaXRpb24oKTtjYXNlImludGVyZmFjZSI6cmV0dXJuIHRoaXMucGFyc2VJbnRlcmZhY2VUeXBlRGVmaW5pdGlvbigpO2Nhc2UidW5pb24iOnJldHVybiB0aGlzLnBhcnNlVW5pb25UeXBlRGVmaW5pdGlvbigpO2Nhc2UiZW51bSI6cmV0dXJuIHRoaXMucGFyc2VFbnVtVHlwZURlZmluaXRpb24oKTtjYXNlImlucHV0IjpyZXR1cm4gdGhpcy5wYXJzZUlucHV0T2JqZWN0VHlwZURlZmluaXRpb24oKTtjYXNlImRpcmVjdGl2ZSI6cmV0dXJuIHRoaXMucGFyc2VEaXJlY3RpdmVEZWZpbml0aW9uKCl9aWYoZSl0aHJvdyB5KHRoaXMuX2xleGVyLnNvdXJjZSx0aGlzLl9sZXhlci50b2tlbi5zdGFydCwiVW5leHBlY3RlZCBkZXNjcmlwdGlvbiwgZGVzY3JpcHRpb25zIGFyZSBzdXBwb3J0ZWQgb25seSBvbiB0eXBlIGRlZmluaXRpb25zLiIpO3N3aXRjaCh0LnZhbHVlKXtjYXNlInF1ZXJ5IjpjYXNlIm11dGF0aW9uIjpjYXNlInN1YnNjcmlwdGlvbiI6cmV0dXJuIHRoaXMucGFyc2VPcGVyYXRpb25EZWZpbml0aW9uKCk7Y2FzZSJmcmFnbWVudCI6cmV0dXJuIHRoaXMucGFyc2VGcmFnbWVudERlZmluaXRpb24oKTtjYXNlImV4dGVuZCI6cmV0dXJuIHRoaXMucGFyc2VUeXBlU3lzdGVtRXh0ZW5zaW9uKCl9fXRocm93IHRoaXMudW5leHBlY3RlZCh0KX1wYXJzZU9wZXJhdGlvbkRlZmluaXRpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuO2lmKHRoaXMucGVlayhQLkJSQUNFX0wpKXJldHVybiB0aGlzLm5vZGUoZSx7a2luZDp4Lk9QRVJBVElPTl9ERUZJTklUSU9OLG9wZXJhdGlvbjpnLlFVRVJZLG5hbWU6dm9pZCAwLHZhcmlhYmxlRGVmaW5pdGlvbnM6W10sZGlyZWN0aXZlczpbXSxzZWxlY3Rpb25TZXQ6dGhpcy5wYXJzZVNlbGVjdGlvblNldCgpfSk7Y29uc3QgdD10aGlzLnBhcnNlT3BlcmF0aW9uVHlwZSgpO2xldCBuO3JldHVybiB0aGlzLnBlZWsoUC5OQU1FKSYmKG49dGhpcy5wYXJzZU5hbWUoKSksdGhpcy5ub2RlKGUse2tpbmQ6eC5PUEVSQVRJT05fREVGSU5JVElPTixvcGVyYXRpb246dCxuYW1lOm4sdmFyaWFibGVEZWZpbml0aW9uczp0aGlzLnBhcnNlVmFyaWFibGVEZWZpbml0aW9ucygpLGRpcmVjdGl2ZXM6dGhpcy5wYXJzZURpcmVjdGl2ZXMoITEpLHNlbGVjdGlvblNldDp0aGlzLnBhcnNlU2VsZWN0aW9uU2V0KCl9KX1wYXJzZU9wZXJhdGlvblR5cGUoKXtjb25zdCBlPXRoaXMuZXhwZWN0VG9rZW4oUC5OQU1FKTtzd2l0Y2goZS52YWx1ZSl7Y2FzZSJxdWVyeSI6cmV0dXJuIGcuUVVFUlk7Y2FzZSJtdXRhdGlvbiI6cmV0dXJuIGcuTVVUQVRJT047Y2FzZSJzdWJzY3JpcHRpb24iOnJldHVybiBnLlNVQlNDUklQVElPTn10aHJvdyB0aGlzLnVuZXhwZWN0ZWQoZSl9cGFyc2VWYXJpYWJsZURlZmluaXRpb25zKCl7cmV0dXJuIHRoaXMub3B0aW9uYWxNYW55KFAuUEFSRU5fTCx0aGlzLnBhcnNlVmFyaWFibGVEZWZpbml0aW9uLFAuUEFSRU5fUil9cGFyc2VWYXJpYWJsZURlZmluaXRpb24oKXtyZXR1cm4gdGhpcy5ub2RlKHRoaXMuX2xleGVyLnRva2VuLHtraW5kOnguVkFSSUFCTEVfREVGSU5JVElPTix2YXJpYWJsZTp0aGlzLnBhcnNlVmFyaWFibGUoKSx0eXBlOih0aGlzLmV4cGVjdFRva2VuKFAuQ09MT04pLHRoaXMucGFyc2VUeXBlUmVmZXJlbmNlKCkpLGRlZmF1bHRWYWx1ZTp0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oUC5FUVVBTFMpP3RoaXMucGFyc2VDb25zdFZhbHVlTGl0ZXJhbCgpOnZvaWQgMCxkaXJlY3RpdmVzOnRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKX0pfXBhcnNlVmFyaWFibGUoKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuO3JldHVybiB0aGlzLmV4cGVjdFRva2VuKFAuRE9MTEFSKSx0aGlzLm5vZGUoZSx7a2luZDp4LlZBUklBQkxFLG5hbWU6dGhpcy5wYXJzZU5hbWUoKX0pfXBhcnNlU2VsZWN0aW9uU2V0KCl7cmV0dXJuIHRoaXMubm9kZSh0aGlzLl9sZXhlci50b2tlbix7a2luZDp4LlNFTEVDVElPTl9TRVQsc2VsZWN0aW9uczp0aGlzLm1hbnkoUC5CUkFDRV9MLHRoaXMucGFyc2VTZWxlY3Rpb24sUC5CUkFDRV9SKX0pfXBhcnNlU2VsZWN0aW9uKCl7cmV0dXJuIHRoaXMucGVlayhQLlNQUkVBRCk/dGhpcy5wYXJzZUZyYWdtZW50KCk6dGhpcy5wYXJzZUZpZWxkKCl9cGFyc2VGaWVsZCgpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW4sdD10aGlzLnBhcnNlTmFtZSgpO2xldCBuLHI7cmV0dXJuIHRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbihQLkNPTE9OKT8obj10LHI9dGhpcy5wYXJzZU5hbWUoKSk6cj10LHRoaXMubm9kZShlLHtraW5kOnguRklFTEQsYWxpYXM6bixuYW1lOnIsYXJndW1lbnRzOnRoaXMucGFyc2VBcmd1bWVudHMoITEpLGRpcmVjdGl2ZXM6dGhpcy5wYXJzZURpcmVjdGl2ZXMoITEpLHNlbGVjdGlvblNldDp0aGlzLnBlZWsoUC5CUkFDRV9MKT90aGlzLnBhcnNlU2VsZWN0aW9uU2V0KCk6dm9pZCAwfSl9cGFyc2VBcmd1bWVudHMoZSl7Y29uc3QgdD1lP3RoaXMucGFyc2VDb25zdEFyZ3VtZW50OnRoaXMucGFyc2VBcmd1bWVudDtyZXR1cm4gdGhpcy5vcHRpb25hbE1hbnkoUC5QQVJFTl9MLHQsUC5QQVJFTl9SKX1wYXJzZUFyZ3VtZW50KGU9ITEpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW4sbj10aGlzLnBhcnNlTmFtZSgpO3JldHVybiB0aGlzLmV4cGVjdFRva2VuKFAuQ09MT04pLHRoaXMubm9kZSh0LHtraW5kOnguQVJHVU1FTlQsbmFtZTpuLHZhbHVlOnRoaXMucGFyc2VWYWx1ZUxpdGVyYWwoZSl9KX1wYXJzZUNvbnN0QXJndW1lbnQoKXtyZXR1cm4gdGhpcy5wYXJzZUFyZ3VtZW50KCEwKX1wYXJzZUZyYWdtZW50KCl7Y29uc3QgZT10aGlzLl9sZXhlci50b2tlbjt0aGlzLmV4cGVjdFRva2VuKFAuU1BSRUFEKTtjb25zdCB0PXRoaXMuZXhwZWN0T3B0aW9uYWxLZXl3b3JkKCJvbiIpO3JldHVybiF0JiZ0aGlzLnBlZWsoUC5OQU1FKT90aGlzLm5vZGUoZSx7a2luZDp4LkZSQUdNRU5UX1NQUkVBRCxuYW1lOnRoaXMucGFyc2VGcmFnbWVudE5hbWUoKSxkaXJlY3RpdmVzOnRoaXMucGFyc2VEaXJlY3RpdmVzKCExKX0pOnRoaXMubm9kZShlLHtraW5kOnguSU5MSU5FX0ZSQUdNRU5ULHR5cGVDb25kaXRpb246dD90aGlzLnBhcnNlTmFtZWRUeXBlKCk6dm9pZCAwLGRpcmVjdGl2ZXM6dGhpcy5wYXJzZURpcmVjdGl2ZXMoITEpLHNlbGVjdGlvblNldDp0aGlzLnBhcnNlU2VsZWN0aW9uU2V0KCl9KX1wYXJzZUZyYWdtZW50RGVmaW5pdGlvbigpe3ZhciBlO2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW47cmV0dXJuIHRoaXMuZXhwZWN0S2V5d29yZCgiZnJhZ21lbnQiKSwhMD09PShudWxsPT09KGU9dGhpcy5fb3B0aW9ucyl8fHZvaWQgMD09PWU/dm9pZCAwOmUuYWxsb3dMZWdhY3lGcmFnbWVudFZhcmlhYmxlcyk/dGhpcy5ub2RlKHQse2tpbmQ6eC5GUkFHTUVOVF9ERUZJTklUSU9OLG5hbWU6dGhpcy5wYXJzZUZyYWdtZW50TmFtZSgpLHZhcmlhYmxlRGVmaW5pdGlvbnM6dGhpcy5wYXJzZVZhcmlhYmxlRGVmaW5pdGlvbnMoKSx0eXBlQ29uZGl0aW9uOih0aGlzLmV4cGVjdEtleXdvcmQoIm9uIiksdGhpcy5wYXJzZU5hbWVkVHlwZSgpKSxkaXJlY3RpdmVzOnRoaXMucGFyc2VEaXJlY3RpdmVzKCExKSxzZWxlY3Rpb25TZXQ6dGhpcy5wYXJzZVNlbGVjdGlvblNldCgpfSk6dGhpcy5ub2RlKHQse2tpbmQ6eC5GUkFHTUVOVF9ERUZJTklUSU9OLG5hbWU6dGhpcy5wYXJzZUZyYWdtZW50TmFtZSgpLHR5cGVDb25kaXRpb246KHRoaXMuZXhwZWN0S2V5d29yZCgib24iKSx0aGlzLnBhcnNlTmFtZWRUeXBlKCkpLGRpcmVjdGl2ZXM6dGhpcy5wYXJzZURpcmVjdGl2ZXMoITEpLHNlbGVjdGlvblNldDp0aGlzLnBhcnNlU2VsZWN0aW9uU2V0KCl9KX1wYXJzZUZyYWdtZW50TmFtZSgpe2lmKCJvbiI9PT10aGlzLl9sZXhlci50b2tlbi52YWx1ZSl0aHJvdyB0aGlzLnVuZXhwZWN0ZWQoKTtyZXR1cm4gdGhpcy5wYXJzZU5hbWUoKX1wYXJzZVZhbHVlTGl0ZXJhbChlKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuO3N3aXRjaCh0LmtpbmQpe2Nhc2UgUC5CUkFDS0VUX0w6cmV0dXJuIHRoaXMucGFyc2VMaXN0KGUpO2Nhc2UgUC5CUkFDRV9MOnJldHVybiB0aGlzLnBhcnNlT2JqZWN0KGUpO2Nhc2UgUC5JTlQ6cmV0dXJuIHRoaXMuX2xleGVyLmFkdmFuY2UoKSx0aGlzLm5vZGUodCx7a2luZDp4LklOVCx2YWx1ZTp0LnZhbHVlfSk7Y2FzZSBQLkZMT0FUOnJldHVybiB0aGlzLl9sZXhlci5hZHZhbmNlKCksdGhpcy5ub2RlKHQse2tpbmQ6eC5GTE9BVCx2YWx1ZTp0LnZhbHVlfSk7Y2FzZSBQLlNUUklORzpjYXNlIFAuQkxPQ0tfU1RSSU5HOnJldHVybiB0aGlzLnBhcnNlU3RyaW5nTGl0ZXJhbCgpO2Nhc2UgUC5OQU1FOnN3aXRjaCh0aGlzLl9sZXhlci5hZHZhbmNlKCksdC52YWx1ZSl7Y2FzZSJ0cnVlIjpyZXR1cm4gdGhpcy5ub2RlKHQse2tpbmQ6eC5CT09MRUFOLHZhbHVlOiEwfSk7Y2FzZSJmYWxzZSI6cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOnguQk9PTEVBTix2YWx1ZTohMX0pO2Nhc2UibnVsbCI6cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOnguTlVMTH0pO2RlZmF1bHQ6cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOnguRU5VTSx2YWx1ZTp0LnZhbHVlfSl9Y2FzZSBQLkRPTExBUjppZihlKXtpZih0aGlzLmV4cGVjdFRva2VuKFAuRE9MTEFSKSx0aGlzLl9sZXhlci50b2tlbi5raW5kPT09UC5OQU1FKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLnZhbHVlO3Rocm93IHkodGhpcy5fbGV4ZXIuc291cmNlLHQuc3RhcnQsYFVuZXhwZWN0ZWQgdmFyaWFibGUgIiQke2V9IiBpbiBjb25zdGFudCB2YWx1ZS5gKX10aHJvdyB0aGlzLnVuZXhwZWN0ZWQodCl9cmV0dXJuIHRoaXMucGFyc2VWYXJpYWJsZSgpO2RlZmF1bHQ6dGhyb3cgdGhpcy51bmV4cGVjdGVkKCl9fXBhcnNlQ29uc3RWYWx1ZUxpdGVyYWwoKXtyZXR1cm4gdGhpcy5wYXJzZVZhbHVlTGl0ZXJhbCghMCl9cGFyc2VTdHJpbmdMaXRlcmFsKCl7Y29uc3QgZT10aGlzLl9sZXhlci50b2tlbjtyZXR1cm4gdGhpcy5fbGV4ZXIuYWR2YW5jZSgpLHRoaXMubm9kZShlLHtraW5kOnguU1RSSU5HLHZhbHVlOmUudmFsdWUsYmxvY2s6ZS5raW5kPT09UC5CTE9DS19TVFJJTkd9KX1wYXJzZUxpc3QoZSl7cmV0dXJuIHRoaXMubm9kZSh0aGlzLl9sZXhlci50b2tlbix7a2luZDp4LkxJU1QsdmFsdWVzOnRoaXMuYW55KFAuQlJBQ0tFVF9MLCgoKT0+dGhpcy5wYXJzZVZhbHVlTGl0ZXJhbChlKSksUC5CUkFDS0VUX1IpfSl9cGFyc2VPYmplY3QoZSl7cmV0dXJuIHRoaXMubm9kZSh0aGlzLl9sZXhlci50b2tlbix7a2luZDp4Lk9CSkVDVCxmaWVsZHM6dGhpcy5hbnkoUC5CUkFDRV9MLCgoKT0+dGhpcy5wYXJzZU9iamVjdEZpZWxkKGUpKSxQLkJSQUNFX1IpfSl9cGFyc2VPYmplY3RGaWVsZChlKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuLG49dGhpcy5wYXJzZU5hbWUoKTtyZXR1cm4gdGhpcy5leHBlY3RUb2tlbihQLkNPTE9OKSx0aGlzLm5vZGUodCx7a2luZDp4Lk9CSkVDVF9GSUVMRCxuYW1lOm4sdmFsdWU6dGhpcy5wYXJzZVZhbHVlTGl0ZXJhbChlKX0pfXBhcnNlRGlyZWN0aXZlcyhlKXtjb25zdCB0PVtdO2Zvcig7dGhpcy5wZWVrKFAuQVQpOyl0LnB1c2godGhpcy5wYXJzZURpcmVjdGl2ZShlKSk7cmV0dXJuIHR9cGFyc2VDb25zdERpcmVjdGl2ZXMoKXtyZXR1cm4gdGhpcy5wYXJzZURpcmVjdGl2ZXMoITApfXBhcnNlRGlyZWN0aXZlKGUpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW47cmV0dXJuIHRoaXMuZXhwZWN0VG9rZW4oUC5BVCksdGhpcy5ub2RlKHQse2tpbmQ6eC5ESVJFQ1RJVkUsbmFtZTp0aGlzLnBhcnNlTmFtZSgpLGFyZ3VtZW50czp0aGlzLnBhcnNlQXJndW1lbnRzKGUpfSl9cGFyc2VUeXBlUmVmZXJlbmNlKCl7Y29uc3QgZT10aGlzLl9sZXhlci50b2tlbjtsZXQgdDtpZih0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oUC5CUkFDS0VUX0wpKXtjb25zdCBuPXRoaXMucGFyc2VUeXBlUmVmZXJlbmNlKCk7dGhpcy5leHBlY3RUb2tlbihQLkJSQUNLRVRfUiksdD10aGlzLm5vZGUoZSx7a2luZDp4LkxJU1RfVFlQRSx0eXBlOm59KX1lbHNlIHQ9dGhpcy5wYXJzZU5hbWVkVHlwZSgpO3JldHVybiB0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oUC5CQU5HKT90aGlzLm5vZGUoZSx7a2luZDp4Lk5PTl9OVUxMX1RZUEUsdHlwZTp0fSk6dH1wYXJzZU5hbWVkVHlwZSgpe3JldHVybiB0aGlzLm5vZGUodGhpcy5fbGV4ZXIudG9rZW4se2tpbmQ6eC5OQU1FRF9UWVBFLG5hbWU6dGhpcy5wYXJzZU5hbWUoKX0pfXBlZWtEZXNjcmlwdGlvbigpe3JldHVybiB0aGlzLnBlZWsoUC5TVFJJTkcpfHx0aGlzLnBlZWsoUC5CTE9DS19TVFJJTkcpfXBhcnNlRGVzY3JpcHRpb24oKXtpZih0aGlzLnBlZWtEZXNjcmlwdGlvbigpKXJldHVybiB0aGlzLnBhcnNlU3RyaW5nTGl0ZXJhbCgpfXBhcnNlU2NoZW1hRGVmaW5pdGlvbigpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW4sdD10aGlzLnBhcnNlRGVzY3JpcHRpb24oKTt0aGlzLmV4cGVjdEtleXdvcmQoInNjaGVtYSIpO2NvbnN0IG49dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpLHI9dGhpcy5tYW55KFAuQlJBQ0VfTCx0aGlzLnBhcnNlT3BlcmF0aW9uVHlwZURlZmluaXRpb24sUC5CUkFDRV9SKTtyZXR1cm4gdGhpcy5ub2RlKGUse2tpbmQ6eC5TQ0hFTUFfREVGSU5JVElPTixkZXNjcmlwdGlvbjp0LGRpcmVjdGl2ZXM6bixvcGVyYXRpb25UeXBlczpyfSl9cGFyc2VPcGVyYXRpb25UeXBlRGVmaW5pdGlvbigpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW4sdD10aGlzLnBhcnNlT3BlcmF0aW9uVHlwZSgpO3RoaXMuZXhwZWN0VG9rZW4oUC5DT0xPTik7Y29uc3Qgbj10aGlzLnBhcnNlTmFtZWRUeXBlKCk7cmV0dXJuIHRoaXMubm9kZShlLHtraW5kOnguT1BFUkFUSU9OX1RZUEVfREVGSU5JVElPTixvcGVyYXRpb246dCx0eXBlOm59KX1wYXJzZVNjYWxhclR5cGVEZWZpbml0aW9uKCl7Y29uc3QgZT10aGlzLl9sZXhlci50b2tlbix0PXRoaXMucGFyc2VEZXNjcmlwdGlvbigpO3RoaXMuZXhwZWN0S2V5d29yZCgic2NhbGFyIik7Y29uc3Qgbj10aGlzLnBhcnNlTmFtZSgpLHI9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDp4LlNDQUxBUl9UWVBFX0RFRklOSVRJT04sZGVzY3JpcHRpb246dCxuYW1lOm4sZGlyZWN0aXZlczpyfSl9cGFyc2VPYmplY3RUeXBlRGVmaW5pdGlvbigpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW4sdD10aGlzLnBhcnNlRGVzY3JpcHRpb24oKTt0aGlzLmV4cGVjdEtleXdvcmQoInR5cGUiKTtjb25zdCBuPXRoaXMucGFyc2VOYW1lKCkscj10aGlzLnBhcnNlSW1wbGVtZW50c0ludGVyZmFjZXMoKSxpPXRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKSxzPXRoaXMucGFyc2VGaWVsZHNEZWZpbml0aW9uKCk7cmV0dXJuIHRoaXMubm9kZShlLHtraW5kOnguT0JKRUNUX1RZUEVfREVGSU5JVElPTixkZXNjcmlwdGlvbjp0LG5hbWU6bixpbnRlcmZhY2VzOnIsZGlyZWN0aXZlczppLGZpZWxkczpzfSl9cGFyc2VJbXBsZW1lbnRzSW50ZXJmYWNlcygpe3JldHVybiB0aGlzLmV4cGVjdE9wdGlvbmFsS2V5d29yZCgiaW1wbGVtZW50cyIpP3RoaXMuZGVsaW1pdGVkTWFueShQLkFNUCx0aGlzLnBhcnNlTmFtZWRUeXBlKTpbXX1wYXJzZUZpZWxkc0RlZmluaXRpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25hbE1hbnkoUC5CUkFDRV9MLHRoaXMucGFyc2VGaWVsZERlZmluaXRpb24sUC5CUkFDRV9SKX1wYXJzZUZpZWxkRGVmaW5pdGlvbigpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW4sdD10aGlzLnBhcnNlRGVzY3JpcHRpb24oKSxuPXRoaXMucGFyc2VOYW1lKCkscj10aGlzLnBhcnNlQXJndW1lbnREZWZzKCk7dGhpcy5leHBlY3RUb2tlbihQLkNPTE9OKTtjb25zdCBpPXRoaXMucGFyc2VUeXBlUmVmZXJlbmNlKCkscz10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCk7cmV0dXJuIHRoaXMubm9kZShlLHtraW5kOnguRklFTERfREVGSU5JVElPTixkZXNjcmlwdGlvbjp0LG5hbWU6bixhcmd1bWVudHM6cix0eXBlOmksZGlyZWN0aXZlczpzfSl9cGFyc2VBcmd1bWVudERlZnMoKXtyZXR1cm4gdGhpcy5vcHRpb25hbE1hbnkoUC5QQVJFTl9MLHRoaXMucGFyc2VJbnB1dFZhbHVlRGVmLFAuUEFSRU5fUil9cGFyc2VJbnB1dFZhbHVlRGVmKCl7Y29uc3QgZT10aGlzLl9sZXhlci50b2tlbix0PXRoaXMucGFyc2VEZXNjcmlwdGlvbigpLG49dGhpcy5wYXJzZU5hbWUoKTt0aGlzLmV4cGVjdFRva2VuKFAuQ09MT04pO2NvbnN0IHI9dGhpcy5wYXJzZVR5cGVSZWZlcmVuY2UoKTtsZXQgaTt0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oUC5FUVVBTFMpJiYoaT10aGlzLnBhcnNlQ29uc3RWYWx1ZUxpdGVyYWwoKSk7Y29uc3Qgcz10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCk7cmV0dXJuIHRoaXMubm9kZShlLHtraW5kOnguSU5QVVRfVkFMVUVfREVGSU5JVElPTixkZXNjcmlwdGlvbjp0LG5hbWU6bix0eXBlOnIsZGVmYXVsdFZhbHVlOmksZGlyZWN0aXZlczpzfSl9cGFyc2VJbnRlcmZhY2VUeXBlRGVmaW5pdGlvbigpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW4sdD10aGlzLnBhcnNlRGVzY3JpcHRpb24oKTt0aGlzLmV4cGVjdEtleXdvcmQoImludGVyZmFjZSIpO2NvbnN0IG49dGhpcy5wYXJzZU5hbWUoKSxyPXRoaXMucGFyc2VJbXBsZW1lbnRzSW50ZXJmYWNlcygpLGk9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpLHM9dGhpcy5wYXJzZUZpZWxkc0RlZmluaXRpb24oKTtyZXR1cm4gdGhpcy5ub2RlKGUse2tpbmQ6eC5JTlRFUkZBQ0VfVFlQRV9ERUZJTklUSU9OLGRlc2NyaXB0aW9uOnQsbmFtZTpuLGludGVyZmFjZXM6cixkaXJlY3RpdmVzOmksZmllbGRzOnN9KX1wYXJzZVVuaW9uVHlwZURlZmluaXRpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLHQ9dGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7dGhpcy5leHBlY3RLZXl3b3JkKCJ1bmlvbiIpO2NvbnN0IG49dGhpcy5wYXJzZU5hbWUoKSxyPXRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKSxpPXRoaXMucGFyc2VVbmlvbk1lbWJlclR5cGVzKCk7cmV0dXJuIHRoaXMubm9kZShlLHtraW5kOnguVU5JT05fVFlQRV9ERUZJTklUSU9OLGRlc2NyaXB0aW9uOnQsbmFtZTpuLGRpcmVjdGl2ZXM6cix0eXBlczppfSl9cGFyc2VVbmlvbk1lbWJlclR5cGVzKCl7cmV0dXJuIHRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbihQLkVRVUFMUyk/dGhpcy5kZWxpbWl0ZWRNYW55KFAuUElQRSx0aGlzLnBhcnNlTmFtZWRUeXBlKTpbXX1wYXJzZUVudW1UeXBlRGVmaW5pdGlvbigpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW4sdD10aGlzLnBhcnNlRGVzY3JpcHRpb24oKTt0aGlzLmV4cGVjdEtleXdvcmQoImVudW0iKTtjb25zdCBuPXRoaXMucGFyc2VOYW1lKCkscj10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCksaT10aGlzLnBhcnNlRW51bVZhbHVlc0RlZmluaXRpb24oKTtyZXR1cm4gdGhpcy5ub2RlKGUse2tpbmQ6eC5FTlVNX1RZUEVfREVGSU5JVElPTixkZXNjcmlwdGlvbjp0LG5hbWU6bixkaXJlY3RpdmVzOnIsdmFsdWVzOml9KX1wYXJzZUVudW1WYWx1ZXNEZWZpbml0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9uYWxNYW55KFAuQlJBQ0VfTCx0aGlzLnBhcnNlRW51bVZhbHVlRGVmaW5pdGlvbixQLkJSQUNFX1IpfXBhcnNlRW51bVZhbHVlRGVmaW5pdGlvbigpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW4sdD10aGlzLnBhcnNlRGVzY3JpcHRpb24oKSxuPXRoaXMucGFyc2VFbnVtVmFsdWVOYW1lKCkscj10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCk7cmV0dXJuIHRoaXMubm9kZShlLHtraW5kOnguRU5VTV9WQUxVRV9ERUZJTklUSU9OLGRlc2NyaXB0aW9uOnQsbmFtZTpuLGRpcmVjdGl2ZXM6cn0pfXBhcnNlRW51bVZhbHVlTmFtZSgpe2lmKCJ0cnVlIj09PXRoaXMuX2xleGVyLnRva2VuLnZhbHVlfHwiZmFsc2UiPT09dGhpcy5fbGV4ZXIudG9rZW4udmFsdWV8fCJudWxsIj09PXRoaXMuX2xleGVyLnRva2VuLnZhbHVlKXRocm93IHkodGhpcy5fbGV4ZXIuc291cmNlLHRoaXMuX2xleGVyLnRva2VuLnN0YXJ0LGAke29lKHRoaXMuX2xleGVyLnRva2VuKX0gaXMgcmVzZXJ2ZWQgYW5kIGNhbm5vdCBiZSB1c2VkIGZvciBhbiBlbnVtIHZhbHVlLmApO3JldHVybiB0aGlzLnBhcnNlTmFtZSgpfXBhcnNlSW5wdXRPYmplY3RUeXBlRGVmaW5pdGlvbigpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW4sdD10aGlzLnBhcnNlRGVzY3JpcHRpb24oKTt0aGlzLmV4cGVjdEtleXdvcmQoImlucHV0Iik7Y29uc3Qgbj10aGlzLnBhcnNlTmFtZSgpLHI9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpLGk9dGhpcy5wYXJzZUlucHV0RmllbGRzRGVmaW5pdGlvbigpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDp4LklOUFVUX09CSkVDVF9UWVBFX0RFRklOSVRJT04sZGVzY3JpcHRpb246dCxuYW1lOm4sZGlyZWN0aXZlczpyLGZpZWxkczppfSl9cGFyc2VJbnB1dEZpZWxkc0RlZmluaXRpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25hbE1hbnkoUC5CUkFDRV9MLHRoaXMucGFyc2VJbnB1dFZhbHVlRGVmLFAuQlJBQ0VfUil9cGFyc2VUeXBlU3lzdGVtRXh0ZW5zaW9uKCl7Y29uc3QgZT10aGlzLl9sZXhlci5sb29rYWhlYWQoKTtpZihlLmtpbmQ9PT1QLk5BTUUpc3dpdGNoKGUudmFsdWUpe2Nhc2Uic2NoZW1hIjpyZXR1cm4gdGhpcy5wYXJzZVNjaGVtYUV4dGVuc2lvbigpO2Nhc2Uic2NhbGFyIjpyZXR1cm4gdGhpcy5wYXJzZVNjYWxhclR5cGVFeHRlbnNpb24oKTtjYXNlInR5cGUiOnJldHVybiB0aGlzLnBhcnNlT2JqZWN0VHlwZUV4dGVuc2lvbigpO2Nhc2UiaW50ZXJmYWNlIjpyZXR1cm4gdGhpcy5wYXJzZUludGVyZmFjZVR5cGVFeHRlbnNpb24oKTtjYXNlInVuaW9uIjpyZXR1cm4gdGhpcy5wYXJzZVVuaW9uVHlwZUV4dGVuc2lvbigpO2Nhc2UiZW51bSI6cmV0dXJuIHRoaXMucGFyc2VFbnVtVHlwZUV4dGVuc2lvbigpO2Nhc2UiaW5wdXQiOnJldHVybiB0aGlzLnBhcnNlSW5wdXRPYmplY3RUeXBlRXh0ZW5zaW9uKCl9dGhyb3cgdGhpcy51bmV4cGVjdGVkKGUpfXBhcnNlU2NoZW1hRXh0ZW5zaW9uKCl7Y29uc3QgZT10aGlzLl9sZXhlci50b2tlbjt0aGlzLmV4cGVjdEtleXdvcmQoImV4dGVuZCIpLHRoaXMuZXhwZWN0S2V5d29yZCgic2NoZW1hIik7Y29uc3QgdD10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCksbj10aGlzLm9wdGlvbmFsTWFueShQLkJSQUNFX0wsdGhpcy5wYXJzZU9wZXJhdGlvblR5cGVEZWZpbml0aW9uLFAuQlJBQ0VfUik7aWYoMD09PXQubGVuZ3RoJiYwPT09bi5sZW5ndGgpdGhyb3cgdGhpcy51bmV4cGVjdGVkKCk7cmV0dXJuIHRoaXMubm9kZShlLHtraW5kOnguU0NIRU1BX0VYVEVOU0lPTixkaXJlY3RpdmVzOnQsb3BlcmF0aW9uVHlwZXM6bn0pfXBhcnNlU2NhbGFyVHlwZUV4dGVuc2lvbigpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW47dGhpcy5leHBlY3RLZXl3b3JkKCJleHRlbmQiKSx0aGlzLmV4cGVjdEtleXdvcmQoInNjYWxhciIpO2NvbnN0IHQ9dGhpcy5wYXJzZU5hbWUoKSxuPXRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKTtpZigwPT09bi5sZW5ndGgpdGhyb3cgdGhpcy51bmV4cGVjdGVkKCk7cmV0dXJuIHRoaXMubm9kZShlLHtraW5kOnguU0NBTEFSX1RZUEVfRVhURU5TSU9OLG5hbWU6dCxkaXJlY3RpdmVzOm59KX1wYXJzZU9iamVjdFR5cGVFeHRlbnNpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuO3RoaXMuZXhwZWN0S2V5d29yZCgiZXh0ZW5kIiksdGhpcy5leHBlY3RLZXl3b3JkKCJ0eXBlIik7Y29uc3QgdD10aGlzLnBhcnNlTmFtZSgpLG49dGhpcy5wYXJzZUltcGxlbWVudHNJbnRlcmZhY2VzKCkscj10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCksaT10aGlzLnBhcnNlRmllbGRzRGVmaW5pdGlvbigpO2lmKDA9PT1uLmxlbmd0aCYmMD09PXIubGVuZ3RoJiYwPT09aS5sZW5ndGgpdGhyb3cgdGhpcy51bmV4cGVjdGVkKCk7cmV0dXJuIHRoaXMubm9kZShlLHtraW5kOnguT0JKRUNUX1RZUEVfRVhURU5TSU9OLG5hbWU6dCxpbnRlcmZhY2VzOm4sZGlyZWN0aXZlczpyLGZpZWxkczppfSl9cGFyc2VJbnRlcmZhY2VUeXBlRXh0ZW5zaW9uKCl7Y29uc3QgZT10aGlzLl9sZXhlci50b2tlbjt0aGlzLmV4cGVjdEtleXdvcmQoImV4dGVuZCIpLHRoaXMuZXhwZWN0S2V5d29yZCgiaW50ZXJmYWNlIik7Y29uc3QgdD10aGlzLnBhcnNlTmFtZSgpLG49dGhpcy5wYXJzZUltcGxlbWVudHNJbnRlcmZhY2VzKCkscj10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCksaT10aGlzLnBhcnNlRmllbGRzRGVmaW5pdGlvbigpO2lmKDA9PT1uLmxlbmd0aCYmMD09PXIubGVuZ3RoJiYwPT09aS5sZW5ndGgpdGhyb3cgdGhpcy51bmV4cGVjdGVkKCk7cmV0dXJuIHRoaXMubm9kZShlLHtraW5kOnguSU5URVJGQUNFX1RZUEVfRVhURU5TSU9OLG5hbWU6dCxpbnRlcmZhY2VzOm4sZGlyZWN0aXZlczpyLGZpZWxkczppfSl9cGFyc2VVbmlvblR5cGVFeHRlbnNpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuO3RoaXMuZXhwZWN0S2V5d29yZCgiZXh0ZW5kIiksdGhpcy5leHBlY3RLZXl3b3JkKCJ1bmlvbiIpO2NvbnN0IHQ9dGhpcy5wYXJzZU5hbWUoKSxuPXRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKSxyPXRoaXMucGFyc2VVbmlvbk1lbWJlclR5cGVzKCk7aWYoMD09PW4ubGVuZ3RoJiYwPT09ci5sZW5ndGgpdGhyb3cgdGhpcy51bmV4cGVjdGVkKCk7cmV0dXJuIHRoaXMubm9kZShlLHtraW5kOnguVU5JT05fVFlQRV9FWFRFTlNJT04sbmFtZTp0LGRpcmVjdGl2ZXM6bix0eXBlczpyfSl9cGFyc2VFbnVtVHlwZUV4dGVuc2lvbigpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW47dGhpcy5leHBlY3RLZXl3b3JkKCJleHRlbmQiKSx0aGlzLmV4cGVjdEtleXdvcmQoImVudW0iKTtjb25zdCB0PXRoaXMucGFyc2VOYW1lKCksbj10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCkscj10aGlzLnBhcnNlRW51bVZhbHVlc0RlZmluaXRpb24oKTtpZigwPT09bi5sZW5ndGgmJjA9PT1yLmxlbmd0aCl0aHJvdyB0aGlzLnVuZXhwZWN0ZWQoKTtyZXR1cm4gdGhpcy5ub2RlKGUse2tpbmQ6eC5FTlVNX1RZUEVfRVhURU5TSU9OLG5hbWU6dCxkaXJlY3RpdmVzOm4sdmFsdWVzOnJ9KX1wYXJzZUlucHV0T2JqZWN0VHlwZUV4dGVuc2lvbigpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW47dGhpcy5leHBlY3RLZXl3b3JkKCJleHRlbmQiKSx0aGlzLmV4cGVjdEtleXdvcmQoImlucHV0Iik7Y29uc3QgdD10aGlzLnBhcnNlTmFtZSgpLG49dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpLHI9dGhpcy5wYXJzZUlucHV0RmllbGRzRGVmaW5pdGlvbigpO2lmKDA9PT1uLmxlbmd0aCYmMD09PXIubGVuZ3RoKXRocm93IHRoaXMudW5leHBlY3RlZCgpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDp4LklOUFVUX09CSkVDVF9UWVBFX0VYVEVOU0lPTixuYW1lOnQsZGlyZWN0aXZlczpuLGZpZWxkczpyfSl9cGFyc2VEaXJlY3RpdmVEZWZpbml0aW9uKCl7Y29uc3QgZT10aGlzLl9sZXhlci50b2tlbix0PXRoaXMucGFyc2VEZXNjcmlwdGlvbigpO3RoaXMuZXhwZWN0S2V5d29yZCgiZGlyZWN0aXZlIiksdGhpcy5leHBlY3RUb2tlbihQLkFUKTtjb25zdCBuPXRoaXMucGFyc2VOYW1lKCkscj10aGlzLnBhcnNlQXJndW1lbnREZWZzKCksaT10aGlzLmV4cGVjdE9wdGlvbmFsS2V5d29yZCgicmVwZWF0YWJsZSIpO3RoaXMuZXhwZWN0S2V5d29yZCgib24iKTtjb25zdCBzPXRoaXMucGFyc2VEaXJlY3RpdmVMb2NhdGlvbnMoKTtyZXR1cm4gdGhpcy5ub2RlKGUse2tpbmQ6eC5ESVJFQ1RJVkVfREVGSU5JVElPTixkZXNjcmlwdGlvbjp0LG5hbWU6bixhcmd1bWVudHM6cixyZXBlYXRhYmxlOmksbG9jYXRpb25zOnN9KX1wYXJzZURpcmVjdGl2ZUxvY2F0aW9ucygpe3JldHVybiB0aGlzLmRlbGltaXRlZE1hbnkoUC5QSVBFLHRoaXMucGFyc2VEaXJlY3RpdmVMb2NhdGlvbil9cGFyc2VEaXJlY3RpdmVMb2NhdGlvbigpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW4sdD10aGlzLnBhcnNlTmFtZSgpO2lmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChPLHQudmFsdWUpKXJldHVybiB0O3Rocm93IHRoaXMudW5leHBlY3RlZChlKX1ub2RlKGUsdCl7dmFyIG47cmV0dXJuITAhPT0obnVsbD09PShuPXRoaXMuX29wdGlvbnMpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLm5vTG9jYXRpb24pJiYodC5sb2M9bmV3IHYoZSx0aGlzLl9sZXhlci5sYXN0VG9rZW4sdGhpcy5fbGV4ZXIuc291cmNlKSksdH1wZWVrKGUpe3JldHVybiB0aGlzLl9sZXhlci50b2tlbi5raW5kPT09ZX1leHBlY3RUb2tlbihlKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuO2lmKHQua2luZD09PWUpcmV0dXJuIHRoaXMuX2xleGVyLmFkdmFuY2UoKSx0O3Rocm93IHkodGhpcy5fbGV4ZXIuc291cmNlLHQuc3RhcnQsYEV4cGVjdGVkICR7YWUoZSl9LCBmb3VuZCAke29lKHQpfS5gKX1leHBlY3RPcHRpb25hbFRva2VuKGUpe3JldHVybiB0aGlzLl9sZXhlci50b2tlbi5raW5kPT09ZSYmKHRoaXMuX2xleGVyLmFkdmFuY2UoKSwhMCl9ZXhwZWN0S2V5d29yZChlKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuO2lmKHQua2luZCE9PVAuTkFNRXx8dC52YWx1ZSE9PWUpdGhyb3cgeSh0aGlzLl9sZXhlci5zb3VyY2UsdC5zdGFydCxgRXhwZWN0ZWQgIiR7ZX0iLCBmb3VuZCAke29lKHQpfS5gKTt0aGlzLl9sZXhlci5hZHZhbmNlKCl9ZXhwZWN0T3B0aW9uYWxLZXl3b3JkKGUpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW47cmV0dXJuIHQua2luZD09PVAuTkFNRSYmdC52YWx1ZT09PWUmJih0aGlzLl9sZXhlci5hZHZhbmNlKCksITApfXVuZXhwZWN0ZWQoZSl7Y29uc3QgdD1udWxsIT1lP2U6dGhpcy5fbGV4ZXIudG9rZW47cmV0dXJuIHkodGhpcy5fbGV4ZXIuc291cmNlLHQuc3RhcnQsYFVuZXhwZWN0ZWQgJHtvZSh0KX0uYCl9YW55KGUsdCxuKXt0aGlzLmV4cGVjdFRva2VuKGUpO2NvbnN0IHI9W107Zm9yKDshdGhpcy5leHBlY3RPcHRpb25hbFRva2VuKG4pOylyLnB1c2godC5jYWxsKHRoaXMpKTtyZXR1cm4gcn1vcHRpb25hbE1hbnkoZSx0LG4pe2lmKHRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbihlKSl7Y29uc3QgZT1bXTtkb3tlLnB1c2godC5jYWxsKHRoaXMpKX13aGlsZSghdGhpcy5leHBlY3RPcHRpb25hbFRva2VuKG4pKTtyZXR1cm4gZX1yZXR1cm5bXX1tYW55KGUsdCxuKXt0aGlzLmV4cGVjdFRva2VuKGUpO2NvbnN0IHI9W107ZG97ci5wdXNoKHQuY2FsbCh0aGlzKSl9d2hpbGUoIXRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbihuKSk7cmV0dXJuIHJ9ZGVsaW1pdGVkTWFueShlLHQpe3RoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbihlKTtjb25zdCBuPVtdO2Rve24ucHVzaCh0LmNhbGwodGhpcykpfXdoaWxlKHRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbihlKSk7cmV0dXJuIG59fWZ1bmN0aW9uIG9lKGUpe2NvbnN0IHQ9ZS52YWx1ZTtyZXR1cm4gYWUoZS5raW5kKSsobnVsbCE9dD9gICIke3R9ImA6IiIpfWZ1bmN0aW9uIGFlKGUpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZT09PVAuQkFOR3x8ZT09PVAuRE9MTEFSfHxlPT09UC5BTVB8fGU9PT1QLlBBUkVOX0x8fGU9PT1QLlBBUkVOX1J8fGU9PT1QLlNQUkVBRHx8ZT09PVAuQ09MT058fGU9PT1QLkVRVUFMU3x8ZT09PVAuQVR8fGU9PT1QLkJSQUNLRVRfTHx8ZT09PVAuQlJBQ0tFVF9SfHxlPT09UC5CUkFDRV9MfHxlPT09UC5QSVBFfHxlPT09UC5CUkFDRV9SfShlKT9gIiR7ZX0iYDplfXZhciBjZT1PYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbCxQYXJzZXI6c2UscGFyc2U6aWUscGFyc2VDb25zdFZhbHVlOmZ1bmN0aW9uKGUsdCl7Y29uc3Qgbj1uZXcgc2UoZSx0KTtuLmV4cGVjdFRva2VuKFAuU09GKTtjb25zdCByPW4ucGFyc2VDb25zdFZhbHVlTGl0ZXJhbCgpO3JldHVybiBuLmV4cGVjdFRva2VuKFAuRU9GKSxyfSxwYXJzZVR5cGU6ZnVuY3Rpb24oZSx0KXtjb25zdCBuPW5ldyBzZShlLHQpO24uZXhwZWN0VG9rZW4oUC5TT0YpO2NvbnN0IHI9bi5wYXJzZVR5cGVSZWZlcmVuY2UoKTtyZXR1cm4gbi5leHBlY3RUb2tlbihQLkVPRikscn0scGFyc2VWYWx1ZTpmdW5jdGlvbihlLHQpe2NvbnN0IG49bmV3IHNlKGUsdCk7bi5leHBlY3RUb2tlbihQLlNPRik7Y29uc3Qgcj1uLnBhcnNlVmFsdWVMaXRlcmFsKCExKTtyZXR1cm4gbi5leHBlY3RUb2tlbihQLkVPRikscn19KTtjb25zdCB1ZT0vW1x4MDAtXHgxZlx4MjJceDVjXHg3Zi1ceDlmXS9nO2Z1bmN0aW9uIGxlKGUpe3JldHVybiBwZVtlLmNoYXJDb2RlQXQoMCldfWNvbnN0IHBlPVsiXFx1MDAwMCIsIlxcdTAwMDEiLCJcXHUwMDAyIiwiXFx1MDAwMyIsIlxcdTAwMDQiLCJcXHUwMDA1IiwiXFx1MDAwNiIsIlxcdTAwMDciLCJcXGIiLCJcXHQiLCJcXG4iLCJcXHUwMDBCIiwiXFxmIiwiXFxyIiwiXFx1MDAwRSIsIlxcdTAwMEYiLCJcXHUwMDEwIiwiXFx1MDAxMSIsIlxcdTAwMTIiLCJcXHUwMDEzIiwiXFx1MDAxNCIsIlxcdTAwMTUiLCJcXHUwMDE2IiwiXFx1MDAxNyIsIlxcdTAwMTgiLCJcXHUwMDE5IiwiXFx1MDAxQSIsIlxcdTAwMUIiLCJcXHUwMDFDIiwiXFx1MDAxRCIsIlxcdTAwMUUiLCJcXHUwMDFGIiwiIiwiIiwnXFwiJywiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiXFxcXCIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIlxcdTAwN0YiLCJcXHUwMDgwIiwiXFx1MDA4MSIsIlxcdTAwODIiLCJcXHUwMDgzIiwiXFx1MDA4NCIsIlxcdTAwODUiLCJcXHUwMDg2IiwiXFx1MDA4NyIsIlxcdTAwODgiLCJcXHUwMDg5IiwiXFx1MDA4QSIsIlxcdTAwOEIiLCJcXHUwMDhDIiwiXFx1MDA4RCIsIlxcdTAwOEUiLCJcXHUwMDhGIiwiXFx1MDA5MCIsIlxcdTAwOTEiLCJcXHUwMDkyIiwiXFx1MDA5MyIsIlxcdTAwOTQiLCJcXHUwMDk1IiwiXFx1MDA5NiIsIlxcdTAwOTciLCJcXHUwMDk4IiwiXFx1MDA5OSIsIlxcdTAwOUEiLCJcXHUwMDlCIiwiXFx1MDA5QyIsIlxcdTAwOUQiLCJcXHUwMDlFIiwiXFx1MDA5RiJdLGRlPU9iamVjdC5mcmVlemUoe30pO2Z1bmN0aW9uIGhlKGUsdCl7Y29uc3Qgbj1lW3RdO3JldHVybiJvYmplY3QiPT10eXBlb2Ygbj9uOiJmdW5jdGlvbiI9PXR5cGVvZiBuP3tlbnRlcjpuLGxlYXZlOnZvaWQgMH06e2VudGVyOmUuZW50ZXIsbGVhdmU6ZS5sZWF2ZX19Y29uc3QgZmU9e05hbWU6e2xlYXZlOmU9PmUudmFsdWV9LFZhcmlhYmxlOntsZWF2ZTplPT4iJCIrZS5uYW1lfSxEb2N1bWVudDp7bGVhdmU6ZT0+eWUoZS5kZWZpbml0aW9ucywiXG5cbiIpfSxPcGVyYXRpb25EZWZpbml0aW9uOntsZWF2ZShlKXtjb25zdCB0PW1lKCIoIix5ZShlLnZhcmlhYmxlRGVmaW5pdGlvbnMsIiwgIiksIikiKSxuPXllKFtlLm9wZXJhdGlvbix5ZShbZS5uYW1lLHRdKSx5ZShlLmRpcmVjdGl2ZXMsIiAiKV0sIiAiKTtyZXR1cm4oInF1ZXJ5Ij09PW4/IiI6bisiICIpK2Uuc2VsZWN0aW9uU2V0fX0sVmFyaWFibGVEZWZpbml0aW9uOntsZWF2ZTooe3ZhcmlhYmxlOmUsdHlwZTp0LGRlZmF1bHRWYWx1ZTpuLGRpcmVjdGl2ZXM6cn0pPT5lKyI6ICIrdCttZSgiID0gIixuKSttZSgiICIseWUociwiICIpKX0sU2VsZWN0aW9uU2V0OntsZWF2ZTooe3NlbGVjdGlvbnM6ZX0pPT52ZShlKX0sRmllbGQ6e2xlYXZlKHthbGlhczplLG5hbWU6dCxhcmd1bWVudHM6bixkaXJlY3RpdmVzOnIsc2VsZWN0aW9uU2V0Oml9KXtjb25zdCBzPW1lKCIiLGUsIjogIikrdDtsZXQgbz1zK21lKCIoIix5ZShuLCIsICIpLCIpIik7cmV0dXJuIG8ubGVuZ3RoPjgwJiYobz1zK21lKCIoXG4iLF9lKHllKG4sIlxuIikpLCJcbikiKSkseWUoW28seWUociwiICIpLGldLCIgIil9fSxBcmd1bWVudDp7bGVhdmU6KHtuYW1lOmUsdmFsdWU6dH0pPT5lKyI6ICIrdH0sRnJhZ21lbnRTcHJlYWQ6e2xlYXZlOih7bmFtZTplLGRpcmVjdGl2ZXM6dH0pPT4iLi4uIitlK21lKCIgIix5ZSh0LCIgIikpfSxJbmxpbmVGcmFnbWVudDp7bGVhdmU6KHt0eXBlQ29uZGl0aW9uOmUsZGlyZWN0aXZlczp0LHNlbGVjdGlvblNldDpufSk9PnllKFsiLi4uIixtZSgib24gIixlKSx5ZSh0LCIgIiksbl0sIiAiKX0sRnJhZ21lbnREZWZpbml0aW9uOntsZWF2ZTooe25hbWU6ZSx0eXBlQ29uZGl0aW9uOnQsdmFyaWFibGVEZWZpbml0aW9uczpuLGRpcmVjdGl2ZXM6cixzZWxlY3Rpb25TZXQ6aX0pPT5gZnJhZ21lbnQgJHtlfSR7bWUoIigiLHllKG4sIiwgIiksIikiKX0gb24gJHt0fSAke21lKCIiLHllKHIsIiAiKSwiICIpfWAraX0sSW50VmFsdWU6e2xlYXZlOih7dmFsdWU6ZX0pPT5lfSxGbG9hdFZhbHVlOntsZWF2ZTooe3ZhbHVlOmV9KT0+ZX0sU3RyaW5nVmFsdWU6e2xlYXZlOih7dmFsdWU6ZSxibG9jazp0fSk9PnQ/ZnVuY3Rpb24oZSx0KXtjb25zdCBuPWUucmVwbGFjZSgvIiIiL2csJ1xcIiIiJykscj1uLnNwbGl0KC9cclxufFtcblxyXS9nKSxpPTE9PT1yLmxlbmd0aCxzPXIubGVuZ3RoPjEmJnIuc2xpY2UoMSkuZXZlcnkoKGU9PjA9PT1lLmxlbmd0aHx8QShlLmNoYXJDb2RlQXQoMCkpKSksbz1uLmVuZHNXaXRoKCdcXCIiIicpLGE9ZS5lbmRzV2l0aCgnIicpJiYhbyxjPWUuZW5kc1dpdGgoIlxcIiksdT1hfHxjLGw9IShudWxsIT10JiZ0Lm1pbmltaXplKSYmKCFpfHxlLmxlbmd0aD43MHx8dXx8c3x8byk7bGV0IHA9IiI7Y29uc3QgZD1pJiZBKGUuY2hhckNvZGVBdCgwKSk7cmV0dXJuKGwmJiFkfHxzKSYmKHArPSJcbiIpLHArPW4sKGx8fHUpJiYocCs9IlxuIiksJyIiIicrcCsnIiIiJ30oZSk6YCIke2UucmVwbGFjZSh1ZSxsZSl9ImB9LEJvb2xlYW5WYWx1ZTp7bGVhdmU6KHt2YWx1ZTplfSk9PmU/InRydWUiOiJmYWxzZSJ9LE51bGxWYWx1ZTp7bGVhdmU6KCk9PiJudWxsIn0sRW51bVZhbHVlOntsZWF2ZTooe3ZhbHVlOmV9KT0+ZX0sTGlzdFZhbHVlOntsZWF2ZTooe3ZhbHVlczplfSk9PiJbIit5ZShlLCIsICIpKyJdIn0sT2JqZWN0VmFsdWU6e2xlYXZlOih7ZmllbGRzOmV9KT0+InsiK3llKGUsIiwgIikrIn0ifSxPYmplY3RGaWVsZDp7bGVhdmU6KHtuYW1lOmUsdmFsdWU6dH0pPT5lKyI6ICIrdH0sRGlyZWN0aXZlOntsZWF2ZTooe25hbWU6ZSxhcmd1bWVudHM6dH0pPT4iQCIrZSttZSgiKCIseWUodCwiLCAiKSwiKSIpfSxOYW1lZFR5cGU6e2xlYXZlOih7bmFtZTplfSk9PmV9LExpc3RUeXBlOntsZWF2ZTooe3R5cGU6ZX0pPT4iWyIrZSsiXSJ9LE5vbk51bGxUeXBlOntsZWF2ZTooe3R5cGU6ZX0pPT5lKyIhIn0sU2NoZW1hRGVmaW5pdGlvbjp7bGVhdmU6KHtkZXNjcmlwdGlvbjplLGRpcmVjdGl2ZXM6dCxvcGVyYXRpb25UeXBlczpufSk9Pm1lKCIiLGUsIlxuIikreWUoWyJzY2hlbWEiLHllKHQsIiAiKSx2ZShuKV0sIiAiKX0sT3BlcmF0aW9uVHlwZURlZmluaXRpb246e2xlYXZlOih7b3BlcmF0aW9uOmUsdHlwZTp0fSk9PmUrIjogIit0fSxTY2FsYXJUeXBlRGVmaW5pdGlvbjp7bGVhdmU6KHtkZXNjcmlwdGlvbjplLG5hbWU6dCxkaXJlY3RpdmVzOm59KT0+bWUoIiIsZSwiXG4iKSt5ZShbInNjYWxhciIsdCx5ZShuLCIgIildLCIgIil9LE9iamVjdFR5cGVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGludGVyZmFjZXM6bixkaXJlY3RpdmVzOnIsZmllbGRzOml9KT0+bWUoIiIsZSwiXG4iKSt5ZShbInR5cGUiLHQsbWUoImltcGxlbWVudHMgIix5ZShuLCIgJiAiKSkseWUociwiICIpLHZlKGkpXSwiICIpfSxGaWVsZERlZmluaXRpb246e2xlYXZlOih7ZGVzY3JpcHRpb246ZSxuYW1lOnQsYXJndW1lbnRzOm4sdHlwZTpyLGRpcmVjdGl2ZXM6aX0pPT5tZSgiIixlLCJcbiIpK3QrKEVlKG4pP21lKCIoXG4iLF9lKHllKG4sIlxuIikpLCJcbikiKTptZSgiKCIseWUobiwiLCAiKSwiKSIpKSsiOiAiK3IrbWUoIiAiLHllKGksIiAiKSl9LElucHV0VmFsdWVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LHR5cGU6bixkZWZhdWx0VmFsdWU6cixkaXJlY3RpdmVzOml9KT0+bWUoIiIsZSwiXG4iKSt5ZShbdCsiOiAiK24sbWUoIj0gIixyKSx5ZShpLCIgIildLCIgIil9LEludGVyZmFjZVR5cGVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGludGVyZmFjZXM6bixkaXJlY3RpdmVzOnIsZmllbGRzOml9KT0+bWUoIiIsZSwiXG4iKSt5ZShbImludGVyZmFjZSIsdCxtZSgiaW1wbGVtZW50cyAiLHllKG4sIiAmICIpKSx5ZShyLCIgIiksdmUoaSldLCIgIil9LFVuaW9uVHlwZURlZmluaXRpb246e2xlYXZlOih7ZGVzY3JpcHRpb246ZSxuYW1lOnQsZGlyZWN0aXZlczpuLHR5cGVzOnJ9KT0+bWUoIiIsZSwiXG4iKSt5ZShbInVuaW9uIix0LHllKG4sIiAiKSxtZSgiPSAiLHllKHIsIiB8ICIpKV0sIiAiKX0sRW51bVR5cGVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGRpcmVjdGl2ZXM6bix2YWx1ZXM6cn0pPT5tZSgiIixlLCJcbiIpK3llKFsiZW51bSIsdCx5ZShuLCIgIiksdmUocildLCIgIil9LEVudW1WYWx1ZURlZmluaXRpb246e2xlYXZlOih7ZGVzY3JpcHRpb246ZSxuYW1lOnQsZGlyZWN0aXZlczpufSk9Pm1lKCIiLGUsIlxuIikreWUoW3QseWUobiwiICIpXSwiICIpfSxJbnB1dE9iamVjdFR5cGVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGRpcmVjdGl2ZXM6bixmaWVsZHM6cn0pPT5tZSgiIixlLCJcbiIpK3llKFsiaW5wdXQiLHQseWUobiwiICIpLHZlKHIpXSwiICIpfSxEaXJlY3RpdmVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGFyZ3VtZW50czpuLHJlcGVhdGFibGU6cixsb2NhdGlvbnM6aX0pPT5tZSgiIixlLCJcbiIpKyJkaXJlY3RpdmUgQCIrdCsoRWUobik/bWUoIihcbiIsX2UoeWUobiwiXG4iKSksIlxuKSIpOm1lKCIoIix5ZShuLCIsICIpLCIpIikpKyhyPyIgcmVwZWF0YWJsZSI6IiIpKyIgb24gIit5ZShpLCIgfCAiKX0sU2NoZW1hRXh0ZW5zaW9uOntsZWF2ZTooe2RpcmVjdGl2ZXM6ZSxvcGVyYXRpb25UeXBlczp0fSk9PnllKFsiZXh0ZW5kIHNjaGVtYSIseWUoZSwiICIpLHZlKHQpXSwiICIpfSxTY2FsYXJUeXBlRXh0ZW5zaW9uOntsZWF2ZTooe25hbWU6ZSxkaXJlY3RpdmVzOnR9KT0+eWUoWyJleHRlbmQgc2NhbGFyIixlLHllKHQsIiAiKV0sIiAiKX0sT2JqZWN0VHlwZUV4dGVuc2lvbjp7bGVhdmU6KHtuYW1lOmUsaW50ZXJmYWNlczp0LGRpcmVjdGl2ZXM6bixmaWVsZHM6cn0pPT55ZShbImV4dGVuZCB0eXBlIixlLG1lKCJpbXBsZW1lbnRzICIseWUodCwiICYgIikpLHllKG4sIiAiKSx2ZShyKV0sIiAiKX0sSW50ZXJmYWNlVHlwZUV4dGVuc2lvbjp7bGVhdmU6KHtuYW1lOmUsaW50ZXJmYWNlczp0LGRpcmVjdGl2ZXM6bixmaWVsZHM6cn0pPT55ZShbImV4dGVuZCBpbnRlcmZhY2UiLGUsbWUoImltcGxlbWVudHMgIix5ZSh0LCIgJiAiKSkseWUobiwiICIpLHZlKHIpXSwiICIpfSxVbmlvblR5cGVFeHRlbnNpb246e2xlYXZlOih7bmFtZTplLGRpcmVjdGl2ZXM6dCx0eXBlczpufSk9PnllKFsiZXh0ZW5kIHVuaW9uIixlLHllKHQsIiAiKSxtZSgiPSAiLHllKG4sIiB8ICIpKV0sIiAiKX0sRW51bVR5cGVFeHRlbnNpb246e2xlYXZlOih7bmFtZTplLGRpcmVjdGl2ZXM6dCx2YWx1ZXM6bn0pPT55ZShbImV4dGVuZCBlbnVtIixlLHllKHQsIiAiKSx2ZShuKV0sIiAiKX0sSW5wdXRPYmplY3RUeXBlRXh0ZW5zaW9uOntsZWF2ZTooe25hbWU6ZSxkaXJlY3RpdmVzOnQsZmllbGRzOm59KT0+eWUoWyJleHRlbmQgaW5wdXQiLGUseWUodCwiICIpLHZlKG4pXSwiICIpfX07ZnVuY3Rpb24geWUoZSx0PSIiKXt2YXIgbjtyZXR1cm4gbnVsbCE9PShuPW51bGw9PWU/dm9pZCAwOmUuZmlsdGVyKChlPT5lKSkuam9pbih0KSkmJnZvaWQgMCE9PW4/bjoiIn1mdW5jdGlvbiB2ZShlKXtyZXR1cm4gbWUoIntcbiIsX2UoeWUoZSwiXG4iKSksIlxufSIpfWZ1bmN0aW9uIG1lKGUsdCxuPSIiKXtyZXR1cm4gbnVsbCE9dCYmIiIhPT10P2UrdCtuOiIifWZ1bmN0aW9uIF9lKGUpe3JldHVybiBtZSgiICAiLGUucmVwbGFjZSgvXG4vZywiXG4gICIpKX1mdW5jdGlvbiBFZShlKXt2YXIgdDtyZXR1cm4gbnVsbCE9PSh0PW51bGw9PWU/dm9pZCAwOmUuc29tZSgoZT0+ZS5pbmNsdWRlcygiXG4iKSkpKSYmdm9pZCAwIT09dCYmdH12YXIgYmU9T2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwscHJpbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKGUsdCxuPV8pe2NvbnN0IHI9bmV3IE1hcDtmb3IoY29uc3QgYSBvZiBPYmplY3QudmFsdWVzKHgpKXIuc2V0KGEsaGUodCxhKSk7bGV0IGkscyxvLGM9QXJyYXkuaXNBcnJheShlKSx1PVtlXSxsPS0xLHA9W10sZD1lO2NvbnN0IGg9W10sZj1bXTtkb3tsKys7Y29uc3QgZT1sPT09dS5sZW5ndGgsXz1lJiYwIT09cC5sZW5ndGg7aWYoZSl7aWYocz0wPT09Zi5sZW5ndGg/dm9pZCAwOmhbaC5sZW5ndGgtMV0sZD1vLG89Zi5wb3AoKSxfKWlmKGMpe2Q9ZC5zbGljZSgpO2xldCBlPTA7Zm9yKGNvbnN0W3Qsbl1vZiBwKXtjb25zdCByPXQtZTtudWxsPT09bj8oZC5zcGxpY2UociwxKSxlKyspOmRbcl09bn19ZWxzZXtkPU9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHt9LE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKGQpKTtmb3IoY29uc3RbZSx0XW9mIHApZFtlXT10fWw9aS5pbmRleCx1PWkua2V5cyxwPWkuZWRpdHMsYz1pLmluQXJyYXksaT1pLnByZXZ9ZWxzZSBpZihvKXtpZihzPWM/bDp1W2xdLGQ9b1tzXSxudWxsPT1kKWNvbnRpbnVlO2gucHVzaChzKX1sZXQgRTtpZighQXJyYXkuaXNBcnJheShkKSl7dmFyIHksdjtiKGQpfHxhKCExLGBJbnZhbGlkIEFTVCBOb2RlOiAke3RlKGQpfS5gKTtjb25zdCBuPWU/bnVsbD09PSh5PXIuZ2V0KGQua2luZCkpfHx2b2lkIDA9PT15P3ZvaWQgMDp5LmxlYXZlOm51bGw9PT0odj1yLmdldChkLmtpbmQpKXx8dm9pZCAwPT09dj92b2lkIDA6di5lbnRlcjtpZihFPW51bGw9PW4/dm9pZCAwOm4uY2FsbCh0LGQscyxvLGgsZiksRT09PWRlKWJyZWFrO2lmKCExPT09RSl7aWYoIWUpe2gucG9wKCk7Y29udGludWV9fWVsc2UgaWYodm9pZCAwIT09RSYmKHAucHVzaChbcyxFXSksIWUpKXtpZighYihFKSl7aC5wb3AoKTtjb250aW51ZX1kPUV9fXZhciBtO3ZvaWQgMD09PUUmJl8mJnAucHVzaChbcyxkXSksZT9oLnBvcCgpOihpPXtpbkFycmF5OmMsaW5kZXg6bCxrZXlzOnUsZWRpdHM6cCxwcmV2Oml9LGM9QXJyYXkuaXNBcnJheShkKSx1PWM/ZDpudWxsIT09KG09bltkLmtpbmRdKSYmdm9pZCAwIT09bT9tOltdLGw9LTEscD1bXSxvJiZmLnB1c2gobyksbz1kKX13aGlsZSh2b2lkIDAhPT1pKTtyZXR1cm4gMCE9PXAubGVuZ3RoP3BbcC5sZW5ndGgtMV1bMV06ZX0oZSxmZSl9fSksZ2U9bmV3IE1hcCxUZT1uZXcgTWFwLE9lPSEwLE5lPSExO2Z1bmN0aW9uIHhlKGUpe3JldHVybiBlLnJlcGxhY2UoL1tccyxdKy9nLCIgIikudHJpbSgpfWZ1bmN0aW9uIEllKGUpe3ZhciB0PW5ldyBTZXQsbj1bXTtyZXR1cm4gZS5kZWZpbml0aW9ucy5mb3JFYWNoKChmdW5jdGlvbihlKXtpZigiRnJhZ21lbnREZWZpbml0aW9uIj09PWUua2luZCl7dmFyIHI9ZS5uYW1lLnZhbHVlLGk9eGUoKG89ZS5sb2MpLnNvdXJjZS5ib2R5LnN1YnN0cmluZyhvLnN0YXJ0LG8uZW5kKSkscz1UZS5nZXQocik7cyYmIXMuaGFzKGkpP09lJiZjb25zb2xlLndhcm4oIldhcm5pbmc6IGZyYWdtZW50IHdpdGggbmFtZSAiK3IrIiBhbHJlYWR5IGV4aXN0cy5cbmdyYXBocWwtdGFnIGVuZm9yY2VzIGFsbCBmcmFnbWVudCBuYW1lcyBhY3Jvc3MgeW91ciBhcHBsaWNhdGlvbiB0byBiZSB1bmlxdWU7IHJlYWQgbW9yZSBhYm91dFxudGhpcyBpbiB0aGUgZG9jczogaHR0cDovL2Rldi5hcG9sbG9kYXRhLmNvbS9jb3JlL2ZyYWdtZW50cy5odG1sI3VuaXF1ZS1uYW1lcyIpOnN8fFRlLnNldChyLHM9bmV3IFNldCkscy5hZGQoaSksdC5oYXMoaSl8fCh0LmFkZChpKSxuLnB1c2goZSkpfWVsc2Ugbi5wdXNoKGUpO3ZhciBvfSkpLG8obyh7fSxlKSx7ZGVmaW5pdGlvbnM6bn0pfWZ1bmN0aW9uIEFlKGUpe3ZhciB0PXhlKGUpO2lmKCFnZS5oYXModCkpe3ZhciBuPWllKGUse2V4cGVyaW1lbnRhbEZyYWdtZW50VmFyaWFibGVzOk5lLGFsbG93TGVnYWN5RnJhZ21lbnRWYXJpYWJsZXM6TmV9KTtpZighbnx8IkRvY3VtZW50IiE9PW4ua2luZCl0aHJvdyBuZXcgRXJyb3IoIk5vdCBhIHZhbGlkIEdyYXBoUUwgZG9jdW1lbnQuIik7Z2Uuc2V0KHQsZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IFNldChlLmRlZmluaXRpb25zKTt0LmZvckVhY2goKGZ1bmN0aW9uKGUpe2UubG9jJiZkZWxldGUgZS5sb2MsT2JqZWN0LmtleXMoZSkuZm9yRWFjaCgoZnVuY3Rpb24obil7dmFyIHI9ZVtuXTtyJiYib2JqZWN0Ij09dHlwZW9mIHImJnQuYWRkKHIpfSkpfSkpO3ZhciBuPWUubG9jO3JldHVybiBuJiYoZGVsZXRlIG4uc3RhcnRUb2tlbixkZWxldGUgbi5lbmRUb2tlbiksZX0oSWUobikpKX1yZXR1cm4gZ2UuZ2V0KHQpfWZ1bmN0aW9uIFNlKGUpe2Zvcih2YXIgdD1bXSxuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl0W24tMV09YXJndW1lbnRzW25dOyJzdHJpbmciPT10eXBlb2YgZSYmKGU9W2VdKTt2YXIgcj1lWzBdO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKHQsbil7dCYmIkRvY3VtZW50Ij09PXQua2luZD9yKz10LmxvYy5zb3VyY2UuYm9keTpyKz10LHIrPWVbbisxXX0pKSxBZShyKX12YXIgd2Usa2U9U2UsRGU9ZnVuY3Rpb24oKXtnZS5jbGVhcigpLFRlLmNsZWFyKCl9LENlPWZ1bmN0aW9uKCl7T2U9ITF9LFJlPWZ1bmN0aW9uKCl7TmU9ITB9LFBlPWZ1bmN0aW9uKCl7TmU9ITF9Oyh3ZT1TZXx8KFNlPXt9KSkuZ3FsPWtlLHdlLnJlc2V0Q2FjaGVzPURlLHdlLmRpc2FibGVGcmFnbWVudFdhcm5pbmdzPUNlLHdlLmVuYWJsZUV4cGVyaW1lbnRhbEZyYWdtZW50VmFyaWFibGVzPVJlLHdlLmRpc2FibGVFeHBlcmltZW50YWxGcmFnbWVudFZhcmlhYmxlcz1QZSxTZS5kZWZhdWx0PVNlO2NvbnN0IEZlPVNlYAoJbXV0YXRpb24gUHVzaFBheWxvYWQoCgkJJHNlc3Npb25fc2VjdXJlX2lkOiBTdHJpbmchCgkJJGV2ZW50czogUmVwbGF5RXZlbnRzSW5wdXQhCgkJJG1lc3NhZ2VzOiBTdHJpbmchCgkJJHJlc291cmNlczogU3RyaW5nIQoJCSR3ZWJfc29ja2V0X2V2ZW50czogU3RyaW5nIQoJCSRlcnJvcnM6IFtFcnJvck9iamVjdElucHV0XSEKCQkkaXNfYmVhY29uOiBCb29sZWFuCgkJJGhhc19zZXNzaW9uX3VubG9hZGVkOiBCb29sZWFuCgkJJGhpZ2hsaWdodF9sb2dzOiBTdHJpbmcKCQkkcGF5bG9hZF9pZDogSUQKCSkgewoJCXB1c2hQYXlsb2FkKAoJCQlzZXNzaW9uX3NlY3VyZV9pZDogJHNlc3Npb25fc2VjdXJlX2lkCgkJCWV2ZW50czogJGV2ZW50cwoJCQltZXNzYWdlczogJG1lc3NhZ2VzCgkJCXJlc291cmNlczogJHJlc291cmNlcwoJCQl3ZWJfc29ja2V0X2V2ZW50czogJHdlYl9zb2NrZXRfZXZlbnRzCgkJCWVycm9yczogJGVycm9ycwoJCQlpc19iZWFjb246ICRpc19iZWFjb24KCQkJaGFzX3Nlc3Npb25fdW5sb2FkZWQ6ICRoYXNfc2Vzc2lvbl91bmxvYWRlZAoJCQloaWdobGlnaHRfbG9nczogJGhpZ2hsaWdodF9sb2dzCgkJCXBheWxvYWRfaWQ6ICRwYXlsb2FkX2lkCgkJKQoJfQpgLExlPVNlYAoJbXV0YXRpb24gaWRlbnRpZnlTZXNzaW9uKAoJCSRzZXNzaW9uX3NlY3VyZV9pZDogU3RyaW5nIQoJCSR1c2VyX2lkZW50aWZpZXI6IFN0cmluZyEKCQkkdXNlcl9vYmplY3Q6IEFueQoJKSB7CgkJaWRlbnRpZnlTZXNzaW9uKAoJCQlzZXNzaW9uX3NlY3VyZV9pZDogJHNlc3Npb25fc2VjdXJlX2lkCgkJCXVzZXJfaWRlbnRpZmllcjogJHVzZXJfaWRlbnRpZmllcgoJCQl1c2VyX29iamVjdDogJHVzZXJfb2JqZWN0CgkJKQoJfQpgLGplPVNlYAoJbXV0YXRpb24gYWRkU2Vzc2lvblByb3BlcnRpZXMoCgkJJHNlc3Npb25fc2VjdXJlX2lkOiBTdHJpbmchCgkJJHByb3BlcnRpZXNfb2JqZWN0OiBBbnkKCSkgewoJCWFkZFNlc3Npb25Qcm9wZXJ0aWVzKAoJCQlzZXNzaW9uX3NlY3VyZV9pZDogJHNlc3Npb25fc2VjdXJlX2lkCgkJCXByb3BlcnRpZXNfb2JqZWN0OiAkcHJvcGVydGllc19vYmplY3QKCQkpCgl9CmAsQmU9U2VgCgltdXRhdGlvbiBwdXNoTWV0cmljcygkbWV0cmljczogW01ldHJpY0lucHV0XSEpIHsKCQlwdXNoTWV0cmljcyhtZXRyaWNzOiAkbWV0cmljcykKCX0KYCxNZT1TZWAKCW11dGF0aW9uIGFkZFNlc3Npb25GZWVkYmFjaygKCQkkc2Vzc2lvbl9zZWN1cmVfaWQ6IFN0cmluZyEKCQkkdXNlcl9uYW1lOiBTdHJpbmcKCQkkdXNlcl9lbWFpbDogU3RyaW5nCgkJJHZlcmJhdGltOiBTdHJpbmchCgkJJHRpbWVzdGFtcDogVGltZXN0YW1wIQoJKSB7CgkJYWRkU2Vzc2lvbkZlZWRiYWNrKAoJCQlzZXNzaW9uX3NlY3VyZV9pZDogJHNlc3Npb25fc2VjdXJlX2lkCgkJCXVzZXJfbmFtZTogJHVzZXJfbmFtZQoJCQl1c2VyX2VtYWlsOiAkdXNlcl9lbWFpbAoJCQl2ZXJiYXRpbTogJHZlcmJhdGltCgkJCXRpbWVzdGFtcDogJHRpbWVzdGFtcAoJCSkKCX0KYCwkZT1TZWAKCW11dGF0aW9uIGluaXRpYWxpemVTZXNzaW9uKAoJCSRzZXNzaW9uX3NlY3VyZV9pZDogU3RyaW5nIQoJCSRvcmdhbml6YXRpb25fdmVyYm9zZV9pZDogU3RyaW5nIQoJCSRlbmFibGVfc3RyaWN0X3ByaXZhY3k6IEJvb2xlYW4hCgkJJHByaXZhY3lfc2V0dGluZzogU3RyaW5nIQoJCSRlbmFibGVfcmVjb3JkaW5nX25ldHdvcmtfY29udGVudHM6IEJvb2xlYW4hCgkJJGNsaWVudFZlcnNpb246IFN0cmluZyEKCQkkZmlyc3Rsb2FkVmVyc2lvbjogU3RyaW5nIQoJCSRjbGllbnRDb25maWc6IFN0cmluZyEKCQkkZW52aXJvbm1lbnQ6IFN0cmluZyEKCQkkaWQ6IFN0cmluZyEKCQkkYXBwVmVyc2lvbjogU3RyaW5nCgkJJHNlcnZpY2VOYW1lOiBTdHJpbmchCgkJJGNsaWVudF9pZDogU3RyaW5nIQoJCSRuZXR3b3JrX3JlY29yZGluZ19kb21haW5zOiBbU3RyaW5nIV0KCQkkZGlzYWJsZV9zZXNzaW9uX3JlY29yZGluZzogQm9vbGVhbgoJKSB7CgkJaW5pdGlhbGl6ZVNlc3Npb24oCgkJCXNlc3Npb25fc2VjdXJlX2lkOiAkc2Vzc2lvbl9zZWN1cmVfaWQKCQkJb3JnYW5pemF0aW9uX3ZlcmJvc2VfaWQ6ICRvcmdhbml6YXRpb25fdmVyYm9zZV9pZAoJCQllbmFibGVfc3RyaWN0X3ByaXZhY3k6ICRlbmFibGVfc3RyaWN0X3ByaXZhY3kKCQkJZW5hYmxlX3JlY29yZGluZ19uZXR3b3JrX2NvbnRlbnRzOiAkZW5hYmxlX3JlY29yZGluZ19uZXR3b3JrX2NvbnRlbnRzCgkJCWNsaWVudFZlcnNpb246ICRjbGllbnRWZXJzaW9uCgkJCWZpcnN0bG9hZFZlcnNpb246ICRmaXJzdGxvYWRWZXJzaW9uCgkJCWNsaWVudENvbmZpZzogJGNsaWVudENvbmZpZwoJCQllbnZpcm9ubWVudDogJGVudmlyb25tZW50CgkJCWFwcFZlcnNpb246ICRhcHBWZXJzaW9uCgkJCXNlcnZpY2VOYW1lOiAkc2VydmljZU5hbWUKCQkJZmluZ2VycHJpbnQ6ICRpZAoJCQljbGllbnRfaWQ6ICRjbGllbnRfaWQKCQkJbmV0d29ya19yZWNvcmRpbmdfZG9tYWluczogJG5ldHdvcmtfcmVjb3JkaW5nX2RvbWFpbnMKCQkJZGlzYWJsZV9zZXNzaW9uX3JlY29yZGluZzogJGRpc2FibGVfc2Vzc2lvbl9yZWNvcmRpbmcKCQkJcHJpdmFjeV9zZXR0aW5nOiAkcHJpdmFjeV9zZXR0aW5nCgkJKSB7CgkJCXNlY3VyZV9pZAoJCQlwcm9qZWN0X2lkCgkJfQoJfQpgLFZlPVNlYAoJcXVlcnkgSWdub3JlKCRpZDogSUQhKSB7CgkJaWdub3JlKGlkOiAkaWQpCgl9CmAscWU9KGUsdCxuKT0+ZSgpO3ZhciBVZT17fSxHZT17ZXhwb3J0czp7fX07IWZ1bmN0aW9uKGUsbil7dmFyIHIsaT0idW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/c2VsZjp0LHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5mZXRjaD0hMSx0aGlzLkRPTUV4Y2VwdGlvbj1pLkRPTUV4Y2VwdGlvbn1yZXR1cm4gZS5wcm90b3R5cGU9aSxuZXcgZX0oKTtyPXMsZnVuY3Rpb24oZSl7dmFyIHQ9IlVSTFNlYXJjaFBhcmFtcyJpbiByLG49IlN5bWJvbCJpbiByJiYiaXRlcmF0b3IiaW4gU3ltYm9sLGk9IkZpbGVSZWFkZXIiaW4gciYmIkJsb2IiaW4gciYmZnVuY3Rpb24oKXt0cnl7cmV0dXJuIG5ldyBCbG9iLCEwfWNhdGNoKGUpe3JldHVybiExfX0oKSxzPSJGb3JtRGF0YSJpbiByLG89IkFycmF5QnVmZmVyImluIHI7aWYobyl2YXIgYT1bIltvYmplY3QgSW50OEFycmF5XSIsIltvYmplY3QgVWludDhBcnJheV0iLCJbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XSIsIltvYmplY3QgSW50MTZBcnJheV0iLCJbb2JqZWN0IFVpbnQxNkFycmF5XSIsIltvYmplY3QgSW50MzJBcnJheV0iLCJbb2JqZWN0IFVpbnQzMkFycmF5XSIsIltvYmplY3QgRmxvYXQzMkFycmF5XSIsIltvYmplY3QgRmxvYXQ2NEFycmF5XSJdLGM9QXJyYXlCdWZmZXIuaXNWaWV3fHxmdW5jdGlvbihlKXtyZXR1cm4gZSYmYS5pbmRleE9mKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKSk+LTF9O2Z1bmN0aW9uIHUoZSl7aWYoInN0cmluZyIhPXR5cGVvZiBlJiYoZT1TdHJpbmcoZSkpLC9bXmEtejAtOVwtIyQlJicqKy5eX2B8fl0vaS50ZXN0KGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgY2hhcmFjdGVyIGluIGhlYWRlciBmaWVsZCBuYW1lIik7cmV0dXJuIGUudG9Mb3dlckNhc2UoKX1mdW5jdGlvbiBsKGUpe3JldHVybiJzdHJpbmciIT10eXBlb2YgZSYmKGU9U3RyaW5nKGUpKSxlfWZ1bmN0aW9uIHAoZSl7dmFyIHQ9e25leHQ6ZnVuY3Rpb24oKXt2YXIgdD1lLnNoaWZ0KCk7cmV0dXJue2RvbmU6dm9pZCAwPT09dCx2YWx1ZTp0fX19O3JldHVybiBuJiYodFtTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHR9KSx0fWZ1bmN0aW9uIGQoZSl7dGhpcy5tYXA9e30sZSBpbnN0YW5jZW9mIGQ/ZS5mb3JFYWNoKChmdW5jdGlvbihlLHQpe3RoaXMuYXBwZW5kKHQsZSl9KSx0aGlzKTpBcnJheS5pc0FycmF5KGUpP2UuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dGhpcy5hcHBlbmQoZVswXSxlWzFdKX0pLHRoaXMpOmUmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGUpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3RoaXMuYXBwZW5kKHQsZVt0XSl9KSx0aGlzKX1mdW5jdGlvbiBoKGUpe2lmKGUuYm9keVVzZWQpcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IoIkFscmVhZHkgcmVhZCIpKTtlLmJvZHlVc2VkPSEwfWZ1bmN0aW9uIGYoZSl7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbih0LG4pe2Uub25sb2FkPWZ1bmN0aW9uKCl7dChlLnJlc3VsdCl9LGUub25lcnJvcj1mdW5jdGlvbigpe24oZS5lcnJvcil9fSkpfWZ1bmN0aW9uIHkoZSl7dmFyIHQ9bmV3IEZpbGVSZWFkZXIsbj1mKHQpO3JldHVybiB0LnJlYWRBc0FycmF5QnVmZmVyKGUpLG59ZnVuY3Rpb24gdihlKXtpZihlLnNsaWNlKXJldHVybiBlLnNsaWNlKDApO3ZhciB0PW5ldyBVaW50OEFycmF5KGUuYnl0ZUxlbmd0aCk7cmV0dXJuIHQuc2V0KG5ldyBVaW50OEFycmF5KGUpKSx0LmJ1ZmZlcn1mdW5jdGlvbiBtKCl7cmV0dXJuIHRoaXMuYm9keVVzZWQ9ITEsdGhpcy5faW5pdEJvZHk9ZnVuY3Rpb24oZSl7dmFyIG47dGhpcy5fYm9keUluaXQ9ZSxlPyJzdHJpbmciPT10eXBlb2YgZT90aGlzLl9ib2R5VGV4dD1lOmkmJkJsb2IucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoZSk/dGhpcy5fYm9keUJsb2I9ZTpzJiZGb3JtRGF0YS5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihlKT90aGlzLl9ib2R5Rm9ybURhdGE9ZTp0JiZVUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoZSk/dGhpcy5fYm9keVRleHQ9ZS50b1N0cmluZygpOm8mJmkmJihuPWUpJiZEYXRhVmlldy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihuKT8odGhpcy5fYm9keUFycmF5QnVmZmVyPXYoZS5idWZmZXIpLHRoaXMuX2JvZHlJbml0PW5ldyBCbG9iKFt0aGlzLl9ib2R5QXJyYXlCdWZmZXJdKSk6byYmKEFycmF5QnVmZmVyLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGUpfHxjKGUpKT90aGlzLl9ib2R5QXJyYXlCdWZmZXI9dihlKTp0aGlzLl9ib2R5VGV4dD1lPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKTp0aGlzLl9ib2R5VGV4dD0iIix0aGlzLmhlYWRlcnMuZ2V0KCJjb250ZW50LXR5cGUiKXx8KCJzdHJpbmciPT10eXBlb2YgZT90aGlzLmhlYWRlcnMuc2V0KCJjb250ZW50LXR5cGUiLCJ0ZXh0L3BsYWluO2NoYXJzZXQ9VVRGLTgiKTp0aGlzLl9ib2R5QmxvYiYmdGhpcy5fYm9keUJsb2IudHlwZT90aGlzLmhlYWRlcnMuc2V0KCJjb250ZW50LXR5cGUiLHRoaXMuX2JvZHlCbG9iLnR5cGUpOnQmJlVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihlKSYmdGhpcy5oZWFkZXJzLnNldCgiY29udGVudC10eXBlIiwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9VVRGLTgiKSl9LGkmJih0aGlzLmJsb2I9ZnVuY3Rpb24oKXt2YXIgZT1oKHRoaXMpO2lmKGUpcmV0dXJuIGU7aWYodGhpcy5fYm9keUJsb2IpcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5QmxvYik7aWYodGhpcy5fYm9keUFycmF5QnVmZmVyKXJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEJsb2IoW3RoaXMuX2JvZHlBcnJheUJ1ZmZlcl0pKTtpZih0aGlzLl9ib2R5Rm9ybURhdGEpdGhyb3cgbmV3IEVycm9yKCJjb3VsZCBub3QgcmVhZCBGb3JtRGF0YSBib2R5IGFzIGJsb2IiKTtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBCbG9iKFt0aGlzLl9ib2R5VGV4dF0pKX0sdGhpcy5hcnJheUJ1ZmZlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9ib2R5QXJyYXlCdWZmZXI/aCh0aGlzKXx8UHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcik6dGhpcy5ibG9iKCkudGhlbih5KX0pLHRoaXMudGV4dD1mdW5jdGlvbigpe3ZhciBlLHQsbixyPWgodGhpcyk7aWYocilyZXR1cm4gcjtpZih0aGlzLl9ib2R5QmxvYilyZXR1cm4gZT10aGlzLl9ib2R5QmxvYix0PW5ldyBGaWxlUmVhZGVyLG49Zih0KSx0LnJlYWRBc1RleHQoZSksbjtpZih0aGlzLl9ib2R5QXJyYXlCdWZmZXIpcmV0dXJuIFByb21pc2UucmVzb2x2ZShmdW5jdGlvbihlKXtmb3IodmFyIHQ9bmV3IFVpbnQ4QXJyYXkoZSksbj1uZXcgQXJyYXkodC5sZW5ndGgpLHI9MDtyPHQubGVuZ3RoO3IrKyluW3JdPVN0cmluZy5mcm9tQ2hhckNvZGUodFtyXSk7cmV0dXJuIG4uam9pbigiIil9KHRoaXMuX2JvZHlBcnJheUJ1ZmZlcikpO2lmKHRoaXMuX2JvZHlGb3JtRGF0YSl0aHJvdyBuZXcgRXJyb3IoImNvdWxkIG5vdCByZWFkIEZvcm1EYXRhIGJvZHkgYXMgdGV4dCIpO3JldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keVRleHQpfSxzJiYodGhpcy5mb3JtRGF0YT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHQoKS50aGVuKGIpfSksdGhpcy5qc29uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oSlNPTi5wYXJzZSl9LHRoaXN9ZC5wcm90b3R5cGUuYXBwZW5kPWZ1bmN0aW9uKGUsdCl7ZT11KGUpLHQ9bCh0KTt2YXIgbj10aGlzLm1hcFtlXTt0aGlzLm1hcFtlXT1uP24rIiwgIit0OnR9LGQucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbihlKXtkZWxldGUgdGhpcy5tYXBbdShlKV19LGQucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXtyZXR1cm4gZT11KGUpLHRoaXMuaGFzKGUpP3RoaXMubWFwW2VdOm51bGx9LGQucHJvdG90eXBlLmhhcz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5tYXAuaGFzT3duUHJvcGVydHkodShlKSl9LGQucHJvdG90eXBlLnNldD1mdW5jdGlvbihlLHQpe3RoaXMubWFwW3UoZSldPWwodCl9LGQucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4gaW4gdGhpcy5tYXApdGhpcy5tYXAuaGFzT3duUHJvcGVydHkobikmJmUuY2FsbCh0LHRoaXMubWFwW25dLG4sdGhpcyl9LGQucHJvdG90eXBlLmtleXM9ZnVuY3Rpb24oKXt2YXIgZT1bXTtyZXR1cm4gdGhpcy5mb3JFYWNoKChmdW5jdGlvbih0LG4pe2UucHVzaChuKX0pKSxwKGUpfSxkLnByb3RvdHlwZS52YWx1ZXM9ZnVuY3Rpb24oKXt2YXIgZT1bXTtyZXR1cm4gdGhpcy5mb3JFYWNoKChmdW5jdGlvbih0KXtlLnB1c2godCl9KSkscChlKX0sZC5wcm90b3R5cGUuZW50cmllcz1mdW5jdGlvbigpe3ZhciBlPVtdO3JldHVybiB0aGlzLmZvckVhY2goKGZ1bmN0aW9uKHQsbil7ZS5wdXNoKFtuLHRdKX0pKSxwKGUpfSxuJiYoZC5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXT1kLnByb3RvdHlwZS5lbnRyaWVzKTt2YXIgXz1bIkRFTEVURSIsIkdFVCIsIkhFQUQiLCJPUFRJT05TIiwiUE9TVCIsIlBVVCJdO2Z1bmN0aW9uIEUoZSx0KXt2YXIgbixyLGk9KHQ9dHx8e30pLmJvZHk7aWYoZSBpbnN0YW5jZW9mIEUpe2lmKGUuYm9keVVzZWQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQWxyZWFkeSByZWFkIik7dGhpcy51cmw9ZS51cmwsdGhpcy5jcmVkZW50aWFscz1lLmNyZWRlbnRpYWxzLHQuaGVhZGVyc3x8KHRoaXMuaGVhZGVycz1uZXcgZChlLmhlYWRlcnMpKSx0aGlzLm1ldGhvZD1lLm1ldGhvZCx0aGlzLm1vZGU9ZS5tb2RlLHRoaXMuc2lnbmFsPWUuc2lnbmFsLGl8fG51bGw9PWUuX2JvZHlJbml0fHwoaT1lLl9ib2R5SW5pdCxlLmJvZHlVc2VkPSEwKX1lbHNlIHRoaXMudXJsPVN0cmluZyhlKTtpZih0aGlzLmNyZWRlbnRpYWxzPXQuY3JlZGVudGlhbHN8fHRoaXMuY3JlZGVudGlhbHN8fCJzYW1lLW9yaWdpbiIsIXQuaGVhZGVycyYmdGhpcy5oZWFkZXJzfHwodGhpcy5oZWFkZXJzPW5ldyBkKHQuaGVhZGVycykpLHRoaXMubWV0aG9kPShuPXQubWV0aG9kfHx0aGlzLm1ldGhvZHx8IkdFVCIscj1uLnRvVXBwZXJDYXNlKCksXy5pbmRleE9mKHIpPi0xP3I6biksdGhpcy5tb2RlPXQubW9kZXx8dGhpcy5tb2RlfHxudWxsLHRoaXMuc2lnbmFsPXQuc2lnbmFsfHx0aGlzLnNpZ25hbCx0aGlzLnJlZmVycmVyPW51bGwsKCJHRVQiPT09dGhpcy5tZXRob2R8fCJIRUFEIj09PXRoaXMubWV0aG9kKSYmaSl0aHJvdyBuZXcgVHlwZUVycm9yKCJCb2R5IG5vdCBhbGxvd2VkIGZvciBHRVQgb3IgSEVBRCByZXF1ZXN0cyIpO3RoaXMuX2luaXRCb2R5KGkpfWZ1bmN0aW9uIGIoZSl7dmFyIHQ9bmV3IEZvcm1EYXRhO3JldHVybiBlLnRyaW0oKS5zcGxpdCgiJiIpLmZvckVhY2goKGZ1bmN0aW9uKGUpe2lmKGUpe3ZhciBuPWUuc3BsaXQoIj0iKSxyPW4uc2hpZnQoKS5yZXBsYWNlKC9cKy9nLCIgIiksaT1uLmpvaW4oIj0iKS5yZXBsYWNlKC9cKy9nLCIgIik7dC5hcHBlbmQoZGVjb2RlVVJJQ29tcG9uZW50KHIpLGRlY29kZVVSSUNvbXBvbmVudChpKSl9fSkpLHR9ZnVuY3Rpb24gZyhlLHQpe3R8fCh0PXt9KSx0aGlzLnR5cGU9ImRlZmF1bHQiLHRoaXMuc3RhdHVzPXZvaWQgMD09PXQuc3RhdHVzPzIwMDp0LnN0YXR1cyx0aGlzLm9rPXRoaXMuc3RhdHVzPj0yMDAmJnRoaXMuc3RhdHVzPDMwMCx0aGlzLnN0YXR1c1RleHQ9InN0YXR1c1RleHQiaW4gdD90LnN0YXR1c1RleHQ6Ik9LIix0aGlzLmhlYWRlcnM9bmV3IGQodC5oZWFkZXJzKSx0aGlzLnVybD10LnVybHx8IiIsdGhpcy5faW5pdEJvZHkoZSl9RS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEUodGhpcyx7Ym9keTp0aGlzLl9ib2R5SW5pdH0pfSxtLmNhbGwoRS5wcm90b3R5cGUpLG0uY2FsbChnLnByb3RvdHlwZSksZy5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGcodGhpcy5fYm9keUluaXQse3N0YXR1czp0aGlzLnN0YXR1cyxzdGF0dXNUZXh0OnRoaXMuc3RhdHVzVGV4dCxoZWFkZXJzOm5ldyBkKHRoaXMuaGVhZGVycyksdXJsOnRoaXMudXJsfSl9LGcuZXJyb3I9ZnVuY3Rpb24oKXt2YXIgZT1uZXcgZyhudWxsLHtzdGF0dXM6MCxzdGF0dXNUZXh0OiIifSk7cmV0dXJuIGUudHlwZT0iZXJyb3IiLGV9O3ZhciBUPVszMDEsMzAyLDMwMywzMDcsMzA4XTtnLnJlZGlyZWN0PWZ1bmN0aW9uKGUsdCl7aWYoLTE9PT1ULmluZGV4T2YodCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgc3RhdHVzIGNvZGUiKTtyZXR1cm4gbmV3IGcobnVsbCx7c3RhdHVzOnQsaGVhZGVyczp7bG9jYXRpb246ZX19KX0sZS5ET01FeGNlcHRpb249ci5ET01FeGNlcHRpb247dHJ5e25ldyBlLkRPTUV4Y2VwdGlvbn1jYXRjaChOKXtlLkRPTUV4Y2VwdGlvbj1mdW5jdGlvbihlLHQpe3RoaXMubWVzc2FnZT1lLHRoaXMubmFtZT10O3ZhciBuPUVycm9yKGUpO3RoaXMuc3RhY2s9bi5zdGFja30sZS5ET01FeGNlcHRpb24ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKSxlLkRPTUV4Y2VwdGlvbi5wcm90b3R5cGUuY29uc3RydWN0b3I9ZS5ET01FeGNlcHRpb259ZnVuY3Rpb24gTyh0LG4pe3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24ocixzKXt2YXIgbz1uZXcgRSh0LG4pO2lmKG8uc2lnbmFsJiZvLnNpZ25hbC5hYm9ydGVkKXJldHVybiBzKG5ldyBlLkRPTUV4Y2VwdGlvbigiQWJvcnRlZCIsIkFib3J0RXJyb3IiKSk7dmFyIGE9bmV3IFhNTEh0dHBSZXF1ZXN0O2Z1bmN0aW9uIGMoKXthLmFib3J0KCl9YS5vbmxvYWQ9ZnVuY3Rpb24oKXt2YXIgZSx0LG49e3N0YXR1czphLnN0YXR1cyxzdGF0dXNUZXh0OmEuc3RhdHVzVGV4dCxoZWFkZXJzOihlPWEuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCl8fCIiLHQ9bmV3IGQsZS5yZXBsYWNlKC9ccj9cbltcdCBdKy9nLCIgIikuc3BsaXQoL1xyP1xuLykuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS5zcGxpdCgiOiIpLHI9bi5zaGlmdCgpLnRyaW0oKTtpZihyKXt2YXIgaT1uLmpvaW4oIjoiKS50cmltKCk7dC5hcHBlbmQocixpKX19KSksdCl9O24udXJsPSJyZXNwb25zZVVSTCJpbiBhP2EucmVzcG9uc2VVUkw6bi5oZWFkZXJzLmdldCgiWC1SZXF1ZXN0LVVSTCIpO3ZhciBpPSJyZXNwb25zZSJpbiBhP2EucmVzcG9uc2U6YS5yZXNwb25zZVRleHQ7cihuZXcgZyhpLG4pKX0sYS5vbmVycm9yPWZ1bmN0aW9uKCl7cyhuZXcgVHlwZUVycm9yKCJOZXR3b3JrIHJlcXVlc3QgZmFpbGVkIikpfSxhLm9udGltZW91dD1mdW5jdGlvbigpe3MobmV3IFR5cGVFcnJvcigiTmV0d29yayByZXF1ZXN0IGZhaWxlZCIpKX0sYS5vbmFib3J0PWZ1bmN0aW9uKCl7cyhuZXcgZS5ET01FeGNlcHRpb24oIkFib3J0ZWQiLCJBYm9ydEVycm9yIikpfSxhLm9wZW4oby5tZXRob2Qsby51cmwsITApLCJpbmNsdWRlIj09PW8uY3JlZGVudGlhbHM/YS53aXRoQ3JlZGVudGlhbHM9ITA6Im9taXQiPT09by5jcmVkZW50aWFscyYmKGEud2l0aENyZWRlbnRpYWxzPSExKSwicmVzcG9uc2VUeXBlImluIGEmJmkmJihhLnJlc3BvbnNlVHlwZT0iYmxvYiIpLG8uaGVhZGVycy5mb3JFYWNoKChmdW5jdGlvbihlLHQpe2Euc2V0UmVxdWVzdEhlYWRlcih0LGUpfSkpLG8uc2lnbmFsJiYoby5zaWduYWwuYWRkRXZlbnRMaXN0ZW5lcigiYWJvcnQiLGMpLGEub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ND09PWEucmVhZHlTdGF0ZSYmby5zaWduYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigiYWJvcnQiLGMpfSksYS5zZW5kKHZvaWQgMD09PW8uX2JvZHlJbml0P251bGw6by5fYm9keUluaXQpfSkpfU8ucG9seWZpbGw9ITAsci5mZXRjaHx8KHIuZmV0Y2g9TyxyLkhlYWRlcnM9ZCxyLlJlcXVlc3Q9RSxyLlJlc3BvbnNlPWcpLGUuSGVhZGVycz1kLGUuUmVxdWVzdD1FLGUuUmVzcG9uc2U9ZyxlLmZldGNoPU8sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pfSh7fSkscy5mZXRjaC5wb255ZmlsbD0hMCxkZWxldGUgcy5mZXRjaC5wb2x5ZmlsbDt2YXIgbz1zOyhuPW8uZmV0Y2gpLmRlZmF1bHQ9by5mZXRjaCxuLmZldGNoPW8uZmV0Y2gsbi5IZWFkZXJzPW8uSGVhZGVycyxuLlJlcXVlc3Q9by5SZXF1ZXN0LG4uUmVzcG9uc2U9by5SZXNwb25zZSxlLmV4cG9ydHM9bn0oR2UsR2UuZXhwb3J0cyk7dmFyIEtlPUdlLmV4cG9ydHMsemU9cihjZSksWWU9cihiZSksSmU9e30sSGU9e30sUWU9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS51cmksbj1lLm5hbWUscj1lLnR5cGU7dGhpcy51cmk9dCx0aGlzLm5hbWU9bix0aGlzLnR5cGU9cn0sWGU9UWUsV2U9ZnVuY3Rpb24oZSl7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiBGaWxlJiZlIGluc3RhbmNlb2YgRmlsZXx8InVuZGVmaW5lZCIhPXR5cGVvZiBCbG9iJiZlIGluc3RhbmNlb2YgQmxvYnx8ZSBpbnN0YW5jZW9mIFhlfSxaZT1XZTtIZS5SZWFjdE5hdGl2ZUZpbGU9UWUsSGUuZXh0cmFjdEZpbGVzPWZ1bmN0aW9uIGUodCxuLHIpe3ZhciBpO3ZvaWQgMD09PW4mJihuPSIiKSx2b2lkIDA9PT1yJiYocj1aZSk7dmFyIHM9bmV3IE1hcDtmdW5jdGlvbiBvKGUsdCl7dmFyIG49cy5nZXQodCk7bj9uLnB1c2guYXBwbHkobixlKTpzLnNldCh0LGUpfWlmKHIodCkpaT1udWxsLG8oW25dLHQpO2Vsc2V7dmFyIGE9bj9uKyIuIjoiIjtpZigidW5kZWZpbmVkIiE9dHlwZW9mIEZpbGVMaXN0JiZ0IGluc3RhbmNlb2YgRmlsZUxpc3QpaT1BcnJheS5wcm90b3R5cGUubWFwLmNhbGwodCwoZnVuY3Rpb24oZSx0KXtyZXR1cm4gbyhbIiIrYSt0XSxlKSxudWxsfSkpO2Vsc2UgaWYoQXJyYXkuaXNBcnJheSh0KSlpPXQubWFwKChmdW5jdGlvbih0LG4pe3ZhciBpPWUodCwiIithK24scik7cmV0dXJuIGkuZmlsZXMuZm9yRWFjaChvKSxpLmNsb25lfSkpO2Vsc2UgaWYodCYmdC5jb25zdHJ1Y3Rvcj09PU9iamVjdClmb3IodmFyIGMgaW4gaT17fSx0KXt2YXIgdT1lKHRbY10sIiIrYStjLHIpO3UuZmlsZXMuZm9yRWFjaChvKSxpW2NdPXUuY2xvbmV9ZWxzZSBpPXR9cmV0dXJue2Nsb25lOmksZmlsZXM6c319LEhlLmlzRXh0cmFjdGFibGVGaWxlPVdlO3ZhciBldD0ib2JqZWN0Ij09dHlwZW9mIHNlbGY/c2VsZi5Gb3JtRGF0YTp3aW5kb3cuRm9ybURhdGEsdHQ9e307T2JqZWN0LmRlZmluZVByb3BlcnR5KHR0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0dC5kZWZhdWx0SnNvblNlcmlhbGl6ZXI9dm9pZCAwLHR0LmRlZmF1bHRKc29uU2VyaWFsaXplcj17cGFyc2U6SlNPTi5wYXJzZSxzdHJpbmdpZnk6SlNPTi5zdHJpbmdpZnl9O3ZhciBudD10JiZ0Ll9faW1wb3J0RGVmYXVsdHx8ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoSmUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBydD1IZSxpdD1udChldCksc3Q9dHQsb3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIHJ0LmlzRXh0cmFjdGFibGVGaWxlKGUpfHxudWxsIT09ZSYmIm9iamVjdCI9PXR5cGVvZiBlJiYiZnVuY3Rpb24iPT10eXBlb2YgZS5waXBlfTtKZS5kZWZhdWx0PWZ1bmN0aW9uKGUsdCxuLHIpe3ZvaWQgMD09PXImJihyPXN0LmRlZmF1bHRKc29uU2VyaWFsaXplcik7dmFyIGk9cnQuZXh0cmFjdEZpbGVzKHtxdWVyeTplLHZhcmlhYmxlczp0LG9wZXJhdGlvbk5hbWU6bn0sIiIsb3QpLHM9aS5jbG9uZSxvPWkuZmlsZXM7aWYoMD09PW8uc2l6ZSl7aWYoIUFycmF5LmlzQXJyYXkoZSkpcmV0dXJuIHIuc3RyaW5naWZ5KHMpO2lmKHZvaWQgMCE9PXQmJiFBcnJheS5pc0FycmF5KHQpKXRocm93IG5ldyBFcnJvcigiQ2Fubm90IGNyZWF0ZSByZXF1ZXN0IGJvZHkgd2l0aCBnaXZlbiB2YXJpYWJsZSB0eXBlLCBhcnJheSBleHBlY3RlZCIpO3ZhciBhPWUucmVkdWNlKChmdW5jdGlvbihlLG4scil7cmV0dXJuIGUucHVzaCh7cXVlcnk6bix2YXJpYWJsZXM6dD90W3JdOnZvaWQgMH0pLGV9KSxbXSk7cmV0dXJuIHIuc3RyaW5naWZ5KGEpfXZhciBjPW5ldygidW5kZWZpbmVkIj09dHlwZW9mIEZvcm1EYXRhP2l0LmRlZmF1bHQ6Rm9ybURhdGEpO2MuYXBwZW5kKCJvcGVyYXRpb25zIixyLnN0cmluZ2lmeShzKSk7dmFyIHU9e30sbD0wO3JldHVybiBvLmZvckVhY2goKGZ1bmN0aW9uKGUpe3VbKytsXT1lfSkpLGMuYXBwZW5kKCJtYXAiLHIuc3RyaW5naWZ5KHUpKSxsPTAsby5mb3JFYWNoKChmdW5jdGlvbihlLHQpe2MuYXBwZW5kKCIiKyArK2wsdCl9KSksY307dmFyIGF0PXt9O09iamVjdC5kZWZpbmVQcm9wZXJ0eShhdCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksYXQucGFyc2VCYXRjaFJlcXVlc3RzRXh0ZW5kZWRBcmdzPWF0LnBhcnNlUmF3UmVxdWVzdEV4dGVuZGVkQXJncz1hdC5wYXJzZVJlcXVlc3RFeHRlbmRlZEFyZ3M9YXQucGFyc2VCYXRjaFJlcXVlc3RBcmdzPWF0LnBhcnNlUmF3UmVxdWVzdEFyZ3M9YXQucGFyc2VSZXF1ZXN0QXJncz12b2lkIDAsYXQucGFyc2VSZXF1ZXN0QXJncz1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGUuZG9jdW1lbnQ/ZTp7ZG9jdW1lbnQ6ZSx2YXJpYWJsZXM6dCxyZXF1ZXN0SGVhZGVyczpuLHNpZ25hbDp2b2lkIDB9fSxhdC5wYXJzZVJhd1JlcXVlc3RBcmdzPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZS5xdWVyeT9lOntxdWVyeTplLHZhcmlhYmxlczp0LHJlcXVlc3RIZWFkZXJzOm4sc2lnbmFsOnZvaWQgMH19LGF0LnBhcnNlQmF0Y2hSZXF1ZXN0QXJncz1mdW5jdGlvbihlLHQpe3JldHVybiBlLmRvY3VtZW50cz9lOntkb2N1bWVudHM6ZSxyZXF1ZXN0SGVhZGVyczp0LHNpZ25hbDp2b2lkIDB9fSxhdC5wYXJzZVJlcXVlc3RFeHRlbmRlZEFyZ3M9ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIGUuZG9jdW1lbnQ/ZTp7dXJsOmUsZG9jdW1lbnQ6dCx2YXJpYWJsZXM6bixyZXF1ZXN0SGVhZGVyczpyLHNpZ25hbDp2b2lkIDB9fSxhdC5wYXJzZVJhd1JlcXVlc3RFeHRlbmRlZEFyZ3M9ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIGUucXVlcnk/ZTp7dXJsOmUscXVlcnk6dCx2YXJpYWJsZXM6bixyZXF1ZXN0SGVhZGVyczpyLHNpZ25hbDp2b2lkIDB9fSxhdC5wYXJzZUJhdGNoUmVxdWVzdHNFeHRlbmRlZEFyZ3M9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBlLmRvY3VtZW50cz9lOnt1cmw6ZSxkb2N1bWVudHM6dCxyZXF1ZXN0SGVhZGVyczpuLHNpZ25hbDp2b2lkIDB9fTt2YXIgY3Q9e30sdXQ9dCYmdC5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIGU9ZnVuY3Rpb24odCxuKXtyZXR1cm4oZT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4gaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmKGVbbl09dFtuXSl9KSh0LG4pfTtyZXR1cm4gZnVuY3Rpb24odCxuKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgbiYmbnVsbCE9PW4pdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyhuKSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWUodCxuKSx0LnByb3RvdHlwZT1udWxsPT09bj9PYmplY3QuY3JlYXRlKG4pOihyLnByb3RvdHlwZT1uLnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShjdCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksY3QuQ2xpZW50RXJyb3I9dm9pZCAwO3ZhciBsdD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KG4scil7dmFyIGk9dGhpcyxzPXQuZXh0cmFjdE1lc3NhZ2UobikrIjogIitKU09OLnN0cmluZ2lmeSh7cmVzcG9uc2U6bixyZXF1ZXN0OnJ9KTtyZXR1cm4gaT1lLmNhbGwodGhpcyxzKXx8dGhpcyxPYmplY3Quc2V0UHJvdG90eXBlT2YoaSx0LnByb3RvdHlwZSksaS5yZXNwb25zZT1uLGkucmVxdWVzdD1yLCJmdW5jdGlvbiI9PXR5cGVvZiBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSYmRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UoaSx0KSxpfXJldHVybiB1dCh0LGUpLHQuZXh0cmFjdE1lc3NhZ2U9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiBlLmVycm9yc1swXS5tZXNzYWdlfWNhdGNoKHQpe3JldHVybiJHcmFwaFFMIEVycm9yIChDb2RlOiAiK2Uuc3RhdHVzKyIpIn19LHR9KEVycm9yKTtjdC5DbGllbnRFcnJvcj1sdDt2YXIgcHQsZHQsaHQ9e307ZnVuY3Rpb24gZnQoKXtpZihwdClyZXR1cm4gaHQ7cHQ9MTt2YXIgZT10JiZ0Ll9fYXNzaWdufHxmdW5jdGlvbigpe3JldHVybiBlPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPTEscj1hcmd1bWVudHMubGVuZ3RoO248cjtuKyspZm9yKHZhciBpIGluIHQ9YXJndW1lbnRzW25dKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGkpJiYoZVtpXT10W2ldKTtyZXR1cm4gZX0sZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LG49dCYmdC5fX2F3YWl0ZXJ8fGZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKChmdW5jdGlvbihpLHMpe2Z1bmN0aW9uIG8oZSl7dHJ5e2Moci5uZXh0KGUpKX1jYXRjaCh0KXtzKHQpfX1mdW5jdGlvbiBhKGUpe3RyeXtjKHIudGhyb3coZSkpfWNhdGNoKHQpe3ModCl9fWZ1bmN0aW9uIGMoZSl7dmFyIHQ7ZS5kb25lP2koZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKChmdW5jdGlvbihlKXtlKHQpfSkpKS50aGVuKG8sYSl9Yygocj1yLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSkpfSxyPXQmJnQuX19nZW5lcmF0b3J8fGZ1bmN0aW9uKGUsdCl7dmFyIG4scixpLHMsbz17bGFiZWw6MCxzZW50OmZ1bmN0aW9uKCl7aWYoMSZpWzBdKXRocm93IGlbMV07cmV0dXJuIGlbMV19LHRyeXM6W10sb3BzOltdfTtyZXR1cm4gcz17bmV4dDphKDApLHRocm93OmEoMSkscmV0dXJuOmEoMil9LCJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJihzW1N5bWJvbC5pdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLHM7ZnVuY3Rpb24gYShzKXtyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKHMpe2lmKG4pdGhyb3cgbmV3IFR5cGVFcnJvcigiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLiIpO2Zvcig7bzspdHJ5e2lmKG49MSxyJiYoaT0yJnNbMF0/ci5yZXR1cm46c1swXT9yLnRocm93fHwoKGk9ci5yZXR1cm4pJiZpLmNhbGwociksMCk6ci5uZXh0KSYmIShpPWkuY2FsbChyLHNbMV0pKS5kb25lKXJldHVybiBpO3N3aXRjaChyPTAsaSYmKHM9WzImc1swXSxpLnZhbHVlXSksc1swXSl7Y2FzZSAwOmNhc2UgMTppPXM7YnJlYWs7Y2FzZSA0OnJldHVybiBvLmxhYmVsKysse3ZhbHVlOnNbMV0sZG9uZTohMX07Y2FzZSA1Om8ubGFiZWwrKyxyPXNbMV0scz1bMF07Y29udGludWU7Y2FzZSA3OnM9by5vcHMucG9wKCksby50cnlzLnBvcCgpO2NvbnRpbnVlO2RlZmF1bHQ6aWYoIShpPW8udHJ5cywoaT1pLmxlbmd0aD4wJiZpW2kubGVuZ3RoLTFdKXx8NiE9PXNbMF0mJjIhPT1zWzBdKSl7bz0wO2NvbnRpbnVlfWlmKDM9PT1zWzBdJiYoIWl8fHNbMV0+aVswXSYmc1sxXTxpWzNdKSl7by5sYWJlbD1zWzFdO2JyZWFrfWlmKDY9PT1zWzBdJiZvLmxhYmVsPGlbMV0pe28ubGFiZWw9aVsxXSxpPXM7YnJlYWt9aWYoaSYmby5sYWJlbDxpWzJdKXtvLmxhYmVsPWlbMl0sby5vcHMucHVzaChzKTticmVha31pWzJdJiZvLm9wcy5wb3AoKSxvLnRyeXMucG9wKCk7Y29udGludWV9cz10LmNhbGwoZSxvKX1jYXRjaChhKXtzPVs2LGFdLHI9MH1maW5hbGx5e249aT0wfWlmKDUmc1swXSl0aHJvdyBzWzFdO3JldHVybnt2YWx1ZTpzWzBdP3NbMV06dm9pZCAwLGRvbmU6ITB9fShbcyxhXSl9fX07T2JqZWN0LmRlZmluZVByb3BlcnR5KGh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSxodC5HcmFwaFFMV2ViU29ja2V0Q2xpZW50PXZvaWQgMDt2YXIgaT1jdCxzPXl0KCksbz0icGluZyIsYT0icG9uZyIsYz0ic3Vic2NyaWJlIix1PSJjb21wbGV0ZSIsbD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LG4pe3RoaXMuX3R5cGU9ZSx0aGlzLl9wYXlsb2FkPXQsdGhpcy5faWQ9bn1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJ0eXBlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3R5cGV9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJpZCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pZH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsInBheWxvYWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGF5bG9hZH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsInRleHQiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgZT17dHlwZTp0aGlzLnR5cGV9O3JldHVybiBudWxsIT10aGlzLmlkJiZudWxsIT10aGlzLmlkJiYoZS5pZD10aGlzLmlkKSxudWxsIT10aGlzLnBheWxvYWQmJm51bGwhPXRoaXMucGF5bG9hZCYmKGUucGF5bG9hZD10aGlzLnBheWxvYWQpLEpTT04uc3RyaW5naWZ5KGUpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucGFyc2U9ZnVuY3Rpb24odCxuKXt2YXIgcj1KU09OLnBhcnNlKHQpLGk9ci50eXBlLHM9ci5wYXlsb2FkLG89ci5pZDtyZXR1cm4gbmV3IGUoaSxuKHMpLG8pfSxlfSgpLHA9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQscyl7dmFyIGM9dGhpcyxwPXMub25Jbml0LGY9cy5vbkFja25vd2xlZGdlZCx5PXMub25QaW5nLHY9cy5vblBvbmc7dGhpcy5zb2NrZXRTdGF0ZT17YWNrbm93bGVkZ2VkOiExLGxhc3RSZXF1ZXN0SWQ6MCxzdWJzY3JpcHRpb25zOnt9fSx0aGlzLnNvY2tldD10LHQub25vcGVuPWZ1bmN0aW9uKGUpe3JldHVybiBuKGMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgZSxuLGkscztyZXR1cm4gcih0aGlzLChmdW5jdGlvbihyKXtzd2l0Y2goci5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLnNvY2tldFN0YXRlLmFja25vd2xlZGdlZD0hMSx0aGlzLnNvY2tldFN0YXRlLnN1YnNjcmlwdGlvbnM9e30sbj0oZT10KS5zZW5kLGk9ZCxwP1s0LHAoKV06WzMsMl07Y2FzZSAxOnJldHVybiBzPXIuc2VudCgpLFszLDNdO2Nhc2UgMjpzPW51bGwsci5sYWJlbD0zO2Nhc2UgMzpyZXR1cm4gbi5hcHBseShlLFtpLmFwcGx5KHZvaWQgMCxbc10pLnRleHRdKSxbMl19fSkpfSkpfSx0Lm9uY2xvc2U9ZnVuY3Rpb24oZSl7Yy5zb2NrZXRTdGF0ZS5hY2tub3dsZWRnZWQ9ITEsYy5zb2NrZXRTdGF0ZS5zdWJzY3JpcHRpb25zPXt9fSx0Lm9uZXJyb3I9ZnVuY3Rpb24oZSl7Y29uc29sZS5lcnJvcihlKX0sdC5vbm1lc3NhZ2U9ZnVuY3Rpb24obil7dHJ5e3ZhciByPWZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dCYmKHQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9KTtyZXR1cm4gbC5wYXJzZShlLHQpfShuLmRhdGEpO3N3aXRjaChyLnR5cGUpe2Nhc2UiY29ubmVjdGlvbl9hY2siOnJldHVybiB2b2lkKGMuc29ja2V0U3RhdGUuYWNrbm93bGVkZ2VkP2NvbnNvbGUud2FybigiRHVwbGljYXRlIENPTk5FQ1RJT05fQUNLIG1lc3NhZ2UgaWdub3JlZCIpOihjLnNvY2tldFN0YXRlLmFja25vd2xlZGdlZD0hMCxmJiZmKHIucGF5bG9hZCkpKTtjYXNlIG86cmV0dXJuIHZvaWQoeT95KHIucGF5bG9hZCkudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJuIHQuc2VuZChoKGUpLnRleHQpfSkpOnQuc2VuZChoKG51bGwpLnRleHQpKTtjYXNlIGE6cmV0dXJuIHZvaWQodiYmdihyLnBheWxvYWQpKX1pZighYy5zb2NrZXRTdGF0ZS5hY2tub3dsZWRnZWQpcmV0dXJuO2lmKHZvaWQgMD09PXIuaWR8fG51bGw9PT1yLmlkfHwhYy5zb2NrZXRTdGF0ZS5zdWJzY3JpcHRpb25zW3IuaWRdKXJldHVybjt2YXIgcz1jLnNvY2tldFN0YXRlLnN1YnNjcmlwdGlvbnNbci5pZF0scD1zLnF1ZXJ5LGQ9cy52YXJpYWJsZXMsbT1zLnN1YnNjcmliZXI7c3dpdGNoKHIudHlwZSl7Y2FzZSJuZXh0IjpyZXR1cm4hci5wYXlsb2FkLmVycm9ycyYmci5wYXlsb2FkLmRhdGEmJm0ubmV4dCYmbS5uZXh0KHIucGF5bG9hZC5kYXRhKSx2b2lkKHIucGF5bG9hZC5lcnJvcnMmJm0uZXJyb3ImJm0uZXJyb3IobmV3IGkuQ2xpZW50RXJyb3IoZShlKHt9LHIucGF5bG9hZCkse3N0YXR1czoyMDB9KSx7cXVlcnk6cCx2YXJpYWJsZXM6ZH0pKSk7Y2FzZSJlcnJvciI6cmV0dXJuIHZvaWQobS5lcnJvciYmbS5lcnJvcihuZXcgaS5DbGllbnRFcnJvcih7ZXJyb3JzOnIucGF5bG9hZCxzdGF0dXM6MjAwfSx7cXVlcnk6cCx2YXJpYWJsZXM6ZH0pKSk7Y2FzZSB1OnJldHVybiBtLmNvbXBsZXRlJiZtLmNvbXBsZXRlKCksdm9pZCBkZWxldGUgYy5zb2NrZXRTdGF0ZS5zdWJzY3JpcHRpb25zW3IuaWRdfX1jYXRjaChfKXtjb25zb2xlLmVycm9yKF8pLHQuY2xvc2UoMTAwNil9dC5jbG9zZSg0NDAwLCJVbmtub3duIGdyYXBocWwtd3MgbWVzc2FnZS4iKX19cmV0dXJuIHQucHJvdG90eXBlLm1ha2VTdWJzY3JpYmU9ZnVuY3Rpb24oZSx0LG4scil7dmFyIGkscyxvPXRoaXMsYT0odGhpcy5zb2NrZXRTdGF0ZS5sYXN0UmVxdWVzdElkKyspLnRvU3RyaW5nKCk7cmV0dXJuIHRoaXMuc29ja2V0U3RhdGUuc3Vic2NyaXB0aW9uc1thXT17cXVlcnk6ZSx2YXJpYWJsZXM6bixzdWJzY3JpYmVyOnJ9LHRoaXMuc29ja2V0LnNlbmQoKGk9YSxzPXtxdWVyeTplLG9wZXJhdGlvbk5hbWU6dCx2YXJpYWJsZXM6bn0sbmV3IGwoYyxzLGkpKS50ZXh0KSxmdW5jdGlvbigpe28uc29ja2V0LnNlbmQoZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBsKHUsdm9pZCAwLGUpfShhKS50ZXh0KSxkZWxldGUgby5zb2NrZXRTdGF0ZS5zdWJzY3JpcHRpb25zW2FdfX0sdC5wcm90b3R5cGUucmF3UmVxdWVzdD1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihyLGkpe3ZhciBzO24ucmF3U3Vic2NyaWJlKGUse25leHQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gcz17ZGF0YTplLGV4dGVuc2lvbnM6dH19LGVycm9yOmksY29tcGxldGU6ZnVuY3Rpb24oKXtyZXR1cm4gcihzKX19LHQpfSkpfSx0LnByb3RvdHlwZS5yZXF1ZXN0PWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKHIsaSl7dmFyIHM7bi5zdWJzY3JpYmUoZSx7bmV4dDpmdW5jdGlvbihlKXtyZXR1cm4gcz1lfSxlcnJvcjppLGNvbXBsZXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHIocyl9fSx0KX0pKX0sdC5wcm90b3R5cGUuc3Vic2NyaWJlPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1zLnJlc29sdmVSZXF1ZXN0RG9jdW1lbnQoZSksaT1yLnF1ZXJ5LG89ci5vcGVyYXRpb25OYW1lO3JldHVybiB0aGlzLm1ha2VTdWJzY3JpYmUoaSxvLG4sdCl9LHQucHJvdG90eXBlLnJhd1N1YnNjcmliZT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMubWFrZVN1YnNjcmliZShlLHZvaWQgMCxuLHQpfSx0LnByb3RvdHlwZS5waW5nPWZ1bmN0aW9uKGUpe3RoaXMuc29ja2V0LnNlbmQoZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBsKG8sZSx2b2lkIDApfShlKS50ZXh0KX0sdC5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXt0aGlzLnNvY2tldC5jbG9zZSgxZTMpfSx0LlBST1RPQ09MPSJncmFwaHFsLXRyYW5zcG9ydC13cyIsdH0oKTtmdW5jdGlvbiBkKGUpe3JldHVybiBuZXcgbCgiY29ubmVjdGlvbl9pbml0IixlKX1mdW5jdGlvbiBoKGUpe3JldHVybiBuZXcgbChhLGUsdm9pZCAwKX1yZXR1cm4gaHQuR3JhcGhRTFdlYlNvY2tldENsaWVudD1wLGh0fWZ1bmN0aW9uIHl0KCl7cmV0dXJuIGR0fHwoZHQ9MSxmdW5jdGlvbihlKXt2YXIgbj10JiZ0Ll9fYXNzaWdufHxmdW5jdGlvbigpe3JldHVybiBuPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPTEscj1hcmd1bWVudHMubGVuZ3RoO248cjtuKyspZm9yKHZhciBpIGluIHQ9YXJndW1lbnRzW25dKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGkpJiYoZVtpXT10W2ldKTtyZXR1cm4gZX0sbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHI9dCYmdC5fX2NyZWF0ZUJpbmRpbmd8fChPYmplY3QuY3JlYXRlP2Z1bmN0aW9uKGUsdCxuLHIpe3ZvaWQgMD09PXImJihyPW4pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRbbl19fSl9OmZ1bmN0aW9uKGUsdCxuLHIpe3ZvaWQgMD09PXImJihyPW4pLGVbcl09dFtuXX0pLGk9dCYmdC5fX3NldE1vZHVsZURlZmF1bHR8fChPYmplY3QuY3JlYXRlP2Z1bmN0aW9uKGUsdCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsImRlZmF1bHQiLHtlbnVtZXJhYmxlOiEwLHZhbHVlOnR9KX06ZnVuY3Rpb24oZSx0KXtlLmRlZmF1bHQ9dH0pLHM9dCYmdC5fX2ltcG9ydFN0YXJ8fGZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgbiBpbiBlKSJkZWZhdWx0IiE9PW4mJk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLG4pJiZyKHQsZSxuKTtyZXR1cm4gaSh0LGUpLHR9LG89dCYmdC5fX2F3YWl0ZXJ8fGZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKChmdW5jdGlvbihpLHMpe2Z1bmN0aW9uIG8oZSl7dHJ5e2Moci5uZXh0KGUpKX1jYXRjaCh0KXtzKHQpfX1mdW5jdGlvbiBhKGUpe3RyeXtjKHIudGhyb3coZSkpfWNhdGNoKHQpe3ModCl9fWZ1bmN0aW9uIGMoZSl7dmFyIHQ7ZS5kb25lP2koZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKChmdW5jdGlvbihlKXtlKHQpfSkpKS50aGVuKG8sYSl9Yygocj1yLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSkpfSxhPXQmJnQuX19nZW5lcmF0b3J8fGZ1bmN0aW9uKGUsdCl7dmFyIG4scixpLHMsbz17bGFiZWw6MCxzZW50OmZ1bmN0aW9uKCl7aWYoMSZpWzBdKXRocm93IGlbMV07cmV0dXJuIGlbMV19LHRyeXM6W10sb3BzOltdfTtyZXR1cm4gcz17bmV4dDphKDApLHRocm93OmEoMSkscmV0dXJuOmEoMil9LCJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJihzW1N5bWJvbC5pdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLHM7ZnVuY3Rpb24gYShzKXtyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKHMpe2lmKG4pdGhyb3cgbmV3IFR5cGVFcnJvcigiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLiIpO2Zvcig7bzspdHJ5e2lmKG49MSxyJiYoaT0yJnNbMF0/ci5yZXR1cm46c1swXT9yLnRocm93fHwoKGk9ci5yZXR1cm4pJiZpLmNhbGwociksMCk6ci5uZXh0KSYmIShpPWkuY2FsbChyLHNbMV0pKS5kb25lKXJldHVybiBpO3N3aXRjaChyPTAsaSYmKHM9WzImc1swXSxpLnZhbHVlXSksc1swXSl7Y2FzZSAwOmNhc2UgMTppPXM7YnJlYWs7Y2FzZSA0OnJldHVybiBvLmxhYmVsKysse3ZhbHVlOnNbMV0sZG9uZTohMX07Y2FzZSA1Om8ubGFiZWwrKyxyPXNbMV0scz1bMF07Y29udGludWU7Y2FzZSA3OnM9by5vcHMucG9wKCksby50cnlzLnBvcCgpO2NvbnRpbnVlO2RlZmF1bHQ6aWYoIShpPW8udHJ5cywoaT1pLmxlbmd0aD4wJiZpW2kubGVuZ3RoLTFdKXx8NiE9PXNbMF0mJjIhPT1zWzBdKSl7bz0wO2NvbnRpbnVlfWlmKDM9PT1zWzBdJiYoIWl8fHNbMV0+aVswXSYmc1sxXTxpWzNdKSl7by5sYWJlbD1zWzFdO2JyZWFrfWlmKDY9PT1zWzBdJiZvLmxhYmVsPGlbMV0pe28ubGFiZWw9aVsxXSxpPXM7YnJlYWt9aWYoaSYmby5sYWJlbDxpWzJdKXtvLmxhYmVsPWlbMl0sby5vcHMucHVzaChzKTticmVha31pWzJdJiZvLm9wcy5wb3AoKSxvLnRyeXMucG9wKCk7Y29udGludWV9cz10LmNhbGwoZSxvKX1jYXRjaChhKXtzPVs2LGFdLHI9MH1maW5hbGx5e249aT0wfWlmKDUmc1swXSl0aHJvdyBzWzFdO3JldHVybnt2YWx1ZTpzWzBdP3NbMV06dm9pZCAwLGRvbmU6ITB9fShbcyxhXSl9fX0sYz10JiZ0Ll9fcmVzdHx8ZnVuY3Rpb24oZSx0KXt2YXIgbj17fTtmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmdC5pbmRleE9mKHIpPDAmJihuW3JdPWVbcl0pO2lmKG51bGwhPWUmJiJmdW5jdGlvbiI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgaT0wO2ZvcihyPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7aTxyLmxlbmd0aDtpKyspdC5pbmRleE9mKHJbaV0pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLHJbaV0pJiYobltyW2ldXT1lW3JbaV1dKX1yZXR1cm4gbn0sdT10JiZ0Ll9faW1wb3J0RGVmYXVsdHx8ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksZS5HcmFwaFFMV2ViU29ja2V0Q2xpZW50PWUuZ3FsPWUucmVzb2x2ZVJlcXVlc3REb2N1bWVudD1lLmJhdGNoUmVxdWVzdHM9ZS5yZXF1ZXN0PWUucmF3UmVxdWVzdD1lLkdyYXBoUUxDbGllbnQ9ZS5DbGllbnRFcnJvcj12b2lkIDA7dmFyIGw9cyhLZSkscD1sLGQ9emUsaD1ZZSxmPXUoSmUpLHk9dHQsdj1hdCxtPWN0O09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJDbGllbnRFcnJvciIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG0uQ2xpZW50RXJyb3J9fSk7dmFyIF89ZnVuY3Rpb24oZSl7dmFyIHQ9e307cmV0dXJuIGUmJigidW5kZWZpbmVkIiE9dHlwZW9mIEhlYWRlcnMmJmUgaW5zdGFuY2VvZiBIZWFkZXJzfHxlIGluc3RhbmNlb2YgcC5IZWFkZXJzP3Q9ZnVuY3Rpb24oZSl7dmFyIHQ9e307cmV0dXJuIGUuZm9yRWFjaCgoZnVuY3Rpb24oZSxuKXt0W25dPWV9KSksdH0oZSk6QXJyYXkuaXNBcnJheShlKT9lLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPWVbMF0scj1lWzFdO3Rbbl09cn0pKTp0PWUpLHR9LEU9ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZSgvKFtccyxdfCNbXlxuXHJdKykrL2csIiAiKS50cmltKCl9LGI9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS51cmwscj1lLnF1ZXJ5LGk9ZS52YXJpYWJsZXMscz1lLm9wZXJhdGlvbk5hbWUsYz1lLmhlYWRlcnMsdT1lLmZldGNoLGw9ZS5mZXRjaE9wdGlvbnM7cmV0dXJuIG8odm9pZCAwLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIGEodGhpcywoZnVuY3Rpb24obyl7c3dpdGNoKG8ubGFiZWwpe2Nhc2UgMDpyZXR1cm4gZT1mLmRlZmF1bHQocixpLHMsbC5qc29uU2VyaWFsaXplciksWzQsdSh0LG4oe21ldGhvZDoiUE9TVCIsaGVhZGVyczpuKG4oe30sInN0cmluZyI9PXR5cGVvZiBlP3siQ29udGVudC1UeXBlIjoiYXBwbGljYXRpb24vanNvbiJ9Ont9KSxjKSxib2R5OmV9LGwpKV07Y2FzZSAxOnJldHVyblsyLG8uc2VudCgpXX19KSl9KSl9LGc9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS51cmwscj1lLnF1ZXJ5LGk9ZS52YXJpYWJsZXMscz1lLm9wZXJhdGlvbk5hbWUsYz1lLmhlYWRlcnMsdT1lLmZldGNoLGw9ZS5mZXRjaE9wdGlvbnM7cmV0dXJuIG8odm9pZCAwLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIGEodGhpcywoZnVuY3Rpb24obyl7c3dpdGNoKG8ubGFiZWwpe2Nhc2UgMDpyZXR1cm4gZT1mdW5jdGlvbihlKXt2YXIgdD1lLnF1ZXJ5LG49ZS52YXJpYWJsZXMscj1lLm9wZXJhdGlvbk5hbWUsaT1lLmpzb25TZXJpYWxpemVyO2lmKCFBcnJheS5pc0FycmF5KHQpKXt2YXIgcz1bInF1ZXJ5PSIrZW5jb2RlVVJJQ29tcG9uZW50KEUodCkpXTtyZXR1cm4gbiYmcy5wdXNoKCJ2YXJpYWJsZXM9IitlbmNvZGVVUklDb21wb25lbnQoaS5zdHJpbmdpZnkobikpKSxyJiZzLnB1c2goIm9wZXJhdGlvbk5hbWU9IitlbmNvZGVVUklDb21wb25lbnQocikpLHMuam9pbigiJiIpfWlmKHZvaWQgMCE9PW4mJiFBcnJheS5pc0FycmF5KG4pKXRocm93IG5ldyBFcnJvcigiQ2Fubm90IGNyZWF0ZSBxdWVyeSB3aXRoIGdpdmVuIHZhcmlhYmxlIHR5cGUsIGFycmF5IGV4cGVjdGVkIik7dmFyIG89dC5yZWR1Y2UoKGZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZS5wdXNoKHtxdWVyeTpFKHQpLHZhcmlhYmxlczpuP2kuc3RyaW5naWZ5KG5bcl0pOnZvaWQgMH0pLGV9KSxbXSk7cmV0dXJuInF1ZXJ5PSIrZW5jb2RlVVJJQ29tcG9uZW50KGkuc3RyaW5naWZ5KG8pKX0oe3F1ZXJ5OnIsdmFyaWFibGVzOmksb3BlcmF0aW9uTmFtZTpzLGpzb25TZXJpYWxpemVyOmwuanNvblNlcmlhbGl6ZXJ9KSxbNCx1KHQrIj8iK2Usbih7bWV0aG9kOiJHRVQiLGhlYWRlcnM6Y30sbCkpXTtjYXNlIDE6cmV0dXJuWzIsby5zZW50KCldfX0pKX0pKX0sVD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLnVybD1lLHRoaXMub3B0aW9ucz10fHx7fX1yZXR1cm4gZS5wcm90b3R5cGUucmF3UmVxdWVzdD1mdW5jdGlvbihlLHQscil7cmV0dXJuIG8odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBpLHMsbyx1LHAsZCxoLGYseSxtO3JldHVybiBhKHRoaXMsKGZ1bmN0aW9uKGEpe3JldHVybiBpPXYucGFyc2VSYXdSZXF1ZXN0QXJncyhlLHQscikscz10aGlzLm9wdGlvbnMsbz1zLmhlYWRlcnMsdT1zLmZldGNoLHA9dm9pZCAwPT09dT9sLmRlZmF1bHQ6dSxkPXMubWV0aG9kLGg9dm9pZCAwPT09ZD8iUE9TVCI6ZCxmPWMocyxbImhlYWRlcnMiLCJmZXRjaCIsIm1ldGhvZCJdKSx5PXRoaXMudXJsLHZvaWQgMCE9PWkuc2lnbmFsJiYoZi5zaWduYWw9aS5zaWduYWwpLG09QShpLnF1ZXJ5KS5vcGVyYXRpb25OYW1lLFsyLE8oe3VybDp5LHF1ZXJ5OmkucXVlcnksdmFyaWFibGVzOmkudmFyaWFibGVzLGhlYWRlcnM6bihuKHt9LF8oUyhvKSkpLF8oaS5yZXF1ZXN0SGVhZGVycykpLG9wZXJhdGlvbk5hbWU6bSxmZXRjaDpwLG1ldGhvZDpoLGZldGNoT3B0aW9uczpmfSldfSkpfSkpfSxlLnByb3RvdHlwZS5yZXF1ZXN0PWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gbyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGkscyxvLHUscCxkLGgsZix5LG0sRSxiO3JldHVybiBhKHRoaXMsKGZ1bmN0aW9uKGEpe3N3aXRjaChhLmxhYmVsKXtjYXNlIDA6cmV0dXJuIGk9di5wYXJzZVJlcXVlc3RBcmdzKGUsdCxyKSxzPXRoaXMub3B0aW9ucyxvPXMuaGVhZGVycyx1PXMuZmV0Y2gscD12b2lkIDA9PT11P2wuZGVmYXVsdDp1LGQ9cy5tZXRob2QsaD12b2lkIDA9PT1kPyJQT1NUIjpkLGY9YyhzLFsiaGVhZGVycyIsImZldGNoIiwibWV0aG9kIl0pLHk9dGhpcy51cmwsdm9pZCAwIT09aS5zaWduYWwmJihmLnNpZ25hbD1pLnNpZ25hbCksbT1BKGkuZG9jdW1lbnQpLEU9bS5xdWVyeSxiPW0ub3BlcmF0aW9uTmFtZSxbNCxPKHt1cmw6eSxxdWVyeTpFLHZhcmlhYmxlczppLnZhcmlhYmxlcyxoZWFkZXJzOm4obih7fSxfKFMobykpKSxfKGkucmVxdWVzdEhlYWRlcnMpKSxvcGVyYXRpb25OYW1lOmIsZmV0Y2g6cCxtZXRob2Q6aCxmZXRjaE9wdGlvbnM6Zn0pXTtjYXNlIDE6cmV0dXJuWzIsYS5zZW50KCkuZGF0YV19fSkpfSkpfSxlLnByb3RvdHlwZS5iYXRjaFJlcXVlc3RzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG8odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciByLGkscyxvLHUscCxkLGgsZix5LG07cmV0dXJuIGEodGhpcywoZnVuY3Rpb24oYSl7c3dpdGNoKGEubGFiZWwpe2Nhc2UgMDpyZXR1cm4gcj12LnBhcnNlQmF0Y2hSZXF1ZXN0QXJncyhlLHQpLGk9dGhpcy5vcHRpb25zLHM9aS5oZWFkZXJzLG89aS5mZXRjaCx1PXZvaWQgMD09PW8/bC5kZWZhdWx0Om8scD1pLm1ldGhvZCxkPXZvaWQgMD09PXA/IlBPU1QiOnAsaD1jKGksWyJoZWFkZXJzIiwiZmV0Y2giLCJtZXRob2QiXSksZj10aGlzLnVybCx2b2lkIDAhPT1yLnNpZ25hbCYmKGguc2lnbmFsPXIuc2lnbmFsKSx5PXIuZG9jdW1lbnRzLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIEEoZS5kb2N1bWVudCkucXVlcnl9KSksbT1yLmRvY3VtZW50cy5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnZhcmlhYmxlc30pKSxbNCxPKHt1cmw6ZixxdWVyeTp5LHZhcmlhYmxlczptLGhlYWRlcnM6bihuKHt9LF8oUyhzKSkpLF8oci5yZXF1ZXN0SGVhZGVycykpLG9wZXJhdGlvbk5hbWU6dm9pZCAwLGZldGNoOnUsbWV0aG9kOmQsZmV0Y2hPcHRpb25zOmh9KV07Y2FzZSAxOnJldHVyblsyLGEuc2VudCgpLmRhdGFdfX0pKX0pKX0sZS5wcm90b3R5cGUuc2V0SGVhZGVycz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5vcHRpb25zLmhlYWRlcnM9ZSx0aGlzfSxlLnByb3RvdHlwZS5zZXRIZWFkZXI9ZnVuY3Rpb24oZSx0KXt2YXIgbixyPXRoaXMub3B0aW9ucy5oZWFkZXJzO3JldHVybiByP3JbZV09dDp0aGlzLm9wdGlvbnMuaGVhZGVycz0oKG49e30pW2VdPXQsbiksdGhpc30sZS5wcm90b3R5cGUuc2V0RW5kcG9pbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudXJsPWUsdGhpc30sZX0oKTtmdW5jdGlvbiBPKGUpe3ZhciB0PWUudXJsLHI9ZS5xdWVyeSxpPWUudmFyaWFibGVzLHM9ZS5oZWFkZXJzLHU9ZS5vcGVyYXRpb25OYW1lLGw9ZS5mZXRjaCxwPWUubWV0aG9kLGQ9dm9pZCAwPT09cD8iUE9TVCI6cCxoPWUuZmV0Y2hPcHRpb25zO3JldHVybiBvKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgZSxvLHAsZix5LHYsXyxFLFQsTyxOO3JldHVybiBhKHRoaXMsKGZ1bmN0aW9uKGEpe3N3aXRjaChhLmxhYmVsKXtjYXNlIDA6cmV0dXJuIGU9IlBPU1QiPT09ZC50b1VwcGVyQ2FzZSgpP2I6ZyxvPUFycmF5LmlzQXJyYXkociksWzQsZSh7dXJsOnQscXVlcnk6cix2YXJpYWJsZXM6aSxvcGVyYXRpb25OYW1lOnUsaGVhZGVyczpzLGZldGNoOmwsZmV0Y2hPcHRpb25zOmh9KV07Y2FzZSAxOnJldHVybls0LHgocD1hLnNlbnQoKSxoLmpzb25TZXJpYWxpemVyKV07Y2FzZSAyOmlmKGY9YS5zZW50KCkseT1vJiZBcnJheS5pc0FycmF5KGYpPyFmLnNvbWUoKGZ1bmN0aW9uKGUpe3JldHVybiFlLmRhdGF9KSk6ISFmLmRhdGEsdj0hZi5lcnJvcnN8fCJhbGwiPT09aC5lcnJvclBvbGljeXx8Imlnbm9yZSI9PT1oLmVycm9yUG9saWN5LHAub2smJnYmJnkpcmV0dXJuIF89cC5oZWFkZXJzLEU9cC5zdGF0dXMsZi5lcnJvcnMsVD1jKGYsWyJlcnJvcnMiXSksTz0iaWdub3JlIj09PWguZXJyb3JQb2xpY3k/VDpmLFsyLG4obih7fSxvP3tkYXRhOk99Ok8pLHtoZWFkZXJzOl8sc3RhdHVzOkV9KV07dGhyb3cgTj0ic3RyaW5nIj09dHlwZW9mIGY/e2Vycm9yOmZ9OmYsbmV3IG0uQ2xpZW50RXJyb3IobihuKHt9LE4pLHtzdGF0dXM6cC5zdGF0dXMsaGVhZGVyczpwLmhlYWRlcnN9KSx7cXVlcnk6cix2YXJpYWJsZXM6aX0pfX0pKX0pKX1mdW5jdGlvbiBOKGUsdCxyLGkpe3JldHVybiBvKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgcztyZXR1cm4gYSh0aGlzLChmdW5jdGlvbihvKXtyZXR1cm4gcz12LnBhcnNlUmVxdWVzdEV4dGVuZGVkQXJncyhlLHQscixpKSxbMixuZXcgVChzLnVybCkucmVxdWVzdChuKHt9LHMpKV19KSl9KSl9ZnVuY3Rpb24geChlLHQpe3JldHVybiB2b2lkIDA9PT10JiYodD15LmRlZmF1bHRKc29uU2VyaWFsaXplciksbyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4scixpO3JldHVybiBhKHRoaXMsKGZ1bmN0aW9uKHMpe3N3aXRjaChzLmxhYmVsKXtjYXNlIDA6cmV0dXJuIGUuaGVhZGVycy5mb3JFYWNoKChmdW5jdGlvbihlLHQpeyJjb250ZW50LXR5cGUiPT09dC50b0xvd2VyQ2FzZSgpJiYobj1lKX0pKSxuJiZuLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aCgiYXBwbGljYXRpb24vanNvbiIpPyhpPShyPXQpLnBhcnNlLFs0LGUudGV4dCgpXSk6WzMsMl07Y2FzZSAxOnJldHVyblsyLGkuYXBwbHkocixbcy5zZW50KCldKV07Y2FzZSAyOnJldHVyblsyLGUudGV4dCgpXX19KSl9KSl9ZnVuY3Rpb24gSShlKXt2YXIgdCxuPXZvaWQgMCxyPWUuZGVmaW5pdGlvbnMuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4iT3BlcmF0aW9uRGVmaW5pdGlvbiI9PT1lLmtpbmR9KSk7cmV0dXJuIDE9PT1yLmxlbmd0aCYmKG49bnVsbD09PSh0PXJbMF0ubmFtZSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQudmFsdWUpLG59ZnVuY3Rpb24gQShlKXtpZigic3RyaW5nIj09dHlwZW9mIGUpe3ZhciB0PXZvaWQgMDt0cnl7dD1JKGQucGFyc2UoZSkpfWNhdGNoKHIpe31yZXR1cm57cXVlcnk6ZSxvcGVyYXRpb25OYW1lOnR9fXZhciBuPUkoZSk7cmV0dXJue3F1ZXJ5OmgucHJpbnQoZSksb3BlcmF0aW9uTmFtZTpufX1mdW5jdGlvbiBTKGUpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBlP2UoKTplfWUuR3JhcGhRTENsaWVudD1ULGUucmF3UmVxdWVzdD1mdW5jdGlvbihlLHQscixpKXtyZXR1cm4gbyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHM7cmV0dXJuIGEodGhpcywoZnVuY3Rpb24obyl7cmV0dXJuIHM9di5wYXJzZVJhd1JlcXVlc3RFeHRlbmRlZEFyZ3MoZSx0LHIsaSksWzIsbmV3IFQocy51cmwpLnJhd1JlcXVlc3Qobih7fSxzKSldfSkpfSkpfSxlLnJlcXVlc3Q9TixlLmJhdGNoUmVxdWVzdHM9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBvKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgaTtyZXR1cm4gYSh0aGlzLChmdW5jdGlvbihzKXtyZXR1cm4gaT12LnBhcnNlQmF0Y2hSZXF1ZXN0c0V4dGVuZGVkQXJncyhlLHQsciksWzIsbmV3IFQoaS51cmwpLmJhdGNoUmVxdWVzdHMobih7fSxpKSldfSkpfSkpfSxlLmRlZmF1bHQ9TixlLnJlc29sdmVSZXF1ZXN0RG9jdW1lbnQ9QSxlLmdxbD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10sbj0xO248YXJndW1lbnRzLmxlbmd0aDtuKyspdFtuLTFdPWFyZ3VtZW50c1tuXTtyZXR1cm4gZS5yZWR1Y2UoKGZ1bmN0aW9uKGUsbixyKXtyZXR1cm4iIitlK24rKHIgaW4gdD90W3JdOiIiKX0pLCIiKX07dmFyIHc9ZnQoKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiR3JhcGhRTFdlYlNvY2tldENsaWVudCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHcuR3JhcGhRTFdlYlNvY2tldENsaWVudH19KX0oVWUpKSxVZX12YXIgdnQ9eXQoKSxtdD0oZT0+KGUuQmlsbGluZ1F1b3RhRXhjZWVkZWQ9IkJpbGxpbmdRdW90YUV4Y2VlZGVkIixlKSkobXR8fHt9KTtjb25zdCBfdD1bbXQuQmlsbGluZ1F1b3RhRXhjZWVkZWQudG9TdHJpbmcoKV0sRXQ9ZT0+e2NvbnN0IHQ9KG4scixpLHM9MCk9Pl9fYXN5bmModGhpcyxudWxsLChmdW5jdGlvbiooKXt0cnl7cmV0dXJuIHlpZWxkIG4oKX1jYXRjaChvKXtpZihvIGluc3RhbmNlb2YgdnQuQ2xpZW50RXJyb3ImJiEoZT0+e3ZhciB0O3JldHVybiB2b2lkIDA9PT0obnVsbD09KHQ9ZS5yZXNwb25zZS5lcnJvcnMpP3ZvaWQgMDp0LmZpbmQoKGU9Pl90LmluY2x1ZGVzKGUubWVzc2FnZSkpKSl9KShvKSl0aHJvdyBvO2lmKHM8NSlyZXR1cm4geWllbGQgbmV3IFByb21pc2UoKGU9PnNldFRpbWVvdXQoZSwxZTMrNTAwKk1hdGgucG93KDIscykpKSkseWllbGQgdChuLHIsaSxzKzEpO3Rocm93IGNvbnNvbGUuZXJyb3IoYGhpZ2hsaWdodC5pbzogWyR7ZXx8ZX1dIGRhdGEgcmVxdWVzdCBmYWlsZWQgYWZ0ZXIgJHtzfSByZXRyaWVzYCksb319KSk7cmV0dXJuIHR9LGJ0PVsibnVtYmVyIiwic3RyaW5nIiwiYm9vbGVhbiJdO2NsYXNzIGd0e2NvbnN0cnVjdG9yKGUsdCl7X19wdWJsaWNGaWVsZCh0aGlzLCJkZWJ1ZyIpLF9fcHVibGljRmllbGQodGhpcywibmFtZSIpLHRoaXMuZGVidWc9ZSx0aGlzLm5hbWU9dH1sb2coLi4uZSl7aWYodGhpcy5kZWJ1Zyl7bGV0IHQ9YFske0RhdGUubm93KCl9XWA7dGhpcy5uYW1lJiYodCs9YCAtICR7dGhpcy5uYW1lfWApLGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsW3QsLi4uZV0pfX19Y29uc3QgVHQ9c2VsZjtmdW5jdGlvbiBPdChlLHQpe2NvbnN0IG49e30scj1bXSxpPVtdO2Zvcihjb25zdFtvLGFdb2YgT2JqZWN0LmVudHJpZXMoZSkpe2lmKG51bGw9PWEpY29udGludWU7bGV0IGU7YnQuaW5jbHVkZXModHlwZW9mIGEpfHxyLnB1c2goe1tvXTphfSksZT0ic3RyaW5nIj09dHlwZW9mIGE/YTpzKGEpLGUubGVuZ3RoPjJlMyYmKGkucHVzaCh7W29dOmF9KSxlPWUuc3Vic3RyaW5nKDAsMmUzKSksbltvXT1lfXJldHVybiJzZXNzaW9uIiE9PXQmJihyLmxlbmd0aD4wJiZjb25zb2xlLndhcm4oYEhpZ2hsaWdodCB3YXMgcGFzc2VkIG9uZSBvciBtb3JlICR7dH0gcHJvcGVydGllcyBub3Qgb2YgdHlwZSBzdHJpbmcsIG51bWJlciwgb3IgYm9vbGVhbi5gLHIpLGkubGVuZ3RoPjAmJmNvbnNvbGUud2FybihgSGlnaGxpZ2h0IHdhcyBwYXNzZWQgb25lIG9yIG1vcmUgJHt0fSBwcm9wZXJ0aWVzIGV4Y2VlZGluZyAyMDAwIGNoYXJhY3RlcnMsIHdoaWNoIHdpbGwgYmUgdHJ1bmNhdGVkLmAsaSkpLG59e2xldCB0LG4scixpPTAsbz0hMSxhPTAsYz1uZXcgZ3QoITEsIlt3b3JrZXJdIik7Y29uc3QgdT1bXSxsPSgpPT4wIT09YSYmaTw1JiYhIShudWxsPT1yP3ZvaWQgMDpyLmxlbmd0aCkscD0odCxuKT0+e1R0LnBvc3RNZXNzYWdlKHtyZXNwb25zZTp7dHlwZTplLkN1c3RvbUV2ZW50LHRhZzp0LHBheWxvYWQ6bn19KX0sZD1uPT5fX2FzeW5jKHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7Y29uc3R7aWQ6aSxldmVudHM6byxtZXNzYWdlczphLGVycm9yczpjLHJlc291cmNlc1N0cmluZzpsLHdlYlNvY2tldEV2ZW50c1N0cmluZzpwLGlzQmVhY29uOmQsaGFzU2Vzc2lvblVubG9hZGVkOmgsaGlnaGxpZ2h0TG9nczpmfT1uLHk9cyh7bWVzc2FnZXM6YX0pO2xldCB2PXtzZXNzaW9uX3NlY3VyZV9pZDpyLGV2ZW50czp7ZXZlbnRzOm99LG1lc3NhZ2VzOnkscmVzb3VyY2VzOmwsd2ViX3NvY2tldF9ldmVudHM6cCxlcnJvcnM6Yyxpc19iZWFjb246ZCxoYXNfc2Vzc2lvbl91bmxvYWRlZDpoLHBheWxvYWRfaWQ6aS50b1N0cmluZygpfTtmJiYodi5oaWdobGlnaHRfbG9ncz1mKTtjb25zdCBtPXQuUHVzaFBheWxvYWQodikudGhlbigoZT0+e3ZhciB0O3JldHVybiBudWxsIT0odD1lLnB1c2hQYXlsb2FkKT90OjB9KSk7aWYodS5sZW5ndGgpe2NvbnN0IGU9dC5wdXNoTWV0cmljcyh7bWV0cmljczp1fSk7dS5zcGxpY2UoMCkseWllbGQgZX1UdC5wb3N0TWVzc2FnZSh7cmVzcG9uc2U6e3R5cGU6ZS5Bc3luY0V2ZW50cyxpZDppLGV2ZW50c1NpemU6eWllbGQgbX19KX0pKSxoPWU9Pl9fYXN5bmModGhpcyxudWxsLChmdW5jdGlvbiooKXtjb25zdHt1c2VyT2JqZWN0OmksdXNlcklkZW50aWZpZXI6byxzb3VyY2U6YX09ZTtwKCJzZWdtZW50Ij09PWE/IlNlZ21lbnQgSWRlbnRpZnkiOiJJZGVudGlmeSIscyhfX3NwcmVhZFZhbHVlcyh7dXNlcklkZW50aWZpZXI6b30saSkpKSx5aWVsZCB0LmlkZW50aWZ5U2Vzc2lvbih7c2Vzc2lvbl9zZWN1cmVfaWQ6cix1c2VyX2lkZW50aWZpZXI6byx1c2VyX29iamVjdDpPdChpLCJ1c2VyIil9KTtjb25zdCB1PSJzZWdtZW50Ij09PWE/YToiZGVmYXVsdCI7Yy5sb2coYElkZW50aWZ5ICgke299LCBzb3VyY2U6ICR7dX0pIHcvIG9iajogJHtzKGkpfSBAICR7bn1gKX0pKSxmPWU9Pl9fYXN5bmModGhpcyxudWxsLChmdW5jdGlvbiooKXtjb25zdHtwcm9wZXJ0aWVzT2JqZWN0OmkscHJvcGVydHlUeXBlOm99PWU7bGV0IGE9IiI7dm9pZCAwIT09KG51bGw9PWk/dm9pZCAwOmkuY2xpY2tUZXh0Q29udGVudCk/KGE9IkNsaWNrVGV4dENvbnRlbnQiLHlpZWxkIHQuYWRkU2Vzc2lvblByb3BlcnRpZXMoe3Nlc3Npb25fc2VjdXJlX2lkOnIscHJvcGVydGllc19vYmplY3Q6T3QoaSwic2Vzc2lvbiIpfSkpOiJzZXNzaW9uIj09PShudWxsPT1vP3ZvaWQgMDpvLnR5cGUpPyhhPSJTZXNzaW9uIix5aWVsZCB0LmFkZFNlc3Npb25Qcm9wZXJ0aWVzKHtzZXNzaW9uX3NlY3VyZV9pZDpyLHByb3BlcnRpZXNfb2JqZWN0Ok90KGksInNlc3Npb24iKX0pKToic2VnbWVudCI9PT0obnVsbD09bz92b2lkIDA6by5zb3VyY2UpPyhhPSJTZWdtZW50IixwKCJTZWdtZW50IFRyYWNrIixzKGkpKSk6KGE9IlRyYWNrIixwKGEscyhpKSkpLGMubG9nKGBBZGRpbmcgJHthfSBQcm9wZXJ0aWVzIHRvIHNlc3Npb24gKCR7cn0pIHcvIG9iajogJHtKU09OLnN0cmluZ2lmeShpKX0gQCAke259YCl9KSkseT1lPT5fX2FzeW5jKHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7dS5wdXNoKC4uLmUubWV0cmljcy5tYXAoKGU9Pih7bmFtZTplLm5hbWUsdmFsdWU6ZS52YWx1ZSxzZXNzaW9uX3NlY3VyZV9pZDpyLGNhdGVnb3J5OmUuY2F0ZWdvcnksZ3JvdXA6ZS5ncm91cCx0aW1lc3RhbXA6ZS50aW1lc3RhbXAudG9JU09TdHJpbmcoKSx0YWdzOmUudGFnc30pKSkpfSkpLHY9ZT0+X19hc3luYyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2NvbnN0e3RpbWVzdGFtcDpuLHZlcmJhdGltOmksdXNlckVtYWlsOnMsdXNlck5hbWU6b309ZTt5aWVsZCB0LmFkZFNlc3Npb25GZWVkYmFjayh7c2Vzc2lvbl9zZWN1cmVfaWQ6cix0aW1lc3RhbXA6bix2ZXJiYXRpbTppLHVzZXJfZW1haWw6cyx1c2VyX25hbWU6b30pfSkpO1R0Lm9ubWVzc2FnZT1mdW5jdGlvbihzKXtyZXR1cm4gX19hc3luYyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2lmKHMuZGF0YS5tZXNzYWdlLnR5cGU9PT1lLkluaXRpYWxpemUpcmV0dXJuIG49cy5kYXRhLm1lc3NhZ2UuYmFja2VuZCxyPXMuZGF0YS5tZXNzYWdlLnNlc3Npb25TZWN1cmVJRCxvPXMuZGF0YS5tZXNzYWdlLmRlYnVnLGE9cy5kYXRhLm1lc3NhZ2UucmVjb3JkaW5nU3RhcnRUaW1lLGMuZGVidWc9byx2b2lkKHQ9ZnVuY3Rpb24oZSx0PXFlKXtyZXR1cm57UHVzaFBheWxvYWQ6KG4scik9PnQoKHQ9PmUucmVxdWVzdChGZSxuLF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LHIpLHQpKSksIlB1c2hQYXlsb2FkIiwibXV0YXRpb24iKSxpZGVudGlmeVNlc3Npb246KG4scik9PnQoKHQ9PmUucmVxdWVzdChMZSxuLF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LHIpLHQpKSksImlkZW50aWZ5U2Vzc2lvbiIsIm11dGF0aW9uIiksYWRkU2Vzc2lvblByb3BlcnRpZXM6KG4scik9PnQoKHQ9PmUucmVxdWVzdChqZSxuLF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LHIpLHQpKSksImFkZFNlc3Npb25Qcm9wZXJ0aWVzIiwibXV0YXRpb24iKSxwdXNoTWV0cmljczoobixyKT0+dCgodD0+ZS5yZXF1ZXN0KEJlLG4sX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe30sciksdCkpKSwicHVzaE1ldHJpY3MiLCJtdXRhdGlvbiIpLGFkZFNlc3Npb25GZWVkYmFjazoobixyKT0+dCgodD0+ZS5yZXF1ZXN0KE1lLG4sX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe30sciksdCkpKSwiYWRkU2Vzc2lvbkZlZWRiYWNrIiwibXV0YXRpb24iKSxpbml0aWFsaXplU2Vzc2lvbjoobixyKT0+dCgodD0+ZS5yZXF1ZXN0KCRlLG4sX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe30sciksdCkpKSwiaW5pdGlhbGl6ZVNlc3Npb24iLCJtdXRhdGlvbiIpLElnbm9yZToobixyKT0+dCgodD0+ZS5yZXF1ZXN0KFZlLG4sX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe30sciksdCkpKSwiSWdub3JlIiwicXVlcnkiKX19KG5ldyB2dC5HcmFwaFFMQ2xpZW50KG4se2hlYWRlcnM6e319KSxFdChyKSkpO2lmKGwoKSl0cnl7cy5kYXRhLm1lc3NhZ2UudHlwZT09PWUuQXN5bmNFdmVudHM/eWllbGQgZChzLmRhdGEubWVzc2FnZSk6cy5kYXRhLm1lc3NhZ2UudHlwZT09PWUuSWRlbnRpZnk/eWllbGQgaChzLmRhdGEubWVzc2FnZSk6cy5kYXRhLm1lc3NhZ2UudHlwZT09PWUuUHJvcGVydGllcz95aWVsZCBmKHMuZGF0YS5tZXNzYWdlKTpzLmRhdGEubWVzc2FnZS50eXBlPT09ZS5NZXRyaWNzP3lpZWxkIHkocy5kYXRhLm1lc3NhZ2UpOnMuZGF0YS5tZXNzYWdlLnR5cGU9PT1lLkZlZWRiYWNrJiYoeWllbGQgdihzLmRhdGEubWVzc2FnZSkpLGk9MH1jYXRjaCh1KXtvJiZjb25zb2xlLmVycm9yKHUpLGkrPTF9fSkpfX19KCk7Cg==",Yr="undefined"!=typeof window&&window.Blob&&new Blob([atob(Jr)],{type:"text/javascript;charset=utf-8"});function Ur(){let e;try{if(e=Yr&&(window.URL||window.webkitURL).createObjectURL(Yr),!e)throw"";return new Worker(e)}catch(t){return new Worker("data:application/javascript;base64,"+Jr)}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}var Fr=(e=>(e.BillingQuotaExceeded="BillingQuotaExceeded",e))(Fr||{});const Kr=[Fr.BillingQuotaExceeded.toString()],Hr=e=>{const t=(n,i,o,s=0)=>m(this,null,(function*(){try{return yield n()}catch(r){if(r instanceof lo.ClientError&&!(e=>{var t;return void 0===(null==(t=e.response.errors)?void 0:t.find((e=>Kr.includes(e.message))))})(r))throw r;if(s<5)return yield new Promise((e=>setTimeout(e,1e3+500*Math.pow(2,s)))),yield t(n,i,o,s+1);throw console.error(`highlight.io: [${e||e}] data request failed after ${s} retries`),r}}));return t};var Er=(e=>(e[e.Initialize=0]="Initialize",e[e.AsyncEvents=1]="AsyncEvents",e[e.Identify=2]="Identify",e[e.Properties=3]="Properties",e[e.Metrics=4]="Metrics",e[e.Feedback=5]="Feedback",e[e.CustomEvent=6]="CustomEvent",e))(Er||{});class Or{constructor(e,t){h(this,"debug"),h(this,"name"),this.debug=e,this.name=t}log(...e){if(this.debug){let t=`[${Date.now()}]`;this.name&&(t+=` - ${this.name}`),console.log.apply(console,[t,...e])}}}const zr=()=>m(this,null,(function*(){const e=[];for(let t=0;t<30;t++)e.push(yield new Promise((e=>requestAnimationFrame((t=>requestAnimationFrame((n=>e(n-t))))))));return e.reduce(((e,t)=>e+t),0)/e.length})),Mr="iframe parent ready",Ar="iframe ok",Br=(e,t)=>{console.warn(`Highlight Warning: (${e}): `,{output:t})},Pr="app.highlight.run",Dr={normal:{bytes:1e7,time:24e4},canvas:{bytes:16e6,time:5e3}};class Qr{constructor(e,t){var n,i,o,s,r,l;h(this,"options"),h(this,"isRunningOnHighlight"),h(this,"organizationID"),h(this,"graphqlSDK"),h(this,"events"),h(this,"sessionData"),h(this,"ready"),h(this,"manualStopped"),h(this,"state"),h(this,"logger"),h(this,"enableSegmentIntegration"),h(this,"privacySetting"),h(this,"enableCanvasRecording"),h(this,"enablePerformanceRecording"),h(this,"samplingStrategy"),h(this,"inlineImages"),h(this,"inlineStylesheet"),h(this,"debugOptions"),h(this,"listeners"),h(this,"firstloadVersion"),h(this,"environment"),h(this,"sessionShortcut"),h(this,"appVersion"),h(this,"serviceName"),h(this,"_worker"),h(this,"_optionsInternal"),h(this,"_backendUrl"),h(this,"_recordingStartTime"),h(this,"_isOnLocalHost"),h(this,"_onToggleFeedbackFormVisibility"),h(this,"_firstLoadListeners"),h(this,"_isCrossOriginIframe"),h(this,"_eventBytesSinceSnapshot"),h(this,"_lastSnapshotTime"),h(this,"_lastVisibilityChangeTime"),h(this,"pushPayloadTimerId"),h(this,"hasSessionUnloaded"),h(this,"hasPushedData"),h(this,"reloaded"),h(this,"_hasPreviouslyInitialized"),h(this,"_payloadId"),h(this,"_recordStop"),e.sessionSecureID||(e.sessionSecureID=Tr()),this.options=e,"boolean"==typeof(null==(n=this.options)?void 0:n.debug)?this.debugOptions=this.options.debug?{clientInteractions:!0}:{}:this.debugOptions=null!=(o=null==(i=this.options)?void 0:i.debug)?o:{},this.logger=new Or(this.debugOptions.clientInteractions),e.storageMode&&(this.logger.log(`initializing in ${e.storageMode} session mode`),l=e.storageMode,rs=l),this._worker=new Ur,this._worker.onmessage=e=>{var t,n;(null==(t=e.data.response)?void 0:t.type)===Er.AsyncEvents?(this._eventBytesSinceSnapshot+=e.data.response.eventsSize,this.logger.log(`Web worker sent payloadID ${e.data.response.id} size ${e.data.response.eventsSize}.\n                Total since snapshot: ${(this._eventBytesSinceSnapshot/1e6).toFixed(1)}MB`)):(null==(n=e.data.response)?void 0:n.type)===Er.CustomEvent&&this.addCustomEvent(e.data.response.tag,e.data.response.payload)};let a=xr();if(this.reloaded=!1,!(null==(s=this.sessionData)?void 0:s.sessionSecureID)&&(null==a?void 0:a.sessionSecureID))this.sessionData=a,this.options.sessionSecureID=a.sessionSecureID,this.reloaded=!0,this.logger.log(`Tab reloaded, continuing previous session: ${this.sessionData.sessionSecureID}`);else{for(const e of Object.values(ss))us(e);this.sessionData={sessionSecureID:this.options.sessionSecureID,projectID:0,sessionStartTime:Date.now()}}this._hasPreviouslyInitialized=!1,this._firstLoadListeners=t||new In(this.options);try{window.parent.document&&(this._isCrossOriginIframe=!1)}catch(c){this._isCrossOriginIframe=null==(r=this.options.recordCrossOriginIframe)||r}this._initMembers(this.options)}static create(e){return new Qr(e)}_reset(e){return m(this,arguments,(function*({forceNew:e}){let t,n;if(this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0),!e)try{t=cs(ss.USER_IDENTIFIER);const e=cs(ss.USER_OBJECT);e&&(n=JSON.parse(e))}catch(i){}for(const o of Object.values(ss))us(o);this.sessionData.sessionSecureID=Tr(),this.sessionData.sessionStartTime=Date.now(),this.options.sessionSecureID=this.sessionData.sessionSecureID,this._payloadId=0,this.stopRecording(),this._firstLoadListeners=new In(this.options),yield this.initialize(),t&&n&&(yield this.identify(t,n))}))}_initMembers(e){var t,n,i,o,s,r,l,a,c,u,h,m;this.sessionShortcut=!1,this._recordingStartTime=0,this._isOnLocalHost="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname||""===window.location.hostname,this.ready=!1,this.state="NotRecording",this.manualStopped=!1,this.enableSegmentIntegration=!!e.enableSegmentIntegration,this.privacySetting=null!=(t=e.privacySetting)?t:"default",this.enableCanvasRecording=null!=(n=e.enableCanvasRecording)&&n,this.enablePerformanceRecording=null==(i=e.enablePerformanceRecording)||i,this.inlineImages=null!=(o=e.inlineImages)?o:this._isOnLocalHost,this.inlineStylesheet=null!=(s=e.inlineStylesheet)?s:this._isOnLocalHost,this.samplingStrategy=d({canvasFactor:.5,canvasMaxSnapshotDimension:360,canvasClearWebGLBuffer:!0},null!=(r=e.samplingStrategy)?r:{canvas:2}),this._backendUrl=null!=(l=null==e?void 0:e.backendUrl)?l:"https://pub.highlight.run","/"===this._backendUrl[0]&&(this._backendUrl=new URL(this._backendUrl,document.baseURI).href);const b=new lo.GraphQLClient(`${this._backendUrl}`,{headers:{}});this.graphqlSDK=function(e,t=Lo){return{PushPayload:(n,i)=>t((t=>e.request(So,n,d(d({},i),t))),"PushPayload","mutation"),identifySession:(n,i)=>t((t=>e.request(Wo,n,d(d({},i),t))),"identifySession","mutation"),addSessionProperties:(n,i)=>t((t=>e.request(Ro,n,d(d({},i),t))),"addSessionProperties","mutation"),pushMetrics:(n,i)=>t((t=>e.request(vo,n,d(d({},i),t))),"pushMetrics","mutation"),addSessionFeedback:(n,i)=>t((t=>e.request(Co,n,d(d({},i),t))),"addSessionFeedback","mutation"),initializeSession:(n,i)=>t((t=>e.request(ko,n,d(d({},i),t))),"initializeSession","mutation"),Ignore:(n,i)=>t((t=>e.request(No,n,d(d({},i),t))),"Ignore","query")}}(b,Hr((null==(a=this.sessionData)?void 0:a.sessionSecureID)||(null==(c=this.options)?void 0:c.sessionSecureID))),this.environment=null!=(u=e.environment)?u:"production",this.appVersion=e.appVersion,this.serviceName=null!=(h=e.serviceName)?h:"","string"==typeof e.organizationID?this.organizationID=e.organizationID:this.organizationID=e.organizationID.toString(),"jgoqo9el"===this.organizationID&&(this.inlineStylesheet=!1),this.isRunningOnHighlight="1"===this.organizationID||"1jdkoe52"===this.organizationID,this.firstloadVersion=e.firstloadVersion||"unknown",this.sessionShortcut=e.sessionShortcut||!1,this._onToggleFeedbackFormVisibility=()=>{};const Z=e,{firstloadVersion:g}=Z,y=p(Z,["firstloadVersion"]);this._optionsInternal=y,this.listeners=[],this.events=[],this.hasSessionUnloaded=!1,this.hasPushedData=!1,window.Intercom&&window.Intercom("onShow",(()=>{window.Intercom("update",{highlightSessionURL:this.getCurrentSessionURLWithTimestamp()}),this.addProperties({event:"Intercom onShow"})})),this._eventBytesSinceSnapshot=0,this._lastSnapshotTime=(new Date).getTime(),this._lastVisibilityChangeTime=(new Date).getTime(),this._payloadId=null!=(m=Number(cs(ss.PAYLOAD_ID)))?m:1,ds(ss.PAYLOAD_ID,this._payloadId.toString())}identify(e,t={},n){e&&""!==e?(this.sessionData.userIdentifier=e.toString(),this.sessionData.userObject=t,ds(ss.USER_IDENTIFIER,e.toString()),ds(ss.USER_OBJECT,JSON.stringify(t)),this._worker.postMessage({message:{type:Er.Identify,userIdentifier:e,userObject:t,source:n}})):console.warn("Highlight's identify() call was passed an empty identifier.",{user_identifier:e,user_object:t})}pushCustomError(e,t){return m(this,null,(function*(){var n,i,o;const s=(yield os.get()).slice(1);this._firstLoadListeners.errors.push({event:e,type:"custom",url:window.location.href,source:null!=(n=s[0].fileName)?n:"",lineNumber:null!=(i=s[0].lineNumber)?i:0,columnNumber:null!=(o=s[0].columnNumber)?o:0,stackTrace:s,timestamp:(new Date).toISOString(),payload:t})}))}consumeCustomError(e,t,n){return m(this,null,(function*(){var i,o,s,r;const l=Et.parse(e);this._firstLoadListeners.errors.push({event:t?t+":"+e.message:e.message,type:"custom",url:window.location.href,source:"",lineNumber:(null==(i=l[0])?void 0:i.lineNumber)?null==(o=l[0])?void 0:o.lineNumber:0,columnNumber:(null==(s=l[0])?void 0:s.columnNumber)?null==(r=l[0])?void 0:r.columnNumber:0,stackTrace:l,timestamp:(new Date).toISOString(),payload:n})}))}addProperties(e={},t){const n=d({},e);Object.entries(n).forEach((([e,t])=>{try{structuredClone(t)}catch(i){delete n[e]}})),this._worker.postMessage({message:{type:Er.Properties,propertiesObject:n,propertyType:t}})}initialize(e){return m(this,null,(function*(){var t,n,i,o,s,r,l;if((null==navigator?void 0:navigator.webdriver)&&!window.Cypress||(null==(t=null==navigator?void 0:navigator.userAgent)?void 0:t.includes("Googlebot"))||(null==(n=null==navigator?void 0:navigator.userAgent)?void 0:n.includes("AdsBot")))null==(i=this._firstLoadListeners)||i.stopListening();else try{if(!this.reloaded&&"6glrjqg9"===this.organizationID&&Math.random()>=.02)return void(null==(o=this._firstLoadListeners)||o.stopListening());if(null==e?void 0:e.forceNew)return yield this._reset(e),void this.takeFullSnapshot();const t=cs(ss.RECORDING_START_TIME);t?this._recordingStartTime=parseInt(t,10):(this._recordingStartTime=(new Date).getTime(),ds(ss.RECORDING_START_TIME,this._recordingStartTime.toString()));let n,i=cs("highlightClientID");i||(i=Tr(),ds("highlightClientID",i)),us(ss.SESSION_DATA),n=!this.options.disableSessionRecording&&(void 0===this.options.disableNetworkRecording&&("boolean"!=typeof this.options.networkRecording&&((null==(s=this.options.networkRecording)?void 0:s.recordHeadersAndBody)||!1)));let a=[];if("object"==typeof this.options.networkRecording&&(null==(r=this.options.networkRecording.destinationDomains)?void 0:r.length)&&(a=this.options.networkRecording.destinationDomains),this._isCrossOriginIframe)yield this._setupCrossOriginIframe();else{const e=yield this.graphqlSDK.initializeSession({organization_verbose_id:this.organizationID,enable_strict_privacy:"strict"===this.privacySetting,privacy_setting:this.privacySetting,enable_recording_network_contents:n,clientVersion:this.firstloadVersion,firstloadVersion:this.firstloadVersion,clientConfig:JSON.stringify(this._optionsInternal),environment:this.environment,id:i,appVersion:this.appVersion,serviceName:this.serviceName,session_secure_id:this.sessionData.sessionSecureID,client_id:i,network_recording_domains:a,disable_session_recording:this.options.disableSessionRecording});if(e.initializeSession.secure_id!==this.sessionData.sessionSecureID&&this.logger.log(`Unexpected secure id returned by initializeSession: ${e.initializeSession.secure_id}`),this.sessionData.sessionSecureID=e.initializeSession.secure_id,this.sessionData.projectID=parseInt((null==(l=null==e?void 0:e.initializeSession)?void 0:l.project_id)||"0"),!this.sessionData.projectID||!this.sessionData.sessionSecureID)return void console.error("Failed to initialize Highlight; an error occurred on our end.",this.sessionData)}if(this.logger.log(`Loaded Highlight\nRemote: ${this._backendUrl}\nProject ID: ${this.sessionData.projectID}\nSessionSecureID: ${this.sessionData.sessionSecureID}`),this.options.sessionSecureID=this.sessionData.sessionSecureID,this._worker.postMessage({message:{type:Er.Initialize,sessionSecureID:this.sessionData.sessionSecureID,backend:this._backendUrl,debug:!!this.debugOptions.clientInteractions,recordingStartTime:this._recordingStartTime}}),ds(ss.SESSION_SECURE_ID,this.sessionData.sessionSecureID),this.sessionData.userIdentifier&&this.identify(this.sessionData.userIdentifier,this.sessionData.userObject),this._firstLoadListeners.isListening()?this._firstLoadListeners.hasNetworkRecording||In.setupNetworkListener(this._firstLoadListeners,this.options):this._firstLoadListeners.startListening(),this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0),this._isCrossOriginIframe||(this.pushPayloadTimerId=setTimeout((()=>{this._save()}),1e3)),this.options.disableSessionRecording)return this.logger.log("Highlight is NOT RECORDING a session replay per H.init setting."),this.ready=!0,this.state="Recording",void(this.manualStopped=!1);const{getDeviceDetails:c}=(()=>{if(!("performance"in window)||!("memory"in performance))return{getDeviceDetails:void 0,getCurrentDeviceDetails:void 0};const e=window.performance;return{getDeviceDetails:()=>({deviceMemory:kr(navigator.deviceMemory||0)}),getCurrentDeviceDetails:()=>({jsHeapSizeLimit:Cr(e.memory.jsHeapSizeLimit),totalJSHeapSize:Cr(e.memory.totalJSHeapSize),usedJSHeapSize:Cr(e.memory.usedJSHeapSize)})}})();c&&this.recordMetric([{name:Qt.DeviceMemory,value:c().deviceMemory,category:jt.Device,group:window.location.href}]);const d=e=>{this.events.push(e)};if(d.bind(this),!this._recordStop){let e;("boolean"==typeof this.options.debug&&this.options.debug||"object"==typeof this.options.debug&&this.options.debug.domRecording)&&(e={debug:this.logger.log,warn:Br});const[t,n]=(e=>{switch(e){case"strict":case"default":return[!0,void 0];case"none":return[!1,{password:!0}]}})(this.privacySetting);this._recordStop=Gt({ignoreClass:"highlight-ignore",blockClass:"highlight-block",emit:d,recordCrossOriginIframes:this.options.recordCrossOriginIframe,privacySetting:this.privacySetting,maskAllInputs:t,maskInputOptions:n,recordCanvas:this.enableCanvasRecording,sampling:{canvas:{fps:this.samplingStrategy.canvas,fpsManual:this.samplingStrategy.canvasManualSnapshot,resizeFactor:this.samplingStrategy.canvasFactor,clearWebGLBuffer:this.samplingStrategy.canvasClearWebGLBuffer,initialSnapshotDelay:this.samplingStrategy.canvasInitialSnapshotDelay,dataURLOptions:{type:"image/webp",quality:.9},maxSnapshotDimension:this.samplingStrategy.canvasMaxSnapshotDimension}},keepIframeSrcFn:e=>!this.options.recordCrossOriginIframe,inlineImages:this.inlineImages,inlineStylesheet:this.inlineStylesheet,plugins:[St()],logger:e}),this.options.recordCrossOriginIframe&&this._setupCrossOriginIframeParent();const i={height:window.innerHeight,width:window.innerWidth};this.addCustomEvent("Viewport",i),this.submitViewportMetrics(i)}document.referrer&&(window&&document.referrer.includes(window.location.origin)||(this.addCustomEvent("Referrer",document.referrer),this.addProperties({referrer:document.referrer},{type:"session"}))),this._setupWindowListeners(),this.ready=!0,this.state="Recording",this.manualStopped=!1}catch(a){this._isOnLocalHost&&(console.error(a),Br("initializeSession",a))}}))}_visibilityHandler(e){return m(this,null,(function*(){if(this.manualStopped)this.logger.log("Ignoring visibility event due to manual stop.");else if(!((new Date).getTime()-this._lastVisibilityChangeTime<100))if(this._lastVisibilityChangeTime=(new Date).getTime(),this.logger.log(`Detected window ${e?"hidden":"visible"}.`),e){if(this.addCustomEvent("TabHidden",!0),"sendBeacon"in navigator)try{yield this._sendPayload({isBeacon:!0,sendFn:e=>{let t=new Blob([JSON.stringify({query:Li(So),variables:e})],{type:"application/json"});return navigator.sendBeacon(`${this._backendUrl}`,t),Promise.resolve(0)}})}catch(t){this._isOnLocalHost&&(console.error(t),Br("_sendPayload",t))}this.options.disableBackgroundRecording&&this.stopRecording()}else this.options.disableBackgroundRecording&&(yield this.initialize()),this.addCustomEvent("TabHidden",!1)}))}_setupCrossOriginIframe(){return m(this,null,(function*(){this.logger.log("highlight in cross-origin iframe is waiting "),yield new Promise((e=>{const t=n=>{if(n.data.highlight===Mr){const i=n.data;this.logger.log("highlight got window message ",i),this.sessionData.projectID=i.projectID,this.sessionData.sessionSecureID=i.sessionSecureID,window.parent.postMessage({highlight:Ar},"*"),window.removeEventListener("message",t),e()}};window.addEventListener("message",t)}))}))}_setupCrossOriginIframeParent(){this.logger.log("highlight setting up cross origin iframe parent notification"),setInterval((()=>{window.document.querySelectorAll("iframe").forEach((e=>{var t;null==(t=e.contentWindow)||t.postMessage({highlight:Mr,projectID:this.sessionData.projectID,sessionSecureID:this.sessionData.sessionSecureID},"*")}))}),1e3),window.addEventListener("message",(e=>{e.data.highlight===Ar&&this.logger.log("highlight got response from initialized iframe")}))}_setupWindowListeners(){var e;try{const t=this;this.enableSegmentIntegration&&this.listeners.push(hs((e=>{if("track"===e.type){const n={};n["segment-event"]=e.event,t.addProperties(n,{type:"track",source:"segment"})}else if("identify"===e.type){const n=e.userId.replace(/^"(.*)"$/,"$1");t.identify(n,e.traits,"segment")}}))),this.listeners.push(fn((e=>{this.reloaded?(this.addCustomEvent("Reload",e),this.reloaded=!1,t.addProperties({reload:!0},{type:"session"})):this.addCustomEvent("Navigate",e),t.addProperties({"visited-url":e},{type:"session"})}))),this.listeners.push((e=>{let t;const n=()=>{clearTimeout(t),t=setTimeout((()=>{e({height:window.innerHeight,width:window.innerWidth})}),500)};return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)})((e=>{this.addCustomEvent("Viewport",e),this.submitViewportMetrics(e)}))),this.listeners.push((e=>{const t=t=>{if(t.target){const n=gs(t.target);e(n,t)}};return window.addEventListener("click",t),()=>window.removeEventListener("click",t)})(((e,n)=>{e&&this.addCustomEvent("Click",e);let i=null,o=null;if(n&&n.target){const e=n.target;i=ys(e),o=e.textContent,o&&o.length>2e3&&(o=o.substring(0,2e3))}t.addProperties({clickTextContent:o,clickSelector:i},{type:"session"})}))),this.listeners.push((e=>{const t=t=>{if(t.target){const n=gs(t.target);e(n)}};return window.addEventListener("focusin",t),()=>window.removeEventListener("focusin",t)})((e=>{e&&this.addCustomEvent("Focus",e)}))),this.listeners.push(vr((e=>{const{name:t,value:n}=e;this.recordMetric([{name:t,value:n,group:window.location.href,category:jt.WebVital}])}))),this.sessionShortcut&&Gs(this.sessionShortcut,(()=>{window.open(this.getCurrentSessionURLWithTimestamp(),"_blank")})),this.enablePerformanceRecording&&(this.listeners.push(((e,t)=>{let n=0,i=0;const o=()=>{const i=((new Date).getTime()-t)/1e3,o=Nr.memory.jsHeapSizeLimit||0,s=Nr.memory.usedJSHeapSize||0;e({jsHeapSizeLimit:o,usedJSHeapSize:s,relativeTimestamp:i,fps:n})};let s;o(),s=setInterval((()=>{o()}),5e3);let r=0,l=Date.now();const a=function(){var e=Date.now();if(r++,e>1e3+l){const t=Math.round(1e3*r/(e-l));n=t,r=0,l=e}i=requestAnimationFrame(a)};return a(),()=>{clearInterval(s),cancelAnimationFrame(i)}})((e=>{this.addCustomEvent("Performance",Mt(e))}),this._recordingStartTime)),this.listeners.push(((e,t)=>{let n={},i=1e3/60;zr().then((e=>i=e));const o=e=>{var t;(null==n?void 0:n.event)||(n={event:e,location:window.location.href,timerStart:null==(t=window.performance)?void 0:t.now()},window.requestAnimationFrame(s))},s=()=>{if(!(null==n?void 0:n.timerStart))return;const e=window.performance.now()-n.timerStart-i;r(e),n={}},r=i=>{const o=((new Date).getTime()-t)/1e3;e({relativeTimestamp:o,jankAmount:i,querySelector:l(),newLocation:window.location.href!=n.location?window.location.href:void 0})},l=()=>{var e;return(null==(e=null==n?void 0:n.event)?void 0:e.target)?ys(n.event.target):""};return window.addEventListener("click",o,!0),window.addEventListener("keydown",o,!0),()=>{window.removeEventListener("keydown",o,!0),window.removeEventListener("click",o,!0)}})((e=>{this.addCustomEvent("Jank",Mt(e)),this.recordMetric([{name:"Jank",value:e.jankAmount,category:jt.WebVital,group:e.querySelector}])}),this._recordingStartTime))),this._hasPreviouslyInitialized||((null==(e=window.electron)?void 0:e.ipcRenderer)?(window.electron.ipcRenderer.on("highlight.run",(({visible:e})=>{this._visibilityHandler(!e)})),this.logger.log("Set up Electron highlight.run events.")):((e=>{let t,n;if(void 0!==document.hidden?(t="hidden",n="visibilitychange"):void 0!==document.msHidden?(t="msHidden",n="msvisibilitychange"):void 0!==document.webkitHidden&&(t="webkitHidden",n="webkitvisibilitychange"),void 0===n)return()=>{};if(void 0===t)return()=>{};const i=t,o=()=>{const t=document[i];e(!!t)};document.addEventListener(n,o);const s=n})((e=>this._visibilityHandler(e))),this.logger.log("Set up document visibility listener.")),this._hasPreviouslyInitialized=!0);const n=()=>{this.hasSessionUnloaded=!0,this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0)};window.addEventListener("beforeunload",n),this.listeners.push((()=>window.removeEventListener("beforeunload",n)))}catch(n){this._isOnLocalHost&&(console.error(n),Br("initializeSession _setupWindowListeners",n))}const t=()=>{this.addCustomEvent("Page Unload",""),ds(ss.SESSION_DATA,JSON.stringify(this.sessionData))};window.addEventListener("beforeunload",t),this.listeners.push((()=>window.removeEventListener("beforeunload",t)));if(navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i)){const e=()=>{this.addCustomEvent("Page Unload",""),ds(ss.SESSION_DATA,JSON.stringify(this.sessionData))};window.addEventListener("pagehide",e),this.listeners.push((()=>window.removeEventListener("beforeunload",e)))}}submitViewportMetrics({height:e,width:t}){this.recordMetric([{name:Qt.ViewportHeight,value:e,category:jt.Device,group:window.location.href},{name:Qt.ViewportWidth,value:t,category:jt.Device,group:window.location.href},{name:Qt.ViewportArea,value:e*t,category:jt.Device,group:window.location.href}])}recordMetric(e){this._worker.postMessage({message:{type:Er.Metrics,metrics:e.map((e=>u(d({},e),{tags:e.tags||[],group:e.group||window.location.href,category:e.category||jt.Frontend,timestamp:new Date})))}})}stopRecording(e){this.manualStopped=!!e,this.manualStopped&&this.addCustomEvent("Stop","H.stop() was called which stops Highlight from recording."),this.state="NotRecording",e&&this._recordStop&&(this._recordStop(),this._recordStop=void 0),this.listeners.forEach((e=>e())),this.listeners=[]}getCurrentSessionTimestamp(){return this._recordingStartTime}getCurrentSessionURLWithTimestamp(){const e=(new Date).getTime(),{projectID:t,sessionSecureID:n}=this.sessionData,i=(e-this._recordingStartTime)/1e3;return`https://${Pr}/${t}/sessions/${n}?ts=${i}`}getCurrentSessionURL(){const e=this.sessionData.projectID,t=this.sessionData.sessionSecureID;return e&&t?`https://${Pr}/${e}/sessions/${t}`:null}snapshot(e){return m(this,null,(function*(){yield Gt.snapshotCanvas(e)}))}addSessionFeedback({timestamp:e,verbatim:t,user_email:n,user_name:i}){var o;this._worker.postMessage({message:{type:Er.Feedback,verbatim:t,timestamp:e,userName:i||this.sessionData.userIdentifier,userEmail:n||(null==(o=this.sessionData.userObject)?void 0:o.name)}})}_save(){return m(this,null,(function*(){var e;try{let t,n=144e5;"odzl0xep"===this.organizationID&&(n=432e5),"Recording"===this.state&&this.listeners&&this.sessionData.sessionStartTime&&Date.now()-this.sessionData.sessionStartTime>n&&(yield this._reset({})),"local"===(null==(e=this.options)?void 0:e.sendMode)&&(t=e=>m(this,null,(function*(){let t=new Blob([JSON.stringify({query:Li(So),variables:e})],{type:"application/json"});return yield window.fetch(`${this._backendUrl}`,{method:"POST",body:t}),0}))),yield this._sendPayload({isBeacon:!1,sendFn:t}),this.hasPushedData=!0,this.sessionData.lastPushTime=Date.now()}catch(t){this._isOnLocalHost&&(console.error(t),Br("_save",t))}"Recording"===this.state&&(this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0),this.pushPayloadTimerId=setTimeout((()=>{this._save()}),2e3))}))}addCustomEvent(e,t){if("NotRecording"===this.state){let n;const i=()=>{clearInterval(n),"Recording"===this.state&&this.events.length>0?Vt(e,t):n=setTimeout(i,500)};n=setTimeout(i,500)}else"Recording"===this.state&&(this.events.length>0||this.hasPushedData)&&Vt(e,t)}_sendPayload(e){return m(this,arguments,(function*({isBeacon:e,sendFn:t}){const n=In.getRecordedNetworkResources(this._firstLoadListeners,this._recordingStartTime),i=In.getRecordedWebSocketEvents(this._firstLoadListeners),o=[...this.events],s=[...this._firstLoadListeners.messages],r=[...this._firstLoadListeners.errors];if(!e){const{bytes:e,time:t}=this.enableCanvasRecording?Dr.canvas:Dr.normal;this._eventBytesSinceSnapshot>=e&&(new Date).getTime()-this._lastSnapshotTime>=t&&this.takeFullSnapshot()}this.logger.log(`Sending: ${o.length} events, ${s.length} messages, ${n.length} network resources, ${r.length} errors \nTo: ${this._backendUrl}\nOrg: ${this.organizationID}\nSessionSecureID: ${this.sessionData.sessionSecureID}`);const l=cs(Lr)||"";t?yield t({session_secure_id:this.sessionData.sessionSecureID,events:{events:o},messages:Mt({messages:s}),resources:JSON.stringify({resources:n}),web_socket_events:JSON.stringify({webSocketEvents:i}),errors:r,is_beacon:e,has_session_unloaded:this.hasSessionUnloaded,payload_id:this._payloadId.toString()}):this._worker.postMessage({message:{type:Er.AsyncEvents,id:this._payloadId,events:o,messages:s,errors:r,resourcesString:JSON.stringify({resources:n}),webSocketEventsString:JSON.stringify({webSocketEvents:i}),isBeacon:e,hasSessionUnloaded:this.hasSessionUnloaded,highlightLogs:l}}),this._payloadId++,ds(ss.PAYLOAD_ID,this._payloadId.toString()),e||(In.clearRecordedNetworkResources(this._firstLoadListeners),this.events=this.events.slice(o.length),this._firstLoadListeners.messages=this._firstLoadListeners.messages.slice(s.length),this._firstLoadListeners.errors=this._firstLoadListeners.errors.slice(r.length),wr(l))}))}takeFullSnapshot(){Gt.takeFullSnapshot(),this._eventBytesSinceSnapshot=0,this._lastSnapshotTime=(new Date).getTime()}}window.HighlightIO=Qr,e.FirstLoadListeners=In,e.GenerateSecureID=Tr,e.Highlight=Qr,e.HighlightWarning=Br,e.MetricCategory=jt,e.getPreviousSessionData=xr,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
